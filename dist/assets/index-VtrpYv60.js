var hD=Object.defineProperty;var AT=g=>{throw TypeError(g)};var dD=(g,t,e)=>t in g?hD(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var tt=(g,t,e)=>dD(g,typeof t!="symbol"?t+"":t,e),sA=(g,t,e)=>t.has(g)||AT("Cannot "+e);var l=(g,t,e)=>(sA(g,t,"read from private field"),e?e.call(g):t.get(g)),E=(g,t,e)=>t.has(g)?AT("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,e),A=(g,t,e,n)=>(sA(g,t,"write to private field"),n?n.call(g,e):t.set(g,e),e),_=(g,t,e)=>(sA(g,t,"access private method"),e);var Ze=(g,t,e,n)=>({set _(a){A(g,t,a,e)},get _(){return l(g,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function uC(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var aA={exports:{}},hf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST;function fD(){if(ST)return hf;ST=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:g,type:n,key:c,ref:a!==void 0?a:null,props:o}}return hf.Fragment=t,hf.jsx=e,hf.jsxs=e,hf}var wT;function gD(){return wT||(wT=1,aA.exports=fD()),aA.exports}var nt=gD(),rA={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function pD(){if(ET)return _t;ET=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=v&&z[v]||z["@@iterator"],typeof z=="function"?z:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,M={};function x(z,q,J){this.props=z,this.context=q,this.refs=M,this.updater=J||C}x.prototype.isReactComponent={},x.prototype.setState=function(z,q){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,q,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function L(){}L.prototype=x.prototype;function R(z,q,J){this.props=z,this.context=q,this.refs=M,this.updater=J||C}var O=R.prototype=new L;O.constructor=R,T(O,x.prototype),O.isPureReactComponent=!0;var N=Array.isArray;function B(){}var F={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function Z(z,q,J){var lt=J.ref;return{$$typeof:g,type:z,key:q,ref:lt!==void 0?lt:null,props:J}}function it(z,q){return Z(z.type,q,z.props)}function et(z){return typeof z=="object"&&z!==null&&z.$$typeof===g}function rt(z){var q={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(J){return q[J]})}var yt=/\/+/g;function gt(z,q){return typeof z=="object"&&z!==null&&z.key!=null?rt(""+z.key):q.toString(36)}function wt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(B,B):(z.status="pending",z.then(function(q){z.status==="pending"&&(z.status="fulfilled",z.value=q)},function(q){z.status==="pending"&&(z.status="rejected",z.reason=q)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function H(z,q,J,lt,mt){var Et=typeof z;(Et==="undefined"||Et==="boolean")&&(z=null);var bt=!1;if(z===null)bt=!0;else switch(Et){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(z.$$typeof){case g:case t:bt=!0;break;case m:return bt=z._init,H(bt(z._payload),q,J,lt,mt)}}if(bt)return mt=mt(z),bt=lt===""?"."+gt(z,0):lt,N(mt)?(J="",bt!=null&&(J=bt.replace(yt,"$&/")+"/"),H(mt,q,J,"",function(ys){return ys})):mt!=null&&(et(mt)&&(mt=it(mt,J+(mt.key==null||z&&z.key===mt.key?"":(""+mt.key).replace(yt,"$&/")+"/")+bt)),q.push(mt)),1;bt=0;var Qe=lt===""?".":lt+":";if(N(z))for(var be=0;be<z.length;be++)lt=z[be],Et=Qe+gt(lt,be),bt+=H(lt,q,J,Et,mt);else if(be=S(z),typeof be=="function")for(z=be.call(z),be=0;!(lt=z.next()).done;)lt=lt.value,Et=Qe+gt(lt,be++),bt+=H(lt,q,J,Et,mt);else if(Et==="object"){if(typeof z.then=="function")return H(wt(z),q,J,lt,mt);throw q=String(z),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return bt}function X(z,q,J){if(z==null)return z;var lt=[],mt=0;return H(z,lt,"","",function(Et){return q.call(J,Et,mt++)}),lt}function at(z){if(z._status===-1){var q=z._result;q=q(),q.then(function(J){(z._status===0||z._status===-1)&&(z._status=1,z._result=J)},function(J){(z._status===0||z._status===-1)&&(z._status=2,z._result=J)}),z._status===-1&&(z._status=0,z._result=q)}if(z._status===1)return z._result.default;throw z._result}var St=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},kt={map:X,forEach:function(z,q,J){X(z,function(){q.apply(this,arguments)},J)},count:function(z){var q=0;return X(z,function(){q++}),q},toArray:function(z){return X(z,function(q){return q})||[]},only:function(z){if(!et(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return _t.Activity=b,_t.Children=kt,_t.Component=x,_t.Fragment=e,_t.Profiler=a,_t.PureComponent=R,_t.StrictMode=n,_t.Suspense=d,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,_t.__COMPILER_RUNTIME={__proto__:null,c:function(z){return F.H.useMemoCache(z)}},_t.cache=function(z){return function(){return z.apply(null,arguments)}},_t.cacheSignal=function(){return null},_t.cloneElement=function(z,q,J){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var lt=T({},z.props),mt=z.key;if(q!=null)for(Et in q.key!==void 0&&(mt=""+q.key),q)!W.call(q,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&q.ref===void 0||(lt[Et]=q[Et]);var Et=arguments.length-2;if(Et===1)lt.children=J;else if(1<Et){for(var bt=Array(Et),Qe=0;Qe<Et;Qe++)bt[Qe]=arguments[Qe+2];lt.children=bt}return Z(z.type,mt,lt)},_t.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:o,_context:z},z},_t.createElement=function(z,q,J){var lt,mt={},Et=null;if(q!=null)for(lt in q.key!==void 0&&(Et=""+q.key),q)W.call(q,lt)&&lt!=="key"&&lt!=="__self"&&lt!=="__source"&&(mt[lt]=q[lt]);var bt=arguments.length-2;if(bt===1)mt.children=J;else if(1<bt){for(var Qe=Array(bt),be=0;be<bt;be++)Qe[be]=arguments[be+2];mt.children=Qe}if(z&&z.defaultProps)for(lt in bt=z.defaultProps,bt)mt[lt]===void 0&&(mt[lt]=bt[lt]);return Z(z,Et,mt)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(z){return{$$typeof:h,render:z}},_t.isValidElement=et,_t.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:at}},_t.memo=function(z,q){return{$$typeof:f,type:z,compare:q===void 0?null:q}},_t.startTransition=function(z){var q=F.T,J={};F.T=J;try{var lt=z(),mt=F.S;mt!==null&&mt(J,lt),typeof lt=="object"&&lt!==null&&typeof lt.then=="function"&&lt.then(B,St)}catch(Et){St(Et)}finally{q!==null&&J.types!==null&&(q.types=J.types),F.T=q}},_t.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},_t.use=function(z){return F.H.use(z)},_t.useActionState=function(z,q,J){return F.H.useActionState(z,q,J)},_t.useCallback=function(z,q){return F.H.useCallback(z,q)},_t.useContext=function(z){return F.H.useContext(z)},_t.useDebugValue=function(){},_t.useDeferredValue=function(z,q){return F.H.useDeferredValue(z,q)},_t.useEffect=function(z,q){return F.H.useEffect(z,q)},_t.useEffectEvent=function(z){return F.H.useEffectEvent(z)},_t.useId=function(){return F.H.useId()},_t.useImperativeHandle=function(z,q,J){return F.H.useImperativeHandle(z,q,J)},_t.useInsertionEffect=function(z,q){return F.H.useInsertionEffect(z,q)},_t.useLayoutEffect=function(z,q){return F.H.useLayoutEffect(z,q)},_t.useMemo=function(z,q){return F.H.useMemo(z,q)},_t.useOptimistic=function(z,q){return F.H.useOptimistic(z,q)},_t.useReducer=function(z,q,J){return F.H.useReducer(z,q,J)},_t.useRef=function(z){return F.H.useRef(z)},_t.useState=function(z){return F.H.useState(z)},_t.useSyncExternalStore=function(z,q,J){return F.H.useSyncExternalStore(z,q,J)},_t.useTransition=function(){return F.H.useTransition()},_t.version="19.2.0",_t}var _T;function JS(){return _T||(_T=1,rA.exports=pD()),rA.exports}var Y=JS();const hC=uC(Y);var lA={exports:{}},df={},oA={exports:{}},cA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function mD(){return TT||(TT=1,(function(g){function t(H,X){var at=H.length;H.push(X);t:for(;0<at;){var St=at-1>>>1,kt=H[St];if(0<a(kt,X))H[St]=X,H[at]=kt,at=St;else break t}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var X=H[0],at=H.pop();if(at!==X){H[0]=at;t:for(var St=0,kt=H.length,z=kt>>>1;St<z;){var q=2*(St+1)-1,J=H[q],lt=q+1,mt=H[lt];if(0>a(J,at))lt<kt&&0>a(mt,J)?(H[St]=mt,H[lt]=at,St=lt):(H[St]=J,H[q]=at,St=q);else if(lt<kt&&0>a(mt,at))H[St]=mt,H[lt]=at,St=lt;else break t}}return X}function a(H,X){var at=H.sortIndex-X.sortIndex;return at!==0?at:H.id-X.id}if(g.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;g.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();g.unstable_now=function(){return c.now()-h}}var d=[],f=[],m=1,b=null,v=3,S=!1,C=!1,T=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function O(H){for(var X=e(f);X!==null;){if(X.callback===null)n(f);else if(X.startTime<=H)n(f),X.sortIndex=X.expirationTime,t(d,X);else break;X=e(f)}}function N(H){if(T=!1,O(H),!C)if(e(d)!==null)C=!0,B||(B=!0,rt());else{var X=e(f);X!==null&&wt(N,X.startTime-H)}}var B=!1,F=-1,W=5,Z=-1;function it(){return M?!0:!(g.unstable_now()-Z<W)}function et(){if(M=!1,B){var H=g.unstable_now();Z=H;var X=!0;try{t:{C=!1,T&&(T=!1,L(F),F=-1),S=!0;var at=v;try{e:{for(O(H),b=e(d);b!==null&&!(b.expirationTime>H&&it());){var St=b.callback;if(typeof St=="function"){b.callback=null,v=b.priorityLevel;var kt=St(b.expirationTime<=H);if(H=g.unstable_now(),typeof kt=="function"){b.callback=kt,O(H),X=!0;break e}b===e(d)&&n(d),O(H)}else n(d);b=e(d)}if(b!==null)X=!0;else{var z=e(f);z!==null&&wt(N,z.startTime-H),X=!1}}break t}finally{b=null,v=at,S=!1}X=void 0}}finally{X?rt():B=!1}}}var rt;if(typeof R=="function")rt=function(){R(et)};else if(typeof MessageChannel<"u"){var yt=new MessageChannel,gt=yt.port2;yt.port1.onmessage=et,rt=function(){gt.postMessage(null)}}else rt=function(){x(et,0)};function wt(H,X){F=x(function(){H(g.unstable_now())},X)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(H){H.callback=null},g.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<H?Math.floor(1e3/H):5},g.unstable_getCurrentPriorityLevel=function(){return v},g.unstable_next=function(H){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var at=v;v=X;try{return H()}finally{v=at}},g.unstable_requestPaint=function(){M=!0},g.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var at=v;v=H;try{return X()}finally{v=at}},g.unstable_scheduleCallback=function(H,X,at){var St=g.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?St+at:St):at=St,H){case 1:var kt=-1;break;case 2:kt=250;break;case 5:kt=1073741823;break;case 4:kt=1e4;break;default:kt=5e3}return kt=at+kt,H={id:m++,callback:X,priorityLevel:H,startTime:at,expirationTime:kt,sortIndex:-1},at>St?(H.sortIndex=at,t(f,H),e(d)===null&&H===e(f)&&(T?(L(F),F=-1):T=!0,wt(N,at-St))):(H.sortIndex=kt,t(d,H),C||S||(C=!0,B||(B=!0,rt()))),H},g.unstable_shouldYield=it,g.unstable_wrapCallback=function(H){var X=v;return function(){var at=v;v=X;try{return H.apply(this,arguments)}finally{v=at}}}})(cA)),cA}var CT;function yD(){return CT||(CT=1,oA.exports=mD()),oA.exports}var uA={exports:{}},Mi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function bD(){if(xT)return Mi;xT=1;var g=JS();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,m){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:f,implementation:m}}var c=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Mi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Mi.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,m)},Mi.flushSync=function(d){var f=c.T,m=n.p;try{if(c.T=null,n.p=2,d)return d()}finally{c.T=f,n.p=m,n.d.f()}},Mi.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},Mi.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Mi.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,b=h(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:S}):m==="script"&&n.d.X(d,{crossOrigin:b,integrity:v,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Mi.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=h(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},Mi.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,b=h(m,f.crossOrigin);n.d.L(d,m,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Mi.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=h(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},Mi.requestFormReset=function(d){n.d.r(d)},Mi.unstable_batchedUpdates=function(d,f){return d(f)},Mi.useFormState=function(d,f,m){return c.H.useFormState(d,f,m)},Mi.useFormStatus=function(){return c.H.useHostTransitionStatus()},Mi.version="19.2.0",Mi}var MT;function vD(){if(MT)return uA.exports;MT=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),uA.exports=bD(),uA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RT;function AD(){if(RT)return df;RT=1;var g=yD(),t=JS(),e=vD();function n(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,r=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(r=s.return),i=s.return;while(i)}return s.tag===3?r:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(o(i)!==i)throw Error(n(188))}function f(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(n(188));return s!==i?null:i}for(var r=i,u=s;;){var p=r.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===r)return d(p),i;if(y===u)return d(p),s;y=y.sibling}throw Error(n(188))}if(r.return!==u.return)r=p,u=y;else{for(var w=!1,D=p.child;D;){if(D===r){w=!0,r=p,u=y;break}if(D===u){w=!0,u=p,r=y;break}D=D.sibling}if(!w){for(D=y.child;D;){if(D===r){w=!0,r=y,u=p;break}if(D===u){w=!0,u=y,r=p;break}D=D.sibling}if(!w)throw Error(n(189))}}if(r.alternate!==u)throw Error(n(190))}if(r.tag!==3)throw Error(n(188));return r.stateNode.current===r?i:s}function m(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=m(i),s!==null)return s;i=i.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),it=Symbol.for("react.memo_cache_sentinel"),et=Symbol.iterator;function rt(i){return i===null||typeof i!="object"?null:(i=et&&i[et]||i["@@iterator"],typeof i=="function"?i:null)}var yt=Symbol.for("react.client.reference");function gt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===yt?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case x:return"Profiler";case M:return"StrictMode";case N:return"Suspense";case B:return"SuspenseList";case Z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case R:return i.displayName||"Context";case L:return(i._context.displayName||"Context")+".Consumer";case O:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return s=i.displayName||null,s!==null?s:gt(i.type)||"Memo";case W:s=i._payload,i=i._init;try{return gt(i(s))}catch{}}return null}var wt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at={pending:!1,data:null,method:null,action:null},St=[],kt=-1;function z(i){return{current:i}}function q(i){0>kt||(i.current=St[kt],St[kt]=null,kt--)}function J(i,s){kt++,St[kt]=i.current,i.current=s}var lt=z(null),mt=z(null),Et=z(null),bt=z(null);function Qe(i,s){switch(J(Et,s),J(mt,i),J(lt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?G_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=G_(s),i=q_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(lt),J(lt,i)}function be(){q(lt),q(mt),q(Et)}function ys(i){i.memoizedState!==null&&J(bt,i);var s=lt.current,r=q_(s,i.type);s!==r&&(J(mt,i),J(lt,r))}function Gn(i){mt.current===i&&(q(lt),q(mt)),bt.current===i&&(q(bt),lf._currentValue=at)}var Wl,yd;function ya(i){if(Wl===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Wl=s&&s[1]||"",yd=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wl+i+yd}var Ib=!1;function jb(i,s){if(!i||Ib)return"";Ib=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(V){var G=V}Reflect.construct(i,[],Q)}else{try{Q.call()}catch(V){G=V}i.call(Q.prototype)}}else{try{throw Error()}catch(V){G=V}(Q=i())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(V){if(V&&G&&typeof V.stack=="string")return[V.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),w=y[0],D=y[1];if(w&&D){var k=w.split(`
`),j=D.split(`
`);for(p=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;p<j.length&&!j[p].includes("DetermineComponentFrameRoot");)p++;if(u===k.length||p===j.length)for(u=k.length-1,p=j.length-1;1<=u&&0<=p&&k[u]!==j[p];)p--;for(;1<=u&&0<=p;u--,p--)if(k[u]!==j[p]){if(u!==1||p!==1)do if(u--,p--,0>p||k[u]!==j[p]){var $=`
`+k[u].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=u&&0<=p);break}}}finally{Ib=!1,Error.prepareStackTrace=r}return(r=i?i.displayName||i.name:"")?ya(r):""}function j2(i,s){switch(i.tag){case 26:case 27:case 5:return ya(i.type);case 16:return ya("Lazy");case 13:return i.child!==s&&s!==null?ya("Suspense Fallback"):ya("Suspense");case 19:return ya("SuspenseList");case 0:case 15:return jb(i.type,!1);case 11:return jb(i.type.render,!1);case 1:return jb(i.type,!0);case 31:return ya("Activity");default:return""}}function Aw(i){try{var s="",r=null;do s+=j2(i,r),r=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Gb=Object.prototype.hasOwnProperty,qb=g.unstable_scheduleCallback,Vb=g.unstable_cancelCallback,G2=g.unstable_shouldYield,q2=g.unstable_requestPaint,un=g.unstable_now,V2=g.unstable_getCurrentPriorityLevel,Sw=g.unstable_ImmediatePriority,ww=g.unstable_UserBlockingPriority,Vp=g.unstable_NormalPriority,X2=g.unstable_LowPriority,Ew=g.unstable_IdlePriority,Y2=g.log,$2=g.unstable_setDisableYieldValue,bd=null,hn=null;function Dr(i){if(typeof Y2=="function"&&$2(i),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(bd,i)}catch{}}var dn=Math.clz32?Math.clz32:W2,K2=Math.log,Q2=Math.LN2;function W2(i){return i>>>=0,i===0?32:31-(K2(i)/Q2|0)|0}var Xp=256,Yp=262144,$p=4194304;function Zl(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Kp(i,s,r){var u=i.pendingLanes;if(u===0)return 0;var p=0,y=i.suspendedLanes,w=i.pingedLanes;i=i.warmLanes;var D=u&134217727;return D!==0?(u=D&~y,u!==0?p=Zl(u):(w&=D,w!==0?p=Zl(w):r||(r=D&~i,r!==0&&(p=Zl(r))))):(D=u&~y,D!==0?p=Zl(D):w!==0?p=Zl(w):r||(r=u&~i,r!==0&&(p=Zl(r)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,r=s&-s,y>=r||y===32&&(r&4194048)!==0)?s:p}function vd(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Z2(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _w(){var i=$p;return $p<<=1,($p&62914560)===0&&($p=4194304),i}function Xb(i){for(var s=[],r=0;31>r;r++)s.push(i);return s}function Ad(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function J2(i,s,r,u,p,y){var w=i.pendingLanes;i.pendingLanes=r,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=r,i.entangledLanes&=r,i.errorRecoveryDisabledLanes&=r,i.shellSuspendCounter=0;var D=i.entanglements,k=i.expirationTimes,j=i.hiddenUpdates;for(r=w&~r;0<r;){var $=31-dn(r),Q=1<<$;D[$]=0,k[$]=-1;var G=j[$];if(G!==null)for(j[$]=null,$=0;$<G.length;$++){var V=G[$];V!==null&&(V.lane&=-536870913)}r&=~Q}u!==0&&Tw(i,u,0),y!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=y&~(w&~s))}function Tw(i,s,r){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-dn(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|r&261930}function Cw(i,s){var r=i.entangledLanes|=s;for(i=i.entanglements;r;){var u=31-dn(r),p=1<<u;p&s|i[u]&s&&(i[u]|=s),r&=~p}}function xw(i,s){var r=s&-s;return r=(r&42)!==0?1:Yb(r),(r&(i.suspendedLanes|s))!==0?0:r}function Yb(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function $b(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Mw(){var i=X.p;return i!==0?i:(i=window.event,i===void 0?32:fT(i.type))}function Rw(i,s){var r=X.p;try{return X.p=i,s()}finally{X.p=r}}var Lr=Math.random().toString(36).slice(2),fi="__reactFiber$"+Lr,Xi="__reactProps$"+Lr,qc="__reactContainer$"+Lr,Kb="__reactEvents$"+Lr,tM="__reactListeners$"+Lr,eM="__reactHandles$"+Lr,Dw="__reactResources$"+Lr,Sd="__reactMarker$"+Lr;function Qb(i){delete i[fi],delete i[Xi],delete i[Kb],delete i[tM],delete i[eM]}function Vc(i){var s=i[fi];if(s)return s;for(var r=i.parentNode;r;){if(s=r[qc]||r[fi]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(i=W_(i);i!==null;){if(r=i[fi])return r;i=W_(i)}return s}i=r,r=i.parentNode}return null}function Xc(i){if(i=i[fi]||i[qc]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function wd(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(n(33))}function Yc(i){var s=i[Dw];return s||(s=i[Dw]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function si(i){i[Sd]=!0}var Lw=new Set,Ow={};function Jl(i,s){$c(i,s),$c(i+"Capture",s)}function $c(i,s){for(Ow[i]=s,i=0;i<s.length;i++)Lw.add(s[i])}var iM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nw={},kw={};function nM(i){return Gb.call(kw,i)?!0:Gb.call(Nw,i)?!1:iM.test(i)?kw[i]=!0:(Nw[i]=!0,!1)}function Qp(i,s,r){if(nM(s))if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+r)}}function Wp(i,s,r){if(r===null)i.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+r)}}function ba(i,s,r,u){if(u===null)i.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttributeNS(s,r,""+u)}}function qn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Bw(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function sM(i,s,r){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return p.call(this)},set:function(w){r=""+w,y.call(this,w)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(w){r=""+w},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Wb(i){if(!i._valueTracker){var s=Bw(i)?"checked":"value";i._valueTracker=sM(i,s,""+i[s])}}function zw(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return i&&(u=Bw(i)?i.checked?"true":"false":i.value),i=u,i!==r?(s.setValue(i),!0):!1}function Zp(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aM=/[\n"\\]/g;function Vn(i){return i.replace(aM,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Zb(i,s,r,u,p,y,w,D){i.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.type=w:i.removeAttribute("type"),s!=null?w==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+qn(s)):i.value!==""+qn(s)&&(i.value=""+qn(s)):w!=="submit"&&w!=="reset"||i.removeAttribute("value"),s!=null?Jb(i,w,qn(s)):r!=null?Jb(i,w,qn(r)):u!=null&&i.removeAttribute("value"),p==null&&y!=null&&(i.defaultChecked=!!y),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.name=""+qn(D):i.removeAttribute("name")}function Pw(i,s,r,u,p,y,w,D){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(i.type=y),s!=null||r!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Wb(i);return}r=r!=null?""+qn(r):"",s=s!=null?""+qn(s):r,D||s===i.value||(i.value=s),i.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=D?i.checked:!!u,i.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.name=w),Wb(i)}function Jb(i,s,r){s==="number"&&Zp(i.ownerDocument)===i||i.defaultValue===""+r||(i.defaultValue=""+r)}function Kc(i,s,r,u){if(i=i.options,s){s={};for(var p=0;p<r.length;p++)s["$"+r[p]]=!0;for(r=0;r<i.length;r++)p=s.hasOwnProperty("$"+i[r].value),i[r].selected!==p&&(i[r].selected=p),p&&u&&(i[r].defaultSelected=!0)}else{for(r=""+qn(r),s=null,p=0;p<i.length;p++){if(i[p].value===r){i[p].selected=!0,u&&(i[p].defaultSelected=!0);return}s!==null||i[p].disabled||(s=i[p])}s!==null&&(s.selected=!0)}}function Fw(i,s,r){if(s!=null&&(s=""+qn(s),s!==i.value&&(i.value=s),r==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=r!=null?""+qn(r):""}function Uw(i,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(n(92));if(wt(u)){if(1<u.length)throw Error(n(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=qn(s),i.defaultValue=r,u=i.textContent,u===r&&u!==""&&u!==null&&(i.value=u),Wb(i)}function Qc(i,s){if(s){var r=i.firstChild;if(r&&r===i.lastChild&&r.nodeType===3){r.nodeValue=s;return}}i.textContent=s}var rM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hw(i,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,r):typeof r!="number"||r===0||rM.has(s)?s==="float"?i.cssFloat=r:i[s]=(""+r).trim():i[s]=r+"px"}function Iw(i,s,r){if(s!=null&&typeof s!="object")throw Error(n(62));if(i=i.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&r[p]!==u&&Hw(i,p,u)}else for(var y in s)s.hasOwnProperty(y)&&Hw(i,y,s[y])}function t0(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jp(i){return oM.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function va(){}var e0=null;function i0(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Wc=null,Zc=null;function jw(i){var s=Xc(i);if(s&&(i=s.stateNode)){var r=i[Xi]||null;t:switch(i=s.stateNode,s.type){case"input":if(Zb(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=i;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Vn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==i&&u.form===i.form){var p=u[Xi]||null;if(!p)throw Error(n(90));Zb(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===i.form&&zw(u)}break t;case"textarea":Fw(i,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&Kc(i,!!r.multiple,s,!1)}}}var n0=!1;function Gw(i,s,r){if(n0)return i(s,r);n0=!0;try{var u=i(s);return u}finally{if(n0=!1,(Wc!==null||Zc!==null)&&(Hm(),Wc&&(s=Wc,i=Zc,Zc=Wc=null,jw(s),i)))for(s=0;s<i.length;s++)jw(i[s])}}function Ed(i,s){var r=i.stateNode;if(r===null)return null;var u=r[Xi]||null;if(u===null)return null;r=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(r&&typeof r!="function")throw Error(n(231,s,typeof r));return r}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s0=!1;if(Aa)try{var _d={};Object.defineProperty(_d,"passive",{get:function(){s0=!0}}),window.addEventListener("test",_d,_d),window.removeEventListener("test",_d,_d)}catch{s0=!1}var Or=null,a0=null,tm=null;function qw(){if(tm)return tm;var i,s=a0,r=s.length,u,p="value"in Or?Or.value:Or.textContent,y=p.length;for(i=0;i<r&&s[i]===p[i];i++);var w=r-i;for(u=1;u<=w&&s[r-u]===p[y-u];u++);return tm=p.slice(i,1<u?1-u:void 0)}function em(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function im(){return!0}function Vw(){return!1}function Yi(i){function s(r,u,p,y,w){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var D in i)i.hasOwnProperty(D)&&(r=i[D],this[D]=r?r(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?im:Vw,this.isPropagationStopped=Vw,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=im)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=im)},persist:function(){},isPersistent:im}),s}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nm=Yi(to),Td=b({},to,{view:0,detail:0}),cM=Yi(Td),r0,l0,Cd,sm=b({},Td,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c0,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Cd&&(Cd&&i.type==="mousemove"?(r0=i.screenX-Cd.screenX,l0=i.screenY-Cd.screenY):l0=r0=0,Cd=i),r0)},movementY:function(i){return"movementY"in i?i.movementY:l0}}),Xw=Yi(sm),uM=b({},sm,{dataTransfer:0}),hM=Yi(uM),dM=b({},Td,{relatedTarget:0}),o0=Yi(dM),fM=b({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),gM=Yi(fM),pM=b({},to,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mM=Yi(pM),yM=b({},to,{data:0}),Yw=Yi(yM),bM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SM(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=AM[i])?!!s[i]:!1}function c0(){return SM}var wM=b({},Td,{key:function(i){if(i.key){var s=bM[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=em(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vM[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c0,charCode:function(i){return i.type==="keypress"?em(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?em(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),EM=Yi(wM),_M=b({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$w=Yi(_M),TM=b({},Td,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c0}),CM=Yi(TM),xM=b({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),MM=Yi(xM),RM=b({},sm,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),DM=Yi(RM),LM=b({},to,{newState:0,oldState:0}),OM=Yi(LM),NM=[9,13,27,32],u0=Aa&&"CompositionEvent"in window,xd=null;Aa&&"documentMode"in document&&(xd=document.documentMode);var kM=Aa&&"TextEvent"in window&&!xd,Kw=Aa&&(!u0||xd&&8<xd&&11>=xd),Qw=" ",Ww=!1;function Zw(i,s){switch(i){case"keyup":return NM.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jw(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Jc=!1;function BM(i,s){switch(i){case"compositionend":return Jw(s);case"keypress":return s.which!==32?null:(Ww=!0,Qw);case"textInput":return i=s.data,i===Qw&&Ww?null:i;default:return null}}function zM(i,s){if(Jc)return i==="compositionend"||!u0&&Zw(i,s)?(i=qw(),tm=a0=Or=null,Jc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Kw&&s.locale!=="ko"?null:s.data;default:return null}}var PM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t1(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!PM[i.type]:s==="textarea"}function e1(i,s,r,u){Wc?Zc?Zc.push(u):Zc=[u]:Wc=u,s=Ym(s,"onChange"),0<s.length&&(r=new nm("onChange","change",null,r,u),i.push({event:r,listeners:s}))}var Md=null,Rd=null;function FM(i){P_(i,0)}function am(i){var s=wd(i);if(zw(s))return i}function i1(i,s){if(i==="change")return s}var n1=!1;if(Aa){var h0;if(Aa){var d0="oninput"in document;if(!d0){var s1=document.createElement("div");s1.setAttribute("oninput","return;"),d0=typeof s1.oninput=="function"}h0=d0}else h0=!1;n1=h0&&(!document.documentMode||9<document.documentMode)}function a1(){Md&&(Md.detachEvent("onpropertychange",r1),Rd=Md=null)}function r1(i){if(i.propertyName==="value"&&am(Rd)){var s=[];e1(s,Rd,i,i0(i)),Gw(FM,s)}}function UM(i,s,r){i==="focusin"?(a1(),Md=s,Rd=r,Md.attachEvent("onpropertychange",r1)):i==="focusout"&&a1()}function HM(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return am(Rd)}function IM(i,s){if(i==="click")return am(s)}function jM(i,s){if(i==="input"||i==="change")return am(s)}function GM(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var fn=typeof Object.is=="function"?Object.is:GM;function Dd(i,s){if(fn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var r=Object.keys(i),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!Gb.call(s,p)||!fn(i[p],s[p]))return!1}return!0}function l1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function o1(i,s){var r=l1(i);i=0;for(var u;r;){if(r.nodeType===3){if(u=i+r.textContent.length,i<=s&&u>=s)return{node:r,offset:s-i};i=u}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=l1(r)}}function c1(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?c1(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function u1(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Zp(i.document);s instanceof i.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)i=s.contentWindow;else break;s=Zp(i.document)}return s}function f0(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var qM=Aa&&"documentMode"in document&&11>=document.documentMode,tu=null,g0=null,Ld=null,p0=!1;function h1(i,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;p0||tu==null||tu!==Zp(u)||(u=tu,"selectionStart"in u&&f0(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ld&&Dd(Ld,u)||(Ld=u,u=Ym(g0,"onSelect"),0<u.length&&(s=new nm("onSelect","select",null,s,r),i.push({event:s,listeners:u}),s.target=tu)))}function eo(i,s){var r={};return r[i.toLowerCase()]=s.toLowerCase(),r["Webkit"+i]="webkit"+s,r["Moz"+i]="moz"+s,r}var eu={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionrun:eo("Transition","TransitionRun"),transitionstart:eo("Transition","TransitionStart"),transitioncancel:eo("Transition","TransitionCancel"),transitionend:eo("Transition","TransitionEnd")},m0={},d1={};Aa&&(d1=document.createElement("div").style,"AnimationEvent"in window||(delete eu.animationend.animation,delete eu.animationiteration.animation,delete eu.animationstart.animation),"TransitionEvent"in window||delete eu.transitionend.transition);function io(i){if(m0[i])return m0[i];if(!eu[i])return i;var s=eu[i],r;for(r in s)if(s.hasOwnProperty(r)&&r in d1)return m0[i]=s[r];return i}var f1=io("animationend"),g1=io("animationiteration"),p1=io("animationstart"),VM=io("transitionrun"),XM=io("transitionstart"),YM=io("transitioncancel"),m1=io("transitionend"),y1=new Map,y0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");y0.push("scrollEnd");function bs(i,s){y1.set(i,s),Jl(s,[i])}var rm=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Xn=[],iu=0,b0=0;function lm(){for(var i=iu,s=b0=iu=0;s<i;){var r=Xn[s];Xn[s++]=null;var u=Xn[s];Xn[s++]=null;var p=Xn[s];Xn[s++]=null;var y=Xn[s];if(Xn[s++]=null,u!==null&&p!==null){var w=u.pending;w===null?p.next=p:(p.next=w.next,w.next=p),u.pending=p}y!==0&&b1(r,p,y)}}function om(i,s,r,u){Xn[iu++]=i,Xn[iu++]=s,Xn[iu++]=r,Xn[iu++]=u,b0|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function v0(i,s,r,u){return om(i,s,r,u),cm(i)}function no(i,s){return om(i,null,null,s),cm(i)}function b1(i,s,r){i.lanes|=r;var u=i.alternate;u!==null&&(u.lanes|=r);for(var p=!1,y=i.return;y!==null;)y.childLanes|=r,u=y.alternate,u!==null&&(u.childLanes|=r),y.tag===22&&(i=y.stateNode,i===null||i._visibility&1||(p=!0)),i=y,y=y.return;return i.tag===3?(y=i.stateNode,p&&s!==null&&(p=31-dn(r),i=y.hiddenUpdates,u=i[p],u===null?i[p]=[s]:u.push(s),s.lane=r|536870912),y):null}function cm(i){if(50<Jd)throw Jd=0,Mv=null,Error(n(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var nu={};function $M(i,s,r,u){this.tag=i,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(i,s,r,u){return new $M(i,s,r,u)}function A0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Sa(i,s){var r=i.alternate;return r===null?(r=gn(i.tag,s,i.key,i.mode),r.elementType=i.elementType,r.type=i.type,r.stateNode=i.stateNode,r.alternate=i,i.alternate=r):(r.pendingProps=s,r.type=i.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=i.flags&65011712,r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,s=i.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=i.sibling,r.index=i.index,r.ref=i.ref,r.refCleanup=i.refCleanup,r}function v1(i,s){i.flags&=65011714;var r=i.alternate;return r===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=r.childLanes,i.lanes=r.lanes,i.child=r.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,i.type=r.type,s=r.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function um(i,s,r,u,p,y){var w=0;if(u=i,typeof i=="function")A0(i)&&(w=1);else if(typeof i=="string")w=JR(i,r,lt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case Z:return i=gn(31,r,s,p),i.elementType=Z,i.lanes=y,i;case T:return so(r.children,p,y,s);case M:w=8,p|=24;break;case x:return i=gn(12,r,s,p|2),i.elementType=x,i.lanes=y,i;case N:return i=gn(13,r,s,p),i.elementType=N,i.lanes=y,i;case B:return i=gn(19,r,s,p),i.elementType=B,i.lanes=y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:w=10;break t;case L:w=9;break t;case O:w=11;break t;case F:w=14;break t;case W:w=16,u=null;break t}w=29,r=Error(n(130,i===null?"null":typeof i,"")),u=null}return s=gn(w,r,s,p),s.elementType=i,s.type=u,s.lanes=y,s}function so(i,s,r,u){return i=gn(7,i,u,s),i.lanes=r,i}function S0(i,s,r){return i=gn(6,i,null,s),i.lanes=r,i}function A1(i){var s=gn(18,null,null,0);return s.stateNode=i,s}function w0(i,s,r){return s=gn(4,i.children!==null?i.children:[],i.key,s),s.lanes=r,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var S1=new WeakMap;function Yn(i,s){if(typeof i=="object"&&i!==null){var r=S1.get(i);return r!==void 0?r:(s={value:i,source:s,stack:Aw(s)},S1.set(i,s),s)}return{value:i,source:s,stack:Aw(s)}}var su=[],au=0,hm=null,Od=0,$n=[],Kn=0,Nr=null,Fs=1,Us="";function wa(i,s){su[au++]=Od,su[au++]=hm,hm=i,Od=s}function w1(i,s,r){$n[Kn++]=Fs,$n[Kn++]=Us,$n[Kn++]=Nr,Nr=i;var u=Fs;i=Us;var p=32-dn(u)-1;u&=~(1<<p),r+=1;var y=32-dn(s)+p;if(30<y){var w=p-p%5;y=(u&(1<<w)-1).toString(32),u>>=w,p-=w,Fs=1<<32-dn(s)+p|r<<p|u,Us=y+i}else Fs=1<<y|r<<p|u,Us=i}function E0(i){i.return!==null&&(wa(i,1),w1(i,1,0))}function _0(i){for(;i===hm;)hm=su[--au],su[au]=null,Od=su[--au],su[au]=null;for(;i===Nr;)Nr=$n[--Kn],$n[Kn]=null,Us=$n[--Kn],$n[Kn]=null,Fs=$n[--Kn],$n[Kn]=null}function E1(i,s){$n[Kn++]=Fs,$n[Kn++]=Us,$n[Kn++]=Nr,Fs=s.id,Us=s.overflow,Nr=i}var gi=null,ve=null,It=!1,kr=null,Qn=!1,T0=Error(n(519));function Br(i){var s=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nd(Yn(s,i)),T0}function _1(i){var s=i.stateNode,r=i.type,u=i.memoizedProps;switch(s[fi]=i,s[Xi]=u,r){case"dialog":Pt("cancel",s),Pt("close",s);break;case"iframe":case"object":case"embed":Pt("load",s);break;case"video":case"audio":for(r=0;r<ef.length;r++)Pt(ef[r],s);break;case"source":Pt("error",s);break;case"img":case"image":case"link":Pt("error",s),Pt("load",s);break;case"details":Pt("toggle",s);break;case"input":Pt("invalid",s),Pw(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pt("invalid",s);break;case"textarea":Pt("invalid",s),Uw(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||I_(s.textContent,r)?(u.popover!=null&&(Pt("beforetoggle",s),Pt("toggle",s)),u.onScroll!=null&&Pt("scroll",s),u.onScrollEnd!=null&&Pt("scrollend",s),u.onClick!=null&&(s.onclick=va),s=!0):s=!1,s||Br(i,!0)}function T1(i){for(gi=i.return;gi;)switch(gi.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:gi=gi.return}}function ru(i){if(i!==gi)return!1;if(!It)return T1(i),It=!0,!1;var s=i.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=i.type,r=!(r!=="form"&&r!=="button")||Gv(i.type,i.memoizedProps)),r=!r),r&&ve&&Br(i),T1(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ve=Q_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ve=Q_(i)}else s===27?(s=ve,Kr(i.type)?(i=$v,$v=null,ve=i):ve=s):ve=gi?Zn(i.stateNode.nextSibling):null;return!0}function ao(){ve=gi=null,It=!1}function C0(){var i=kr;return i!==null&&(Wi===null?Wi=i:Wi.push.apply(Wi,i),kr=null),i}function Nd(i){kr===null?kr=[i]:kr.push(i)}var x0=z(null),ro=null,Ea=null;function zr(i,s,r){J(x0,s._currentValue),s._currentValue=r}function _a(i){i._currentValue=x0.current,q(x0)}function M0(i,s,r){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===r)break;i=i.return}}function R0(i,s,r,u){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var y=p.dependencies;if(y!==null){var w=p.child;y=y.firstContext;t:for(;y!==null;){var D=y;y=p;for(var k=0;k<s.length;k++)if(D.context===s[k]){y.lanes|=r,D=y.alternate,D!==null&&(D.lanes|=r),M0(y.return,r,i),u||(w=null);break t}y=D.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(n(341));w.lanes|=r,y=w.alternate,y!==null&&(y.lanes|=r),M0(w,r,i),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function lu(i,s,r,u){i=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(n(387));if(w=w.memoizedProps,w!==null){var D=p.type;fn(p.pendingProps.value,w.value)||(i!==null?i.push(D):i=[D])}}else if(p===bt.current){if(w=p.alternate,w===null)throw Error(n(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(lf):i=[lf])}p=p.return}i!==null&&R0(s,i,r,u),s.flags|=262144}function dm(i){for(i=i.firstContext;i!==null;){if(!fn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function lo(i){ro=i,Ea=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pi(i){return C1(ro,i)}function fm(i,s){return ro===null&&lo(i),C1(i,s)}function C1(i,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},Ea===null){if(i===null)throw Error(n(308));Ea=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Ea=Ea.next=s;return r}var KM=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(r,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(r){return r()})}},QM=g.unstable_scheduleCallback,WM=g.unstable_NormalPriority,je={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function D0(){return{controller:new KM,data:new Map,refCount:0}}function kd(i){i.refCount--,i.refCount===0&&QM(WM,function(){i.controller.abort()})}var Bd=null,L0=0,ou=0,cu=null;function ZM(i,s){if(Bd===null){var r=Bd=[];L0=0,ou=kv(),cu={status:"pending",value:void 0,then:function(u){r.push(u)}}}return L0++,s.then(x1,x1),s}function x1(){if(--L0===0&&Bd!==null){cu!==null&&(cu.status="fulfilled");var i=Bd;Bd=null,ou=0,cu=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function JM(i,s){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<r.length;p++)(0,r[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var M1=H.S;H.S=function(i,s){h_=un(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ZM(i,s),M1!==null&&M1(i,s)};var oo=z(null);function O0(){var i=oo.current;return i!==null?i:ue.pooledCache}function gm(i,s){s===null?J(oo,oo.current):J(oo,s.pool)}function R1(){var i=O0();return i===null?null:{parent:je._currentValue,pool:i}}var uu=Error(n(460)),N0=Error(n(474)),pm=Error(n(542)),mm={then:function(){}};function D1(i){return i=i.status,i==="fulfilled"||i==="rejected"}function L1(i,s,r){switch(r=i[r],r===void 0?i.push(s):r!==s&&(s.then(va,va),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,N1(i),i;default:if(typeof s.status=="string")s.then(va,va);else{if(i=ue,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,N1(i),i}throw uo=s,uu}}function co(i){try{var s=i._init;return s(i._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(uo=r,uu):r}}var uo=null;function O1(){if(uo===null)throw Error(n(459));var i=uo;return uo=null,i}function N1(i){if(i===uu||i===pm)throw Error(n(483))}var hu=null,zd=0;function ym(i){var s=zd;return zd+=1,hu===null&&(hu=[]),L1(hu,i,s)}function Pd(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function bm(i,s){throw s.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(s),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function k1(i){function s(U,P){if(i){var I=U.deletions;I===null?(U.deletions=[P],U.flags|=16):I.push(P)}}function r(U,P){if(!i)return null;for(;P!==null;)s(U,P),P=P.sibling;return null}function u(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function p(U,P){return U=Sa(U,P),U.index=0,U.sibling=null,U}function y(U,P,I){return U.index=I,i?(I=U.alternate,I!==null?(I=I.index,I<P?(U.flags|=67108866,P):I):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function w(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function D(U,P,I,K){return P===null||P.tag!==6?(P=S0(I,U.mode,K),P.return=U,P):(P=p(P,I),P.return=U,P)}function k(U,P,I,K){var pt=I.type;return pt===T?$(U,P,I.props.children,K,I.key):P!==null&&(P.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===W&&co(pt)===P.type)?(P=p(P,I.props),Pd(P,I),P.return=U,P):(P=um(I.type,I.key,I.props,null,U.mode,K),Pd(P,I),P.return=U,P)}function j(U,P,I,K){return P===null||P.tag!==4||P.stateNode.containerInfo!==I.containerInfo||P.stateNode.implementation!==I.implementation?(P=w0(I,U.mode,K),P.return=U,P):(P=p(P,I.children||[]),P.return=U,P)}function $(U,P,I,K,pt){return P===null||P.tag!==7?(P=so(I,U.mode,K,pt),P.return=U,P):(P=p(P,I),P.return=U,P)}function Q(U,P,I){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=S0(""+P,U.mode,I),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case S:return I=um(P.type,P.key,P.props,null,U.mode,I),Pd(I,P),I.return=U,I;case C:return P=w0(P,U.mode,I),P.return=U,P;case W:return P=co(P),Q(U,P,I)}if(wt(P)||rt(P))return P=so(P,U.mode,I,null),P.return=U,P;if(typeof P.then=="function")return Q(U,ym(P),I);if(P.$$typeof===R)return Q(U,fm(U,P),I);bm(U,P)}return null}function G(U,P,I,K){var pt=P!==null?P.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return pt!==null?null:D(U,P,""+I,K);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case S:return I.key===pt?k(U,P,I,K):null;case C:return I.key===pt?j(U,P,I,K):null;case W:return I=co(I),G(U,P,I,K)}if(wt(I)||rt(I))return pt!==null?null:$(U,P,I,K,null);if(typeof I.then=="function")return G(U,P,ym(I),K);if(I.$$typeof===R)return G(U,P,fm(U,I),K);bm(U,I)}return null}function V(U,P,I,K,pt){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return U=U.get(I)||null,D(P,U,""+K,pt);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return U=U.get(K.key===null?I:K.key)||null,k(P,U,K,pt);case C:return U=U.get(K.key===null?I:K.key)||null,j(P,U,K,pt);case W:return K=co(K),V(U,P,I,K,pt)}if(wt(K)||rt(K))return U=U.get(I)||null,$(P,U,K,pt,null);if(typeof K.then=="function")return V(U,P,I,ym(K),pt);if(K.$$typeof===R)return V(U,P,I,fm(P,K),pt);bm(P,K)}return null}function ht(U,P,I,K){for(var pt=null,Xt=null,dt=P,Lt=P=0,Ut=null;dt!==null&&Lt<I.length;Lt++){dt.index>Lt?(Ut=dt,dt=null):Ut=dt.sibling;var Yt=G(U,dt,I[Lt],K);if(Yt===null){dt===null&&(dt=Ut);break}i&&dt&&Yt.alternate===null&&s(U,dt),P=y(Yt,P,Lt),Xt===null?pt=Yt:Xt.sibling=Yt,Xt=Yt,dt=Ut}if(Lt===I.length)return r(U,dt),It&&wa(U,Lt),pt;if(dt===null){for(;Lt<I.length;Lt++)dt=Q(U,I[Lt],K),dt!==null&&(P=y(dt,P,Lt),Xt===null?pt=dt:Xt.sibling=dt,Xt=dt);return It&&wa(U,Lt),pt}for(dt=u(dt);Lt<I.length;Lt++)Ut=V(dt,U,Lt,I[Lt],K),Ut!==null&&(i&&Ut.alternate!==null&&dt.delete(Ut.key===null?Lt:Ut.key),P=y(Ut,P,Lt),Xt===null?pt=Ut:Xt.sibling=Ut,Xt=Ut);return i&&dt.forEach(function(tl){return s(U,tl)}),It&&wa(U,Lt),pt}function vt(U,P,I,K){if(I==null)throw Error(n(151));for(var pt=null,Xt=null,dt=P,Lt=P=0,Ut=null,Yt=I.next();dt!==null&&!Yt.done;Lt++,Yt=I.next()){dt.index>Lt?(Ut=dt,dt=null):Ut=dt.sibling;var tl=G(U,dt,Yt.value,K);if(tl===null){dt===null&&(dt=Ut);break}i&&dt&&tl.alternate===null&&s(U,dt),P=y(tl,P,Lt),Xt===null?pt=tl:Xt.sibling=tl,Xt=tl,dt=Ut}if(Yt.done)return r(U,dt),It&&wa(U,Lt),pt;if(dt===null){for(;!Yt.done;Lt++,Yt=I.next())Yt=Q(U,Yt.value,K),Yt!==null&&(P=y(Yt,P,Lt),Xt===null?pt=Yt:Xt.sibling=Yt,Xt=Yt);return It&&wa(U,Lt),pt}for(dt=u(dt);!Yt.done;Lt++,Yt=I.next())Yt=V(dt,U,Lt,Yt.value,K),Yt!==null&&(i&&Yt.alternate!==null&&dt.delete(Yt.key===null?Lt:Yt.key),P=y(Yt,P,Lt),Xt===null?pt=Yt:Xt.sibling=Yt,Xt=Yt);return i&&dt.forEach(function(uD){return s(U,uD)}),It&&wa(U,Lt),pt}function ne(U,P,I,K){if(typeof I=="object"&&I!==null&&I.type===T&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case S:t:{for(var pt=I.key;P!==null;){if(P.key===pt){if(pt=I.type,pt===T){if(P.tag===7){r(U,P.sibling),K=p(P,I.props.children),K.return=U,U=K;break t}}else if(P.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===W&&co(pt)===P.type){r(U,P.sibling),K=p(P,I.props),Pd(K,I),K.return=U,U=K;break t}r(U,P);break}else s(U,P);P=P.sibling}I.type===T?(K=so(I.props.children,U.mode,K,I.key),K.return=U,U=K):(K=um(I.type,I.key,I.props,null,U.mode,K),Pd(K,I),K.return=U,U=K)}return w(U);case C:t:{for(pt=I.key;P!==null;){if(P.key===pt)if(P.tag===4&&P.stateNode.containerInfo===I.containerInfo&&P.stateNode.implementation===I.implementation){r(U,P.sibling),K=p(P,I.children||[]),K.return=U,U=K;break t}else{r(U,P);break}else s(U,P);P=P.sibling}K=w0(I,U.mode,K),K.return=U,U=K}return w(U);case W:return I=co(I),ne(U,P,I,K)}if(wt(I))return ht(U,P,I,K);if(rt(I)){if(pt=rt(I),typeof pt!="function")throw Error(n(150));return I=pt.call(I),vt(U,P,I,K)}if(typeof I.then=="function")return ne(U,P,ym(I),K);if(I.$$typeof===R)return ne(U,P,fm(U,I),K);bm(U,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,P!==null&&P.tag===6?(r(U,P.sibling),K=p(P,I),K.return=U,U=K):(r(U,P),K=S0(I,U.mode,K),K.return=U,U=K),w(U)):r(U,P)}return function(U,P,I,K){try{zd=0;var pt=ne(U,P,I,K);return hu=null,pt}catch(dt){if(dt===uu||dt===pm)throw dt;var Xt=gn(29,dt,null,U.mode);return Xt.lanes=K,Xt.return=U,Xt}finally{}}}var ho=k1(!0),B1=k1(!1),Pr=!1;function k0(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function B0(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Fr(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ur(i,s,r){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,($t&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=cm(i),b1(i,null,r),s}return om(i,u,s,r),cm(i)}function Fd(i,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,Cw(i,r)}}function z0(i,s){var r=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var w={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};y===null?p=y=w:y=y.next=w,r=r.next}while(r!==null);y===null?p=y=s:y=y.next=s}else p=y=s;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},i.updateQueue=r;return}i=r.lastBaseUpdate,i===null?r.firstBaseUpdate=s:i.next=s,r.lastBaseUpdate=s}var P0=!1;function Ud(){if(P0){var i=cu;if(i!==null)throw i}}function Hd(i,s,r,u){P0=!1;var p=i.updateQueue;Pr=!1;var y=p.firstBaseUpdate,w=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var k=D,j=k.next;k.next=null,w===null?y=j:w.next=j,w=k;var $=i.alternate;$!==null&&($=$.updateQueue,D=$.lastBaseUpdate,D!==w&&(D===null?$.firstBaseUpdate=j:D.next=j,$.lastBaseUpdate=k))}if(y!==null){var Q=p.baseState;w=0,$=j=k=null,D=y;do{var G=D.lane&-536870913,V=G!==D.lane;if(V?(Ft&G)===G:(u&G)===G){G!==0&&G===ou&&(P0=!0),$!==null&&($=$.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});t:{var ht=i,vt=D;G=s;var ne=r;switch(vt.tag){case 1:if(ht=vt.payload,typeof ht=="function"){Q=ht.call(ne,Q,G);break t}Q=ht;break t;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=vt.payload,G=typeof ht=="function"?ht.call(ne,Q,G):ht,G==null)break t;Q=b({},Q,G);break t;case 2:Pr=!0}}G=D.callback,G!==null&&(i.flags|=64,V&&(i.flags|=8192),V=p.callbacks,V===null?p.callbacks=[G]:V.push(G))}else V={lane:G,tag:D.tag,payload:D.payload,callback:D.callback,next:null},$===null?(j=$=V,k=Q):$=$.next=V,w|=G;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;V=D,D=V.next,V.next=null,p.lastBaseUpdate=V,p.shared.pending=null}}while(!0);$===null&&(k=Q),p.baseState=k,p.firstBaseUpdate=j,p.lastBaseUpdate=$,y===null&&(p.shared.lanes=0),qr|=w,i.lanes=w,i.memoizedState=Q}}function z1(i,s){if(typeof i!="function")throw Error(n(191,i));i.call(s)}function P1(i,s){var r=i.callbacks;if(r!==null)for(i.callbacks=null,i=0;i<r.length;i++)z1(r[i],s)}var du=z(null),vm=z(0);function F1(i,s){i=Na,J(vm,i),J(du,s),Na=i|s.baseLanes}function F0(){J(vm,Na),J(du,du.current)}function U0(){Na=vm.current,q(du),q(vm)}var pn=z(null),Wn=null;function Hr(i){var s=i.alternate;J(Fe,Fe.current&1),J(pn,i),Wn===null&&(s===null||du.current!==null||s.memoizedState!==null)&&(Wn=i)}function H0(i){J(Fe,Fe.current),J(pn,i),Wn===null&&(Wn=i)}function U1(i){i.tag===22?(J(Fe,Fe.current),J(pn,i),Wn===null&&(Wn=i)):Ir()}function Ir(){J(Fe,Fe.current),J(pn,pn.current)}function mn(i){q(pn),Wn===i&&(Wn=null),q(Fe)}var Fe=z(0);function Am(i){for(var s=i;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Xv(r)||Yv(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ta=0,Rt=null,ee=null,Ge=null,Sm=!1,fu=!1,fo=!1,wm=0,Id=0,gu=null,tR=0;function De(){throw Error(n(321))}function I0(i,s){if(s===null)return!1;for(var r=0;r<s.length&&r<i.length;r++)if(!fn(i[r],s[r]))return!1;return!0}function j0(i,s,r,u,p,y){return Ta=y,Rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=i===null||i.memoizedState===null?wE:nv,fo=!1,y=r(u,p),fo=!1,fu&&(y=I1(s,r,u,p)),H1(i),y}function H1(i){H.H=qd;var s=ee!==null&&ee.next!==null;if(Ta=0,Ge=ee=Rt=null,Sm=!1,Id=0,gu=null,s)throw Error(n(300));i===null||qe||(i=i.dependencies,i!==null&&dm(i)&&(qe=!0))}function I1(i,s,r,u){Rt=i;var p=0;do{if(fu&&(gu=null),Id=0,fu=!1,25<=p)throw Error(n(301));if(p+=1,Ge=ee=null,i.updateQueue!=null){var y=i.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}H.H=EE,y=s(r,u)}while(fu);return y}function eR(){var i=H.H,s=i.useState()[0];return s=typeof s.then=="function"?jd(s):s,i=i.useState()[0],(ee!==null?ee.memoizedState:null)!==i&&(Rt.flags|=1024),s}function G0(){var i=wm!==0;return wm=0,i}function q0(i,s,r){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~r}function V0(i){if(Sm){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Sm=!1}Ta=0,Ge=ee=Rt=null,fu=!1,Id=wm=0,gu=null}function zi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Rt.memoizedState=Ge=i:Ge=Ge.next=i,Ge}function Ue(){if(ee===null){var i=Rt.alternate;i=i!==null?i.memoizedState:null}else i=ee.next;var s=Ge===null?Rt.memoizedState:Ge.next;if(s!==null)Ge=s,ee=i;else{if(i===null)throw Rt.alternate===null?Error(n(467)):Error(n(310));ee=i,i={memoizedState:ee.memoizedState,baseState:ee.baseState,baseQueue:ee.baseQueue,queue:ee.queue,next:null},Ge===null?Rt.memoizedState=Ge=i:Ge=Ge.next=i}return Ge}function Em(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jd(i){var s=Id;return Id+=1,gu===null&&(gu=[]),i=L1(gu,i,s),s=Rt,(Ge===null?s.memoizedState:Ge.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?wE:nv),i}function _m(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return jd(i);if(i.$$typeof===R)return pi(i)}throw Error(n(438,String(i)))}function X0(i){var s=null,r=Rt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=Rt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Em(),Rt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(i),u=0;u<i;u++)r[u]=it;return s.index++,r}function Ca(i,s){return typeof s=="function"?s(i):s}function Tm(i){var s=Ue();return Y0(s,ee,i)}function Y0(i,s,r){var u=i.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=r;var p=i.baseQueue,y=u.pending;if(y!==null){if(p!==null){var w=p.next;p.next=y.next,y.next=w}s.baseQueue=p=y,u.pending=null}if(y=i.baseState,p===null)i.memoizedState=y;else{s=p.next;var D=w=null,k=null,j=s,$=!1;do{var Q=j.lane&-536870913;if(Q!==j.lane?(Ft&Q)===Q:(Ta&Q)===Q){var G=j.revertLane;if(G===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),Q===ou&&($=!0);else if((Ta&G)===G){j=j.next,G===ou&&($=!0);continue}else Q={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(D=k=Q,w=y):k=k.next=Q,Rt.lanes|=G,qr|=G;Q=j.action,fo&&r(y,Q),y=j.hasEagerState?j.eagerState:r(y,Q)}else G={lane:Q,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(D=k=G,w=y):k=k.next=G,Rt.lanes|=Q,qr|=Q;j=j.next}while(j!==null&&j!==s);if(k===null?w=y:k.next=D,!fn(y,i.memoizedState)&&(qe=!0,$&&(r=cu,r!==null)))throw r;i.memoizedState=y,i.baseState=w,i.baseQueue=k,u.lastRenderedState=y}return p===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function $0(i){var s=Ue(),r=s.queue;if(r===null)throw Error(n(311));r.lastRenderedReducer=i;var u=r.dispatch,p=r.pending,y=s.memoizedState;if(p!==null){r.pending=null;var w=p=p.next;do y=i(y,w.action),w=w.next;while(w!==p);fn(y,s.memoizedState)||(qe=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),r.lastRenderedState=y}return[y,u]}function j1(i,s,r){var u=Rt,p=Ue(),y=It;if(y){if(r===void 0)throw Error(n(407));r=r()}else r=s();var w=!fn((ee||p).memoizedState,r);if(w&&(p.memoizedState=r,qe=!0),p=p.queue,W0(V1.bind(null,u,p,i),[i]),p.getSnapshot!==s||w||Ge!==null&&Ge.memoizedState.tag&1){if(u.flags|=2048,pu(9,{destroy:void 0},q1.bind(null,u,p,r,s),null),ue===null)throw Error(n(349));y||(Ta&127)!==0||G1(u,s,r)}return r}function G1(i,s,r){i.flags|=16384,i={getSnapshot:s,value:r},s=Rt.updateQueue,s===null?(s=Em(),Rt.updateQueue=s,s.stores=[i]):(r=s.stores,r===null?s.stores=[i]:r.push(i))}function q1(i,s,r,u){s.value=r,s.getSnapshot=u,X1(s)&&Y1(i)}function V1(i,s,r){return r(function(){X1(s)&&Y1(i)})}function X1(i){var s=i.getSnapshot;i=i.value;try{var r=s();return!fn(i,r)}catch{return!0}}function Y1(i){var s=no(i,2);s!==null&&Zi(s,i,2)}function K0(i){var s=zi();if(typeof i=="function"){var r=i;if(i=r(),fo){Dr(!0);try{r()}finally{Dr(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:i},s}function $1(i,s,r,u){return i.baseState=r,Y0(i,ee,typeof u=="function"?u:Ca)}function iR(i,s,r,u,p){if(Mm(i))throw Error(n(485));if(i=s.action,i!==null){var y={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){y.listeners.push(w)}};H.T!==null?r(!0):y.isTransition=!1,u(y),r=s.pending,r===null?(y.next=s.pending=y,K1(s,y)):(y.next=r.next,s.pending=r.next=y)}}function K1(i,s){var r=s.action,u=s.payload,p=i.state;if(s.isTransition){var y=H.T,w={};H.T=w;try{var D=r(p,u),k=H.S;k!==null&&k(w,D),Q1(i,s,D)}catch(j){Q0(i,s,j)}finally{y!==null&&w.types!==null&&(y.types=w.types),H.T=y}}else try{y=r(p,u),Q1(i,s,y)}catch(j){Q0(i,s,j)}}function Q1(i,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){W1(i,s,u)},function(u){return Q0(i,s,u)}):W1(i,s,r)}function W1(i,s,r){s.status="fulfilled",s.value=r,Z1(s),i.state=r,s=i.pending,s!==null&&(r=s.next,r===s?i.pending=null:(r=r.next,s.next=r,K1(i,r)))}function Q0(i,s,r){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,Z1(s),s=s.next;while(s!==u)}i.action=null}function Z1(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function J1(i,s){return s}function tE(i,s){if(It){var r=ue.formState;if(r!==null){t:{var u=Rt;if(It){if(ve){e:{for(var p=ve,y=Qn;p.nodeType!==8;){if(!y){p=null;break e}if(p=Zn(p.nextSibling),p===null){p=null;break e}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){ve=Zn(p.nextSibling),u=p.data==="F!";break t}}Br(u)}u=!1}u&&(s=r[0])}}return r=zi(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J1,lastRenderedState:s},r.queue=u,r=vE.bind(null,Rt,u),u.dispatch=r,u=K0(!1),y=iv.bind(null,Rt,!1,u.queue),u=zi(),p={state:s,dispatch:null,action:i,pending:null},u.queue=p,r=iR.bind(null,Rt,p,y,r),p.dispatch=r,u.memoizedState=i,[s,r,!1]}function eE(i){var s=Ue();return iE(s,ee,i)}function iE(i,s,r){if(s=Y0(i,s,J1)[0],i=Tm(Ca)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=jd(s)}catch(w){throw w===uu?pm:w}else u=s;s=Ue();var p=s.queue,y=p.dispatch;return r!==s.memoizedState&&(Rt.flags|=2048,pu(9,{destroy:void 0},nR.bind(null,p,r),null)),[u,y,i]}function nR(i,s){i.action=s}function nE(i){var s=Ue(),r=ee;if(r!==null)return iE(s,r,i);Ue(),s=s.memoizedState,r=Ue();var u=r.queue.dispatch;return r.memoizedState=i,[s,u,!1]}function pu(i,s,r,u){return i={tag:i,create:r,deps:u,inst:s,next:null},s=Rt.updateQueue,s===null&&(s=Em(),Rt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=i.next=i:(u=r.next,r.next=i,i.next=u,s.lastEffect=i),i}function sE(){return Ue().memoizedState}function Cm(i,s,r,u){var p=zi();Rt.flags|=i,p.memoizedState=pu(1|s,{destroy:void 0},r,u===void 0?null:u)}function xm(i,s,r,u){var p=Ue();u=u===void 0?null:u;var y=p.memoizedState.inst;ee!==null&&u!==null&&I0(u,ee.memoizedState.deps)?p.memoizedState=pu(s,y,r,u):(Rt.flags|=i,p.memoizedState=pu(1|s,y,r,u))}function aE(i,s){Cm(8390656,8,i,s)}function W0(i,s){xm(2048,8,i,s)}function sR(i){Rt.flags|=4;var s=Rt.updateQueue;if(s===null)s=Em(),Rt.updateQueue=s,s.events=[i];else{var r=s.events;r===null?s.events=[i]:r.push(i)}}function rE(i){var s=Ue().memoizedState;return sR({ref:s,nextImpl:i}),function(){if(($t&2)!==0)throw Error(n(440));return s.impl.apply(void 0,arguments)}}function lE(i,s){return xm(4,2,i,s)}function oE(i,s){return xm(4,4,i,s)}function cE(i,s){if(typeof s=="function"){i=i();var r=s(i);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function uE(i,s,r){r=r!=null?r.concat([i]):null,xm(4,4,cE.bind(null,s,i),r)}function Z0(){}function hE(i,s){var r=Ue();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&I0(s,u[1])?u[0]:(r.memoizedState=[i,s],i)}function dE(i,s){var r=Ue();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&I0(s,u[1]))return u[0];if(u=i(),fo){Dr(!0);try{i()}finally{Dr(!1)}}return r.memoizedState=[u,s],u}function J0(i,s,r){return r===void 0||(Ta&1073741824)!==0&&(Ft&261930)===0?i.memoizedState=s:(i.memoizedState=r,i=f_(),Rt.lanes|=i,qr|=i,r)}function fE(i,s,r,u){return fn(r,s)?r:du.current!==null?(i=J0(i,r,u),fn(i,s)||(qe=!0),i):(Ta&42)===0||(Ta&1073741824)!==0&&(Ft&261930)===0?(qe=!0,i.memoizedState=r):(i=f_(),Rt.lanes|=i,qr|=i,s)}function gE(i,s,r,u,p){var y=X.p;X.p=y!==0&&8>y?y:8;var w=H.T,D={};H.T=D,iv(i,!1,s,r);try{var k=p(),j=H.S;if(j!==null&&j(D,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var $=JM(k,u);Gd(i,s,$,vn(i))}else Gd(i,s,u,vn(i))}catch(Q){Gd(i,s,{then:function(){},status:"rejected",reason:Q},vn())}finally{X.p=y,w!==null&&D.types!==null&&(w.types=D.types),H.T=w}}function aR(){}function tv(i,s,r,u){if(i.tag!==5)throw Error(n(476));var p=pE(i).queue;gE(i,p,s,at,r===null?aR:function(){return mE(i),r(u)})}function pE(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:at,baseState:at,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:at},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:r},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function mE(i){var s=pE(i);s.next===null&&(s=i.alternate.memoizedState),Gd(i,s.next.queue,{},vn())}function ev(){return pi(lf)}function yE(){return Ue().memoizedState}function bE(){return Ue().memoizedState}function rR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var r=vn();i=Fr(r);var u=Ur(s,i,r);u!==null&&(Zi(u,s,r),Fd(u,s,r)),s={cache:D0()},i.payload=s;return}s=s.return}}function lR(i,s,r){var u=vn();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Mm(i)?AE(s,r):(r=v0(i,s,r,u),r!==null&&(Zi(r,i,u),SE(r,s,u)))}function vE(i,s,r){var u=vn();Gd(i,s,r,u)}function Gd(i,s,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Mm(i))AE(s,p);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,D=y(w,r);if(p.hasEagerState=!0,p.eagerState=D,fn(D,w))return om(i,s,p,0),ue===null&&lm(),!1}catch{}finally{}if(r=v0(i,s,p,u),r!==null)return Zi(r,i,u),SE(r,s,u),!0}return!1}function iv(i,s,r,u){if(u={lane:2,revertLane:kv(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Mm(i)){if(s)throw Error(n(479))}else s=v0(i,r,u,2),s!==null&&Zi(s,i,2)}function Mm(i){var s=i.alternate;return i===Rt||s!==null&&s===Rt}function AE(i,s){fu=Sm=!0;var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}function SE(i,s,r){if((r&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,r|=u,s.lanes=r,Cw(i,r)}}var qd={readContext:pi,use:_m,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useLayoutEffect:De,useInsertionEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useSyncExternalStore:De,useId:De,useHostTransitionStatus:De,useFormState:De,useActionState:De,useOptimistic:De,useMemoCache:De,useCacheRefresh:De};qd.useEffectEvent=De;var wE={readContext:pi,use:_m,useCallback:function(i,s){return zi().memoizedState=[i,s===void 0?null:s],i},useContext:pi,useEffect:aE,useImperativeHandle:function(i,s,r){r=r!=null?r.concat([i]):null,Cm(4194308,4,cE.bind(null,s,i),r)},useLayoutEffect:function(i,s){return Cm(4194308,4,i,s)},useInsertionEffect:function(i,s){Cm(4,2,i,s)},useMemo:function(i,s){var r=zi();s=s===void 0?null:s;var u=i();if(fo){Dr(!0);try{i()}finally{Dr(!1)}}return r.memoizedState=[u,s],u},useReducer:function(i,s,r){var u=zi();if(r!==void 0){var p=r(s);if(fo){Dr(!0);try{r(s)}finally{Dr(!1)}}}else p=s;return u.memoizedState=u.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},u.queue=i,i=i.dispatch=lR.bind(null,Rt,i),[u.memoizedState,i]},useRef:function(i){var s=zi();return i={current:i},s.memoizedState=i},useState:function(i){i=K0(i);var s=i.queue,r=vE.bind(null,Rt,s);return s.dispatch=r,[i.memoizedState,r]},useDebugValue:Z0,useDeferredValue:function(i,s){var r=zi();return J0(r,i,s)},useTransition:function(){var i=K0(!1);return i=gE.bind(null,Rt,i.queue,!0,!1),zi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,r){var u=Rt,p=zi();if(It){if(r===void 0)throw Error(n(407));r=r()}else{if(r=s(),ue===null)throw Error(n(349));(Ft&127)!==0||G1(u,s,r)}p.memoizedState=r;var y={value:r,getSnapshot:s};return p.queue=y,aE(V1.bind(null,u,y,i),[i]),u.flags|=2048,pu(9,{destroy:void 0},q1.bind(null,u,y,r,s),null),r},useId:function(){var i=zi(),s=ue.identifierPrefix;if(It){var r=Us,u=Fs;r=(u&~(1<<32-dn(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=wm++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=tR++,s="_"+s+"r_"+r.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:ev,useFormState:tE,useActionState:tE,useOptimistic:function(i){var s=zi();s.memoizedState=s.baseState=i;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=iv.bind(null,Rt,!0,r),r.dispatch=s,[i,s]},useMemoCache:X0,useCacheRefresh:function(){return zi().memoizedState=rR.bind(null,Rt)},useEffectEvent:function(i){var s=zi(),r={impl:i};return s.memoizedState=r,function(){if(($t&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}},nv={readContext:pi,use:_m,useCallback:hE,useContext:pi,useEffect:W0,useImperativeHandle:uE,useInsertionEffect:lE,useLayoutEffect:oE,useMemo:dE,useReducer:Tm,useRef:sE,useState:function(){return Tm(Ca)},useDebugValue:Z0,useDeferredValue:function(i,s){var r=Ue();return fE(r,ee.memoizedState,i,s)},useTransition:function(){var i=Tm(Ca)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:jd(i),s]},useSyncExternalStore:j1,useId:yE,useHostTransitionStatus:ev,useFormState:eE,useActionState:eE,useOptimistic:function(i,s){var r=Ue();return $1(r,ee,i,s)},useMemoCache:X0,useCacheRefresh:bE};nv.useEffectEvent=rE;var EE={readContext:pi,use:_m,useCallback:hE,useContext:pi,useEffect:W0,useImperativeHandle:uE,useInsertionEffect:lE,useLayoutEffect:oE,useMemo:dE,useReducer:$0,useRef:sE,useState:function(){return $0(Ca)},useDebugValue:Z0,useDeferredValue:function(i,s){var r=Ue();return ee===null?J0(r,i,s):fE(r,ee.memoizedState,i,s)},useTransition:function(){var i=$0(Ca)[0],s=Ue().memoizedState;return[typeof i=="boolean"?i:jd(i),s]},useSyncExternalStore:j1,useId:yE,useHostTransitionStatus:ev,useFormState:nE,useActionState:nE,useOptimistic:function(i,s){var r=Ue();return ee!==null?$1(r,ee,i,s):(r.baseState=i,[i,r.queue.dispatch])},useMemoCache:X0,useCacheRefresh:bE};EE.useEffectEvent=rE;function sv(i,s,r,u){s=i.memoizedState,r=r(u,s),r=r==null?s:b({},s,r),i.memoizedState=r,i.lanes===0&&(i.updateQueue.baseState=r)}var av={enqueueSetState:function(i,s,r){i=i._reactInternals;var u=vn(),p=Fr(u);p.payload=s,r!=null&&(p.callback=r),s=Ur(i,p,u),s!==null&&(Zi(s,i,u),Fd(s,i,u))},enqueueReplaceState:function(i,s,r){i=i._reactInternals;var u=vn(),p=Fr(u);p.tag=1,p.payload=s,r!=null&&(p.callback=r),s=Ur(i,p,u),s!==null&&(Zi(s,i,u),Fd(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var r=vn(),u=Fr(r);u.tag=2,s!=null&&(u.callback=s),s=Ur(i,u,r),s!==null&&(Zi(s,i,r),Fd(s,i,r))}};function _E(i,s,r,u,p,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,y,w):s.prototype&&s.prototype.isPureReactComponent?!Dd(r,u)||!Dd(p,y):!0}function TE(i,s,r,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==i&&av.enqueueReplaceState(s,s.state,null)}function go(i,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(i=i.defaultProps){r===s&&(r=b({},r));for(var p in i)r[p]===void 0&&(r[p]=i[p])}return r}function CE(i){rm(i)}function xE(i){console.error(i)}function ME(i){rm(i)}function Rm(i,s){try{var r=i.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function RE(i,s,r){try{var u=i.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function rv(i,s,r){return r=Fr(r),r.tag=3,r.payload={element:null},r.callback=function(){Rm(i,s)},r}function DE(i){return i=Fr(i),i.tag=3,i}function LE(i,s,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;i.payload=function(){return p(y)},i.callback=function(){RE(s,r,u)}}var w=r.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(i.callback=function(){RE(s,r,u),typeof p!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var D=u.stack;this.componentDidCatch(u.value,{componentStack:D!==null?D:""})})}function oR(i,s,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&lu(s,r,p,!0),r=pn.current,r!==null){switch(r.tag){case 31:case 13:return Wn===null?Im():r.alternate===null&&Le===0&&(Le=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===mm?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),Lv(i,u,p)),!1;case 22:return r.flags|=65536,u===mm?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),Lv(i,u,p)),!1}throw Error(n(435,r.tag))}return Lv(i,u,p),Im(),!1}if(It)return s=pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==T0&&(i=Error(n(422),{cause:u}),Nd(Yn(i,r)))):(u!==T0&&(s=Error(n(423),{cause:u}),Nd(Yn(s,r))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,u=Yn(u,r),p=rv(i.stateNode,u,p),z0(i,p),Le!==4&&(Le=2)),!1;var y=Error(n(520),{cause:u});if(y=Yn(y,r),Zd===null?Zd=[y]:Zd.push(y),Le!==4&&(Le=2),s===null)return!0;u=Yn(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,i=p&-p,r.lanes|=i,i=rv(r.stateNode,u,i),z0(r,i),!1;case 1:if(s=r.type,y=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Vr===null||!Vr.has(y))))return r.flags|=65536,p&=-p,r.lanes|=p,p=DE(p),LE(p,i,r,u),z0(r,p),!1}r=r.return}while(r!==null);return!1}var lv=Error(n(461)),qe=!1;function mi(i,s,r,u){s.child=i===null?B1(s,null,r,u):ho(s,i.child,r,u)}function OE(i,s,r,u,p){r=r.render;var y=s.ref;if("ref"in u){var w={};for(var D in u)D!=="ref"&&(w[D]=u[D])}else w=u;return lo(s),u=j0(i,s,r,w,y,p),D=G0(),i!==null&&!qe?(q0(i,s,p),xa(i,s,p)):(It&&D&&E0(s),s.flags|=1,mi(i,s,u,p),s.child)}function NE(i,s,r,u,p){if(i===null){var y=r.type;return typeof y=="function"&&!A0(y)&&y.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=y,kE(i,s,y,u,p)):(i=um(r.type,null,u,s,s.mode,p),i.ref=s.ref,i.return=s,s.child=i)}if(y=i.child,!pv(i,p)){var w=y.memoizedProps;if(r=r.compare,r=r!==null?r:Dd,r(w,u)&&i.ref===s.ref)return xa(i,s,p)}return s.flags|=1,i=Sa(y,u),i.ref=s.ref,i.return=s,s.child=i}function kE(i,s,r,u,p){if(i!==null){var y=i.memoizedProps;if(Dd(y,u)&&i.ref===s.ref)if(qe=!1,s.pendingProps=u=y,pv(i,p))(i.flags&131072)!==0&&(qe=!0);else return s.lanes=i.lanes,xa(i,s,p)}return ov(i,s,r,u,p)}function BE(i,s,r,u){var p=u.children,y=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|r:r,i!==null){for(u=s.child=i.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,s.child=null;return zE(i,s,y,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&gm(s,y!==null?y.cachePool:null),y!==null?F1(s,y):F0(),U1(s);else return u=s.lanes=536870912,zE(i,s,y!==null?y.baseLanes|r:r,r,u)}else y!==null?(gm(s,y.cachePool),F1(s,y),Ir(),s.memoizedState=null):(i!==null&&gm(s,null),F0(),Ir());return mi(i,s,p,r),s.child}function Vd(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function zE(i,s,r,u,p){var y=O0();return y=y===null?null:{parent:je._currentValue,pool:y},s.memoizedState={baseLanes:r,cachePool:y},i!==null&&gm(s,null),F0(),U1(s),i!==null&&lu(i,s,u,!0),s.childLanes=p,null}function Dm(i,s){return s=Om({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function PE(i,s,r){return ho(s,i.child,null,r),i=Dm(s,s.pendingProps),i.flags|=2,mn(s),s.memoizedState=null,i}function cR(i,s,r){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(It){if(u.mode==="hidden")return i=Dm(s,u),s.lanes=536870912,Vd(null,i);if(H0(s),(i=ve)?(i=K_(i,Qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Nr!==null?{id:Fs,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},r=A1(i),r.return=s,s.child=r,gi=s,ve=null)):i=null,i===null)throw Br(s);return s.lanes=536870912,null}return Dm(s,u)}var y=i.memoizedState;if(y!==null){var w=y.dehydrated;if(H0(s),p)if(s.flags&256)s.flags&=-257,s=PE(i,s,r);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(n(558));else if(qe||lu(i,s,r,!1),p=(r&i.childLanes)!==0,qe||p){if(u=ue,u!==null&&(w=xw(u,r),w!==0&&w!==y.retryLane))throw y.retryLane=w,no(i,w),Zi(u,i,w),lv;Im(),s=PE(i,s,r)}else i=y.treeContext,ve=Zn(w.nextSibling),gi=s,It=!0,kr=null,Qn=!1,i!==null&&E1(s,i),s=Dm(s,u),s.flags|=4096;return s}return i=Sa(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Lm(i,s){var r=s.ref;if(r===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(n(284));(i===null||i.ref!==r)&&(s.flags|=4194816)}}function ov(i,s,r,u,p){return lo(s),r=j0(i,s,r,u,void 0,p),u=G0(),i!==null&&!qe?(q0(i,s,p),xa(i,s,p)):(It&&u&&E0(s),s.flags|=1,mi(i,s,r,p),s.child)}function FE(i,s,r,u,p,y){return lo(s),s.updateQueue=null,r=I1(s,u,r,p),H1(i),u=G0(),i!==null&&!qe?(q0(i,s,y),xa(i,s,y)):(It&&u&&E0(s),s.flags|=1,mi(i,s,r,y),s.child)}function UE(i,s,r,u,p){if(lo(s),s.stateNode===null){var y=nu,w=r.contextType;typeof w=="object"&&w!==null&&(y=pi(w)),y=new r(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=av,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},k0(s),w=r.contextType,y.context=typeof w=="object"&&w!==null?pi(w):nu,y.state=s.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(sv(s,r,w,u),y.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(w=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),w!==y.state&&av.enqueueReplaceState(y,y.state,null),Hd(s,u,y,p),Ud(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){y=s.stateNode;var D=s.memoizedProps,k=go(r,D);y.props=k;var j=y.context,$=r.contextType;w=nu,typeof $=="object"&&$!==null&&(w=pi($));var Q=r.getDerivedStateFromProps;$=typeof Q=="function"||typeof y.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,$||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D||j!==w)&&TE(s,y,u,w),Pr=!1;var G=s.memoizedState;y.state=G,Hd(s,u,y,p),Ud(),j=s.memoizedState,D||G!==j||Pr?(typeof Q=="function"&&(sv(s,r,Q,u),j=s.memoizedState),(k=Pr||_E(s,r,k,u,G,j,w))?($||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),y.props=u,y.state=j,y.context=w,u=k):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,B0(i,s),w=s.memoizedProps,$=go(r,w),y.props=$,Q=s.pendingProps,G=y.context,j=r.contextType,k=nu,typeof j=="object"&&j!==null&&(k=pi(j)),D=r.getDerivedStateFromProps,(j=typeof D=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w!==Q||G!==k)&&TE(s,y,u,k),Pr=!1,G=s.memoizedState,y.state=G,Hd(s,u,y,p),Ud();var V=s.memoizedState;w!==Q||G!==V||Pr||i!==null&&i.dependencies!==null&&dm(i.dependencies)?(typeof D=="function"&&(sv(s,r,D,u),V=s.memoizedState),($=Pr||_E(s,r,$,u,G,V,k)||i!==null&&i.dependencies!==null&&dm(i.dependencies))?(j||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,V,k),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,V,k)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=V),y.props=u,y.state=V,y.context=k,u=$):(typeof y.componentDidUpdate!="function"||w===i.memoizedProps&&G===i.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||w===i.memoizedProps&&G===i.memoizedState||(s.flags|=1024),u=!1)}return y=u,Lm(i,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,i!==null&&u?(s.child=ho(s,i.child,null,p),s.child=ho(s,null,r,p)):mi(i,s,r,p),s.memoizedState=y.state,i=s.child):i=xa(i,s,p),i}function HE(i,s,r,u){return ao(),s.flags|=256,mi(i,s,r,u),s.child}var cv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uv(i){return{baseLanes:i,cachePool:R1()}}function hv(i,s,r){return i=i!==null?i.childLanes&~r:0,s&&(i|=bn),i}function IE(i,s,r){var u=s.pendingProps,p=!1,y=(s.flags&128)!==0,w;if((w=y)||(w=i!==null&&i.memoizedState===null?!1:(Fe.current&2)!==0),w&&(p=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,i===null){if(It){if(p?Hr(s):Ir(),(i=ve)?(i=K_(i,Qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:Nr!==null?{id:Fs,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},r=A1(i),r.return=s,s.child=r,gi=s,ve=null)):i=null,i===null)throw Br(s);return Yv(i)?s.lanes=32:s.lanes=536870912,null}var D=u.children;return u=u.fallback,p?(Ir(),p=s.mode,D=Om({mode:"hidden",children:D},p),u=so(u,p,r,null),D.return=s,u.return=s,D.sibling=u,s.child=D,u=s.child,u.memoizedState=uv(r),u.childLanes=hv(i,w,r),s.memoizedState=cv,Vd(null,u)):(Hr(s),dv(s,D))}var k=i.memoizedState;if(k!==null&&(D=k.dehydrated,D!==null)){if(y)s.flags&256?(Hr(s),s.flags&=-257,s=fv(i,s,r)):s.memoizedState!==null?(Ir(),s.child=i.child,s.flags|=128,s=null):(Ir(),D=u.fallback,p=s.mode,u=Om({mode:"visible",children:u.children},p),D=so(D,p,r,null),D.flags|=2,u.return=s,D.return=s,u.sibling=D,s.child=u,ho(s,i.child,null,r),u=s.child,u.memoizedState=uv(r),u.childLanes=hv(i,w,r),s.memoizedState=cv,s=Vd(null,u));else if(Hr(s),Yv(D)){if(w=D.nextSibling&&D.nextSibling.dataset,w)var j=w.dgst;w=j,u=Error(n(419)),u.stack="",u.digest=w,Nd({value:u,source:null,stack:null}),s=fv(i,s,r)}else if(qe||lu(i,s,r,!1),w=(r&i.childLanes)!==0,qe||w){if(w=ue,w!==null&&(u=xw(w,r),u!==0&&u!==k.retryLane))throw k.retryLane=u,no(i,u),Zi(w,i,u),lv;Xv(D)||Im(),s=fv(i,s,r)}else Xv(D)?(s.flags|=192,s.child=i.child,s=null):(i=k.treeContext,ve=Zn(D.nextSibling),gi=s,It=!0,kr=null,Qn=!1,i!==null&&E1(s,i),s=dv(s,u.children),s.flags|=4096);return s}return p?(Ir(),D=u.fallback,p=s.mode,k=i.child,j=k.sibling,u=Sa(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,j!==null?D=Sa(j,D):(D=so(D,p,r,null),D.flags|=2),D.return=s,u.return=s,u.sibling=D,s.child=u,Vd(null,u),u=s.child,D=i.child.memoizedState,D===null?D=uv(r):(p=D.cachePool,p!==null?(k=je._currentValue,p=p.parent!==k?{parent:k,pool:k}:p):p=R1(),D={baseLanes:D.baseLanes|r,cachePool:p}),u.memoizedState=D,u.childLanes=hv(i,w,r),s.memoizedState=cv,Vd(i.child,u)):(Hr(s),r=i.child,i=r.sibling,r=Sa(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,i!==null&&(w=s.deletions,w===null?(s.deletions=[i],s.flags|=16):w.push(i)),s.child=r,s.memoizedState=null,r)}function dv(i,s){return s=Om({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Om(i,s){return i=gn(22,i,null,s),i.lanes=0,i}function fv(i,s,r){return ho(s,i.child,null,r),i=dv(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function jE(i,s,r){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),M0(i.return,s,r)}function gv(i,s,r,u,p,y){var w=i.memoizedState;w===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:y}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=r,w.tailMode=p,w.treeForkCount=y)}function GE(i,s,r){var u=s.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var w=Fe.current,D=(w&2)!==0;if(D?(w=w&1|2,s.flags|=128):w&=1,J(Fe,w),mi(i,s,u,r),u=It?Od:0,!D&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&jE(i,r,s);else if(i.tag===19)jE(i,r,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(p){case"forwards":for(r=s.child,p=null;r!==null;)i=r.alternate,i!==null&&Am(i)===null&&(p=r),r=r.sibling;r=p,r===null?(p=s.child,s.child=null):(p=r.sibling,r.sibling=null),gv(s,!1,p,r,y,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=s.child,s.child=null;p!==null;){if(i=p.alternate,i!==null&&Am(i)===null){s.child=p;break}i=p.sibling,p.sibling=r,r=p,p=i}gv(s,!0,r,null,y,u);break;case"together":gv(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function xa(i,s,r){if(i!==null&&(s.dependencies=i.dependencies),qr|=s.lanes,(r&s.childLanes)===0)if(i!==null){if(lu(i,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(n(153));if(s.child!==null){for(i=s.child,r=Sa(i,i.pendingProps),s.child=r,r.return=s;i.sibling!==null;)i=i.sibling,r=r.sibling=Sa(i,i.pendingProps),r.return=s;r.sibling=null}return s.child}function pv(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&dm(i)))}function uR(i,s,r){switch(s.tag){case 3:Qe(s,s.stateNode.containerInfo),zr(s,je,i.memoizedState.cache),ao();break;case 27:case 5:ys(s);break;case 4:Qe(s,s.stateNode.containerInfo);break;case 10:zr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,H0(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Hr(s),s.flags|=128,null):(r&s.child.childLanes)!==0?IE(i,s,r):(Hr(s),i=xa(i,s,r),i!==null?i.sibling:null);Hr(s);break;case 19:var p=(i.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(lu(i,s,r,!1),u=(r&s.childLanes)!==0),p){if(u)return GE(i,s,r);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),J(Fe,Fe.current),u)break;return null;case 22:return s.lanes=0,BE(i,s,r,s.pendingProps);case 24:zr(s,je,i.memoizedState.cache)}return xa(i,s,r)}function qE(i,s,r){if(i!==null)if(i.memoizedProps!==s.pendingProps)qe=!0;else{if(!pv(i,r)&&(s.flags&128)===0)return qe=!1,uR(i,s,r);qe=(i.flags&131072)!==0}else qe=!1,It&&(s.flags&1048576)!==0&&w1(s,Od,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(i=co(s.elementType),s.type=i,typeof i=="function")A0(i)?(u=go(i,u),s.tag=1,s=UE(null,s,i,u,r)):(s.tag=0,s=ov(null,s,i,u,r));else{if(i!=null){var p=i.$$typeof;if(p===O){s.tag=11,s=OE(null,s,i,u,r);break t}else if(p===F){s.tag=14,s=NE(null,s,i,u,r);break t}}throw s=gt(i)||i,Error(n(306,s,""))}}return s;case 0:return ov(i,s,s.type,s.pendingProps,r);case 1:return u=s.type,p=go(u,s.pendingProps),UE(i,s,u,p,r);case 3:t:{if(Qe(s,s.stateNode.containerInfo),i===null)throw Error(n(387));u=s.pendingProps;var y=s.memoizedState;p=y.element,B0(i,s),Hd(s,u,null,r);var w=s.memoizedState;if(u=w.cache,zr(s,je,u),u!==y.cache&&R0(s,[je],r,!0),Ud(),u=w.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=HE(i,s,u,r);break t}else if(u!==p){p=Yn(Error(n(424)),s),Nd(p),s=HE(i,s,u,r);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ve=Zn(i.firstChild),gi=s,It=!0,kr=null,Qn=!0,r=B1(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ao(),u===p){s=xa(i,s,r);break t}mi(i,s,u,r)}s=s.child}return s;case 26:return Lm(i,s),i===null?(r=eT(s.type,null,s.pendingProps,null))?s.memoizedState=r:It||(r=s.type,i=s.pendingProps,u=$m(Et.current).createElement(r),u[fi]=s,u[Xi]=i,yi(u,r,i),si(u),s.stateNode=u):s.memoizedState=eT(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ys(s),i===null&&It&&(u=s.stateNode=Z_(s.type,s.pendingProps,Et.current),gi=s,Qn=!0,p=ve,Kr(s.type)?($v=p,ve=Zn(u.firstChild)):ve=p),mi(i,s,s.pendingProps.children,r),Lm(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&It&&((p=u=ve)&&(u=HR(u,s.type,s.pendingProps,Qn),u!==null?(s.stateNode=u,gi=s,ve=Zn(u.firstChild),Qn=!1,p=!0):p=!1),p||Br(s)),ys(s),p=s.type,y=s.pendingProps,w=i!==null?i.memoizedProps:null,u=y.children,Gv(p,y)?u=null:w!==null&&Gv(p,w)&&(s.flags|=32),s.memoizedState!==null&&(p=j0(i,s,eR,null,null,r),lf._currentValue=p),Lm(i,s),mi(i,s,u,r),s.child;case 6:return i===null&&It&&((i=r=ve)&&(r=IR(r,s.pendingProps,Qn),r!==null?(s.stateNode=r,gi=s,ve=null,i=!0):i=!1),i||Br(s)),null;case 13:return IE(i,s,r);case 4:return Qe(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=ho(s,null,u,r):mi(i,s,u,r),s.child;case 11:return OE(i,s,s.type,s.pendingProps,r);case 7:return mi(i,s,s.pendingProps,r),s.child;case 8:return mi(i,s,s.pendingProps.children,r),s.child;case 12:return mi(i,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,zr(s,s.type,u.value),mi(i,s,u.children,r),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,lo(s),p=pi(p),u=u(p),s.flags|=1,mi(i,s,u,r),s.child;case 14:return NE(i,s,s.type,s.pendingProps,r);case 15:return kE(i,s,s.type,s.pendingProps,r);case 19:return GE(i,s,r);case 31:return cR(i,s,r);case 22:return BE(i,s,r,s.pendingProps);case 24:return lo(s),u=pi(je),i===null?(p=O0(),p===null&&(p=ue,y=D0(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=r),p=y),s.memoizedState={parent:u,cache:p},k0(s),zr(s,je,p)):((i.lanes&r)!==0&&(B0(i,s),Hd(s,null,null,r),Ud()),p=i.memoizedState,y=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),zr(s,je,u)):(u=y.cache,zr(s,je,u),u!==p.cache&&R0(s,[je],r,!0))),mi(i,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Ma(i){i.flags|=4}function mv(i,s,r,u,p){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(p&335544128)===p)if(i.stateNode.complete)i.flags|=8192;else if(y_())i.flags|=8192;else throw uo=mm,N0}else i.flags&=-16777217}function VE(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!rT(s))if(y_())i.flags|=8192;else throw uo=mm,N0}function Nm(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?_w():536870912,i.lanes|=s,vu|=s)}function Xd(i,s){if(!It)switch(i.tailMode){case"hidden":s=i.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?i.tail=null:r.sibling=null;break;case"collapsed":r=i.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function Ae(i){var s=i.alternate!==null&&i.alternate.child===i.child,r=0,u=0;if(s)for(var p=i.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=u,i.childLanes=r,s}function hR(i,s,r){var u=s.pendingProps;switch(_0(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(s),null;case 1:return Ae(s),null;case 3:return r=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),_a(je),be(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(i===null||i.child===null)&&(ru(s)?Ma(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,C0())),Ae(s),null;case 26:var p=s.type,y=s.memoizedState;return i===null?(Ma(s),y!==null?(Ae(s),VE(s,y)):(Ae(s),mv(s,p,null,u,r))):y?y!==i.memoizedState?(Ma(s),Ae(s),VE(s,y)):(Ae(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ma(s),Ae(s),mv(s,p,i,u,r)),null;case 27:if(Gn(s),r=Et.current,p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ma(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return Ae(s),null}i=lt.current,ru(s)?_1(s):(i=Z_(p,u,r),s.stateNode=i,Ma(s))}return Ae(s),null;case 5:if(Gn(s),p=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ma(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return Ae(s),null}if(y=lt.current,ru(s))_1(s);else{var w=$m(Et.current);switch(y){case 1:y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=w.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?w.createElement(p,{is:u.is}):w.createElement(p)}}y[fi]=s,y[Xi]=u;t:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)y.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break t;for(;w.sibling===null;){if(w.return===null||w.return===s)break t;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=y;t:switch(yi(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ma(s)}}return Ae(s),mv(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,r),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Ma(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(n(166));if(i=Et.current,ru(s)){if(i=s.stateNode,r=s.memoizedProps,u=null,p=gi,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}i[fi]=s,i=!!(i.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||I_(i.nodeValue,r)),i||Br(s,!0)}else i=$m(i).createTextNode(u),i[fi]=s,s.stateNode=i}return Ae(s),null;case 31:if(r=s.memoizedState,i===null||i.memoizedState!==null){if(u=ru(s),r!==null){if(i===null){if(!u)throw Error(n(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[fi]=s}else ao(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ae(s),i=!1}else r=C0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=r),i=!0;if(!i)return s.flags&256?(mn(s),s):(mn(s),null);if((s.flags&128)!==0)throw Error(n(558))}return Ae(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=ru(s),u!==null&&u.dehydrated!==null){if(i===null){if(!p)throw Error(n(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[fi]=s}else ao(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ae(s),p=!1}else p=C0(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(mn(s),s):(mn(s),null)}return mn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,i=i!==null&&i.memoizedState!==null,r&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),r!==i&&r&&(s.child.flags|=8192),Nm(s,s.updateQueue),Ae(s),null);case 4:return be(),i===null&&Fv(s.stateNode.containerInfo),Ae(s),null;case 10:return _a(s.type),Ae(s),null;case 19:if(q(Fe),u=s.memoizedState,u===null)return Ae(s),null;if(p=(s.flags&128)!==0,y=u.rendering,y===null)if(p)Xd(u,!1);else{if(Le!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(y=Am(i),y!==null){for(s.flags|=128,Xd(u,!1),i=y.updateQueue,s.updateQueue=i,Nm(s,i),s.subtreeFlags=0,i=r,r=s.child;r!==null;)v1(r,i),r=r.sibling;return J(Fe,Fe.current&1|2),It&&wa(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&un()>Fm&&(s.flags|=128,p=!0,Xd(u,!1),s.lanes=4194304)}else{if(!p)if(i=Am(y),i!==null){if(s.flags|=128,p=!0,i=i.updateQueue,s.updateQueue=i,Nm(s,i),Xd(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!It)return Ae(s),null}else 2*un()-u.renderingStartTime>Fm&&r!==536870912&&(s.flags|=128,p=!0,Xd(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(i=u.last,i!==null?i.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=un(),i.sibling=null,r=Fe.current,J(Fe,p?r&1|2:r&1),It&&wa(s,u.treeForkCount),i):(Ae(s),null);case 22:case 23:return mn(s),U0(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(Ae(s),s.subtreeFlags&6&&(s.flags|=8192)):Ae(s),r=s.updateQueue,r!==null&&Nm(s,r.retryQueue),r=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),i!==null&&q(oo),null;case 24:return r=null,i!==null&&(r=i.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),_a(je),Ae(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function dR(i,s){switch(_0(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return _a(je),be(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Gn(s),null;case 31:if(s.memoizedState!==null){if(mn(s),s.alternate===null)throw Error(n(340));ao()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(mn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(n(340));ao()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return q(Fe),null;case 4:return be(),null;case 10:return _a(s.type),null;case 22:case 23:return mn(s),U0(),i!==null&&q(oo),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return _a(je),null;case 25:return null;default:return null}}function XE(i,s){switch(_0(s),s.tag){case 3:_a(je),be();break;case 26:case 27:case 5:Gn(s);break;case 4:be();break;case 31:s.memoizedState!==null&&mn(s);break;case 13:mn(s);break;case 19:q(Fe);break;case 10:_a(s.type);break;case 22:case 23:mn(s),U0(),i!==null&&q(oo);break;case 24:_a(je)}}function Yd(i,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&i)===i){u=void 0;var y=r.create,w=r.inst;u=y(),w.destroy=u}r=r.next}while(r!==p)}}catch(D){Zt(s,s.return,D)}}function jr(i,s,r){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&i)===i){var w=u.inst,D=w.destroy;if(D!==void 0){w.destroy=void 0,p=s;var k=r,j=D;try{j()}catch($){Zt(p,k,$)}}}u=u.next}while(u!==y)}}catch($){Zt(s,s.return,$)}}function YE(i){var s=i.updateQueue;if(s!==null){var r=i.stateNode;try{P1(s,r)}catch(u){Zt(i,i.return,u)}}}function $E(i,s,r){r.props=go(i.type,i.memoizedProps),r.state=i.memoizedState;try{r.componentWillUnmount()}catch(u){Zt(i,s,u)}}function $d(i,s){try{var r=i.ref;if(r!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof r=="function"?i.refCleanup=r(u):r.current=u}}catch(p){Zt(i,s,p)}}function Hs(i,s){var r=i.ref,u=i.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){Zt(i,s,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Zt(i,s,p)}else r.current=null}function KE(i){var s=i.type,r=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break t;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){Zt(i,i.return,p)}}function yv(i,s,r){try{var u=i.stateNode;kR(u,i.type,r,s),u[Xi]=s}catch(p){Zt(i,i.return,p)}}function QE(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Kr(i.type)||i.tag===4}function bv(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||QE(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Kr(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function vv(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(i,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(i),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=va));else if(u!==4&&(u===27&&Kr(i.type)&&(r=i.stateNode,s=null),i=i.child,i!==null))for(vv(i,s,r),i=i.sibling;i!==null;)vv(i,s,r),i=i.sibling}function km(i,s,r){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?r.insertBefore(i,s):r.appendChild(i);else if(u!==4&&(u===27&&Kr(i.type)&&(r=i.stateNode),i=i.child,i!==null))for(km(i,s,r),i=i.sibling;i!==null;)km(i,s,r),i=i.sibling}function WE(i){var s=i.stateNode,r=i.memoizedProps;try{for(var u=i.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);yi(s,u,r),s[fi]=i,s[Xi]=r}catch(y){Zt(i,i.return,y)}}var Ra=!1,Ve=!1,Av=!1,ZE=typeof WeakSet=="function"?WeakSet:Set,ai=null;function fR(i,s){if(i=i.containerInfo,Iv=ey,i=u1(i),f0(i)){if("selectionStart"in i)var r={start:i.selectionStart,end:i.selectionEnd};else t:{r=(r=i.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break t}var w=0,D=-1,k=-1,j=0,$=0,Q=i,G=null;e:for(;;){for(var V;Q!==r||p!==0&&Q.nodeType!==3||(D=w+p),Q!==y||u!==0&&Q.nodeType!==3||(k=w+u),Q.nodeType===3&&(w+=Q.nodeValue.length),(V=Q.firstChild)!==null;)G=Q,Q=V;for(;;){if(Q===i)break e;if(G===r&&++j===p&&(D=w),G===y&&++$===u&&(k=w),(V=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=V}r=D===-1||k===-1?null:{start:D,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(jv={focusedElem:i,selectionRange:r},ey=!1,ai=s;ai!==null;)if(s=ai,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,ai=i;else for(;ai!==null;){switch(s=ai,y=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(r=0;r<i.length;r++)p=i[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&y!==null){i=void 0,r=s,p=y.memoizedProps,y=y.memoizedState,u=r.stateNode;try{var ht=go(r.type,p);i=u.getSnapshotBeforeUpdate(ht,y),u.__reactInternalSnapshotBeforeUpdate=i}catch(vt){Zt(r,r.return,vt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,r=i.nodeType,r===9)Vv(i);else if(r===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Vv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=s.sibling,i!==null){i.return=s.return,ai=i;break}ai=s.return}}function JE(i,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:La(i,r),u&4&&Yd(5,r);break;case 1:if(La(i,r),u&4)if(i=r.stateNode,s===null)try{i.componentDidMount()}catch(w){Zt(r,r.return,w)}else{var p=go(r.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(p,s,i.__reactInternalSnapshotBeforeUpdate)}catch(w){Zt(r,r.return,w)}}u&64&&YE(r),u&512&&$d(r,r.return);break;case 3:if(La(i,r),u&64&&(i=r.updateQueue,i!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{P1(i,s)}catch(w){Zt(r,r.return,w)}}break;case 27:s===null&&u&4&&WE(r);case 26:case 5:La(i,r),s===null&&u&4&&KE(r),u&512&&$d(r,r.return);break;case 12:La(i,r);break;case 31:La(i,r),u&4&&i_(i,r);break;case 13:La(i,r),u&4&&n_(i,r),u&64&&(i=r.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(r=wR.bind(null,r),jR(i,r))));break;case 22:if(u=r.memoizedState!==null||Ra,!u){s=s!==null&&s.memoizedState!==null||Ve,p=Ra;var y=Ve;Ra=u,(Ve=s)&&!y?Oa(i,r,(r.subtreeFlags&8772)!==0):La(i,r),Ra=p,Ve=y}break;case 30:break;default:La(i,r)}}function t_(i){var s=i.alternate;s!==null&&(i.alternate=null,t_(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Qb(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var we=null,$i=!1;function Da(i,s,r){for(r=r.child;r!==null;)e_(i,s,r),r=r.sibling}function e_(i,s,r){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(bd,r)}catch{}switch(r.tag){case 26:Ve||Hs(r,s),Da(i,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Ve||Hs(r,s);var u=we,p=$i;Kr(r.type)&&(we=r.stateNode,$i=!1),Da(i,s,r),sf(r.stateNode),we=u,$i=p;break;case 5:Ve||Hs(r,s);case 6:if(u=we,p=$i,we=null,Da(i,s,r),we=u,$i=p,we!==null)if($i)try{(we.nodeType===9?we.body:we.nodeName==="HTML"?we.ownerDocument.body:we).removeChild(r.stateNode)}catch(y){Zt(r,s,y)}else try{we.removeChild(r.stateNode)}catch(y){Zt(r,s,y)}break;case 18:we!==null&&($i?(i=we,Y_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.stateNode),xu(i)):Y_(we,r.stateNode));break;case 4:u=we,p=$i,we=r.stateNode.containerInfo,$i=!0,Da(i,s,r),we=u,$i=p;break;case 0:case 11:case 14:case 15:jr(2,r,s),Ve||jr(4,r,s),Da(i,s,r);break;case 1:Ve||(Hs(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&$E(r,s,u)),Da(i,s,r);break;case 21:Da(i,s,r);break;case 22:Ve=(u=Ve)||r.memoizedState!==null,Da(i,s,r),Ve=u;break;default:Da(i,s,r)}}function i_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{xu(i)}catch(r){Zt(s,s.return,r)}}}function n_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{xu(i)}catch(r){Zt(s,s.return,r)}}function gR(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new ZE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new ZE),s;default:throw Error(n(435,i.tag))}}function Bm(i,s){var r=gR(i);s.forEach(function(u){if(!r.has(u)){r.add(u);var p=ER.bind(null,i,u);u.then(p,p)}})}function Ki(i,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],y=i,w=s,D=w;t:for(;D!==null;){switch(D.tag){case 27:if(Kr(D.type)){we=D.stateNode,$i=!1;break t}break;case 5:we=D.stateNode,$i=!1;break t;case 3:case 4:we=D.stateNode.containerInfo,$i=!0;break t}D=D.return}if(we===null)throw Error(n(160));e_(y,w,p),we=null,$i=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)s_(s,i),s=s.sibling}var vs=null;function s_(i,s){var r=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ki(s,i),Qi(i),u&4&&(jr(3,i,i.return),Yd(3,i),jr(5,i,i.return));break;case 1:Ki(s,i),Qi(i),u&512&&(Ve||r===null||Hs(r,r.return)),u&64&&Ra&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(r=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=vs;if(Ki(s,i),Qi(i),u&512&&(Ve||r===null||Hs(r,r.return)),u&4){var y=r!==null?r.memoizedState:null;if(u=i.memoizedState,r===null)if(u===null)if(i.stateNode===null){t:{u=i.type,r=i.memoizedProps,p=p.ownerDocument||p;e:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Sd]||y[fi]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),yi(y,u,r),y[fi]=i,si(y),u=y;break t;case"link":var w=sT("link","href",p).get(u+(r.href||""));if(w){for(var D=0;D<w.length;D++)if(y=w[D],y.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&y.getAttribute("rel")===(r.rel==null?null:r.rel)&&y.getAttribute("title")===(r.title==null?null:r.title)&&y.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){w.splice(D,1);break e}}y=p.createElement(u),yi(y,u,r),p.head.appendChild(y);break;case"meta":if(w=sT("meta","content",p).get(u+(r.content||""))){for(D=0;D<w.length;D++)if(y=w[D],y.getAttribute("content")===(r.content==null?null:""+r.content)&&y.getAttribute("name")===(r.name==null?null:r.name)&&y.getAttribute("property")===(r.property==null?null:r.property)&&y.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&y.getAttribute("charset")===(r.charSet==null?null:r.charSet)){w.splice(D,1);break e}}y=p.createElement(u),yi(y,u,r),p.head.appendChild(y);break;default:throw Error(n(468,u))}y[fi]=i,si(y),u=y}i.stateNode=u}else aT(p,i.type,i.stateNode);else i.stateNode=nT(p,u,i.memoizedProps);else y!==u?(y===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):y.count--,u===null?aT(p,i.type,i.stateNode):nT(p,u,i.memoizedProps)):u===null&&i.stateNode!==null&&yv(i,i.memoizedProps,r.memoizedProps)}break;case 27:Ki(s,i),Qi(i),u&512&&(Ve||r===null||Hs(r,r.return)),r!==null&&u&4&&yv(i,i.memoizedProps,r.memoizedProps);break;case 5:if(Ki(s,i),Qi(i),u&512&&(Ve||r===null||Hs(r,r.return)),i.flags&32){p=i.stateNode;try{Qc(p,"")}catch(ht){Zt(i,i.return,ht)}}u&4&&i.stateNode!=null&&(p=i.memoizedProps,yv(i,p,r!==null?r.memoizedProps:p)),u&1024&&(Av=!0);break;case 6:if(Ki(s,i),Qi(i),u&4){if(i.stateNode===null)throw Error(n(162));u=i.memoizedProps,r=i.stateNode;try{r.nodeValue=u}catch(ht){Zt(i,i.return,ht)}}break;case 3:if(Wm=null,p=vs,vs=Km(s.containerInfo),Ki(s,i),vs=p,Qi(i),u&4&&r!==null&&r.memoizedState.isDehydrated)try{xu(s.containerInfo)}catch(ht){Zt(i,i.return,ht)}Av&&(Av=!1,a_(i));break;case 4:u=vs,vs=Km(i.stateNode.containerInfo),Ki(s,i),Qi(i),vs=u;break;case 12:Ki(s,i),Qi(i);break;case 31:Ki(s,i),Qi(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Bm(i,u)));break;case 13:Ki(s,i),Qi(i),i.child.flags&8192&&i.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Pm=un()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Bm(i,u)));break;case 22:p=i.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,j=Ra,$=Ve;if(Ra=j||p,Ve=$||k,Ki(s,i),Ve=$,Ra=j,Qi(i),u&8192)t:for(s=i.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(r===null||k||Ra||Ve||po(i)),r=null,s=i;;){if(s.tag===5||s.tag===26){if(r===null){k=r=s;try{if(y=k.stateNode,p)w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{D=k.stateNode;var Q=k.memoizedProps.style,G=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;D.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ht){Zt(k,k.return,ht)}}}else if(s.tag===6){if(r===null){k=s;try{k.stateNode.nodeValue=p?"":k.memoizedProps}catch(ht){Zt(k,k.return,ht)}}}else if(s.tag===18){if(r===null){k=s;try{var V=k.stateNode;p?$_(V,!0):$_(k.stateNode,!1)}catch(ht){Zt(k,k.return,ht)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Bm(i,r))));break;case 19:Ki(s,i),Qi(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Bm(i,u)));break;case 30:break;case 21:break;default:Ki(s,i),Qi(i)}}function Qi(i){var s=i.flags;if(s&2){try{for(var r,u=i.return;u!==null;){if(QE(u)){r=u;break}u=u.return}if(r==null)throw Error(n(160));switch(r.tag){case 27:var p=r.stateNode,y=bv(i);km(i,y,p);break;case 5:var w=r.stateNode;r.flags&32&&(Qc(w,""),r.flags&=-33);var D=bv(i);km(i,D,w);break;case 3:case 4:var k=r.stateNode.containerInfo,j=bv(i);vv(i,j,k);break;default:throw Error(n(161))}}catch($){Zt(i,i.return,$)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function a_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;a_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function La(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)JE(i,s.alternate,s),s=s.sibling}function po(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:jr(4,s,s.return),po(s);break;case 1:Hs(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&$E(s,s.return,r),po(s);break;case 27:sf(s.stateNode);case 26:case 5:Hs(s,s.return),po(s);break;case 22:s.memoizedState===null&&po(s);break;case 30:po(s);break;default:po(s)}i=i.sibling}}function Oa(i,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=i,y=s,w=y.flags;switch(y.tag){case 0:case 11:case 15:Oa(p,y,r),Yd(4,y);break;case 1:if(Oa(p,y,r),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(j){Zt(u,u.return,j)}if(u=y,p=u.updateQueue,p!==null){var D=u.stateNode;try{var k=p.shared.hiddenCallbacks;if(k!==null)for(p.shared.hiddenCallbacks=null,p=0;p<k.length;p++)z1(k[p],D)}catch(j){Zt(u,u.return,j)}}r&&w&64&&YE(y),$d(y,y.return);break;case 27:WE(y);case 26:case 5:Oa(p,y,r),r&&u===null&&w&4&&KE(y),$d(y,y.return);break;case 12:Oa(p,y,r);break;case 31:Oa(p,y,r),r&&w&4&&i_(p,y);break;case 13:Oa(p,y,r),r&&w&4&&n_(p,y);break;case 22:y.memoizedState===null&&Oa(p,y,r),$d(y,y.return);break;case 30:break;default:Oa(p,y,r)}s=s.sibling}}function Sv(i,s){var r=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==r&&(i!=null&&i.refCount++,r!=null&&kd(r))}function wv(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&kd(i))}function As(i,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)r_(i,s,r,u),s=s.sibling}function r_(i,s,r,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:As(i,s,r,u),p&2048&&Yd(9,s);break;case 1:As(i,s,r,u);break;case 3:As(i,s,r,u),p&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&kd(i)));break;case 12:if(p&2048){As(i,s,r,u),i=s.stateNode;try{var y=s.memoizedProps,w=y.id,D=y.onPostCommit;typeof D=="function"&&D(w,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){Zt(s,s.return,k)}}else As(i,s,r,u);break;case 31:As(i,s,r,u);break;case 13:As(i,s,r,u);break;case 23:break;case 22:y=s.stateNode,w=s.alternate,s.memoizedState!==null?y._visibility&2?As(i,s,r,u):Kd(i,s):y._visibility&2?As(i,s,r,u):(y._visibility|=2,mu(i,s,r,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Sv(w,s);break;case 24:As(i,s,r,u),p&2048&&wv(s.alternate,s);break;default:As(i,s,r,u)}}function mu(i,s,r,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=i,w=s,D=r,k=u,j=w.flags;switch(w.tag){case 0:case 11:case 15:mu(y,w,D,k,p),Yd(8,w);break;case 23:break;case 22:var $=w.stateNode;w.memoizedState!==null?$._visibility&2?mu(y,w,D,k,p):Kd(y,w):($._visibility|=2,mu(y,w,D,k,p)),p&&j&2048&&Sv(w.alternate,w);break;case 24:mu(y,w,D,k,p),p&&j&2048&&wv(w.alternate,w);break;default:mu(y,w,D,k,p)}s=s.sibling}}function Kd(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=i,u=s,p=u.flags;switch(u.tag){case 22:Kd(r,u),p&2048&&Sv(u.alternate,u);break;case 24:Kd(r,u),p&2048&&wv(u.alternate,u);break;default:Kd(r,u)}s=s.sibling}}var Qd=8192;function yu(i,s,r){if(i.subtreeFlags&Qd)for(i=i.child;i!==null;)l_(i,s,r),i=i.sibling}function l_(i,s,r){switch(i.tag){case 26:yu(i,s,r),i.flags&Qd&&i.memoizedState!==null&&tD(r,vs,i.memoizedState,i.memoizedProps);break;case 5:yu(i,s,r);break;case 3:case 4:var u=vs;vs=Km(i.stateNode.containerInfo),yu(i,s,r),vs=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Qd,Qd=16777216,yu(i,s,r),Qd=u):yu(i,s,r));break;default:yu(i,s,r)}}function o_(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Wd(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];ai=u,u_(u,i)}o_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)c_(i),i=i.sibling}function c_(i){switch(i.tag){case 0:case 11:case 15:Wd(i),i.flags&2048&&jr(9,i,i.return);break;case 3:Wd(i);break;case 12:Wd(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,zm(i)):Wd(i);break;default:Wd(i)}}function zm(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];ai=u,u_(u,i)}o_(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:jr(8,s,s.return),zm(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,zm(s));break;default:zm(s)}i=i.sibling}}function u_(i,s){for(;ai!==null;){var r=ai;switch(r.tag){case 0:case 11:case 15:jr(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:kd(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,ai=u;else t:for(r=i;ai!==null;){u=ai;var p=u.sibling,y=u.return;if(t_(u),u===r){ai=null;break t}if(p!==null){p.return=y,ai=p;break t}ai=y}}}var pR={getCacheForType:function(i){var s=pi(je),r=s.data.get(i);return r===void 0&&(r=i(),s.data.set(i,r)),r},cacheSignal:function(){return pi(je).controller.signal}},mR=typeof WeakMap=="function"?WeakMap:Map,$t=0,ue=null,zt=null,Ft=0,Wt=0,yn=null,Gr=!1,bu=!1,Ev=!1,Na=0,Le=0,qr=0,mo=0,_v=0,bn=0,vu=0,Zd=null,Wi=null,Tv=!1,Pm=0,h_=0,Fm=1/0,Um=null,Vr=null,We=0,Xr=null,Au=null,ka=0,Cv=0,xv=null,d_=null,Jd=0,Mv=null;function vn(){return($t&2)!==0&&Ft!==0?Ft&-Ft:H.T!==null?kv():Mw()}function f_(){if(bn===0)if((Ft&536870912)===0||It){var i=Yp;Yp<<=1,(Yp&3932160)===0&&(Yp=262144),bn=i}else bn=536870912;return i=pn.current,i!==null&&(i.flags|=32),bn}function Zi(i,s,r){(i===ue&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)&&(Su(i,0),Yr(i,Ft,bn,!1)),Ad(i,r),(($t&2)===0||i!==ue)&&(i===ue&&(($t&2)===0&&(mo|=r),Le===4&&Yr(i,Ft,bn,!1)),Is(i))}function g_(i,s,r){if(($t&6)!==0)throw Error(n(327));var u=!r&&(s&127)===0&&(s&i.expiredLanes)===0||vd(i,s),p=u?vR(i,s):Dv(i,s,!0),y=u;do{if(p===0){bu&&!u&&Yr(i,s,0,!1);break}else{if(r=i.current.alternate,y&&!yR(r)){p=Dv(i,s,!1),y=!1;continue}if(p===2){if(y=s,i.errorRecoveryDisabledLanes&y)var w=0;else w=i.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;t:{var D=i;p=Zd;var k=D.current.memoizedState.isDehydrated;if(k&&(Su(D,w).flags|=256),w=Dv(D,w,!1),w!==2){if(Ev&&!k){D.errorRecoveryDisabledLanes|=y,mo|=y,p=4;break t}y=Wi,Wi=p,y!==null&&(Wi===null?Wi=y:Wi.push.apply(Wi,y))}p=w}if(y=!1,p!==2)continue}}if(p===1){Su(i,0),Yr(i,s,0,!0);break}t:{switch(u=i,y=p,y){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:Yr(u,s,bn,!Gr);break t;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(p=Pm+300-un(),10<p)){if(Yr(u,s,bn,!Gr),Kp(u,0,!0)!==0)break t;ka=s,u.timeoutHandle=V_(p_.bind(null,u,r,Wi,Um,Tv,s,bn,mo,vu,Gr,y,"Throttled",-0,0),p);break t}p_(u,r,Wi,Um,Tv,s,bn,mo,vu,Gr,y,null,-0,0)}}break}while(!0);Is(i)}function p_(i,s,r,u,p,y,w,D,k,j,$,Q,G,V){if(i.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:va},l_(s,y,Q);var ht=(y&62914560)===y?Pm-un():(y&4194048)===y?h_-un():0;if(ht=eD(Q,ht),ht!==null){ka=y,i.cancelPendingCommit=ht(E_.bind(null,i,s,y,r,u,p,w,D,k,$,Q,null,G,V)),Yr(i,y,w,!j);return}}E_(i,s,y,r,u,p,w,D,k)}function yR(i){for(var s=i;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],y=p.getSnapshot;p=p.value;try{if(!fn(y(),p))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Yr(i,s,r,u){s&=~_v,s&=~mo,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var p=s;0<p;){var y=31-dn(p),w=1<<y;u[y]=-1,p&=~w}r!==0&&Tw(i,r,s)}function Hm(){return($t&6)===0?(tf(0),!1):!0}function Rv(){if(zt!==null){if(Wt===0)var i=zt.return;else i=zt,Ea=ro=null,V0(i),hu=null,zd=0,i=zt;for(;i!==null;)XE(i.alternate,i),i=i.return;zt=null}}function Su(i,s){var r=i.timeoutHandle;r!==-1&&(i.timeoutHandle=-1,PR(r)),r=i.cancelPendingCommit,r!==null&&(i.cancelPendingCommit=null,r()),ka=0,Rv(),ue=i,zt=r=Sa(i.current,null),Ft=s,Wt=0,yn=null,Gr=!1,bu=vd(i,s),Ev=!1,vu=bn=_v=mo=qr=Le=0,Wi=Zd=null,Tv=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var p=31-dn(u),y=1<<p;s|=i[p],u&=~y}return Na=s,lm(),r}function m_(i,s){Rt=null,H.H=qd,s===uu||s===pm?(s=O1(),Wt=3):s===N0?(s=O1(),Wt=4):Wt=s===lv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,yn=s,zt===null&&(Le=1,Rm(i,Yn(s,i.current)))}function y_(){var i=pn.current;return i===null?!0:(Ft&4194048)===Ft?Wn===null:(Ft&62914560)===Ft||(Ft&536870912)!==0?i===Wn:!1}function b_(){var i=H.H;return H.H=qd,i===null?qd:i}function v_(){var i=H.A;return H.A=pR,i}function Im(){Le=4,Gr||(Ft&4194048)!==Ft&&pn.current!==null||(bu=!0),(qr&134217727)===0&&(mo&134217727)===0||ue===null||Yr(ue,Ft,bn,!1)}function Dv(i,s,r){var u=$t;$t|=2;var p=b_(),y=v_();(ue!==i||Ft!==s)&&(Um=null,Su(i,s)),s=!1;var w=Le;t:do try{if(Wt!==0&&zt!==null){var D=zt,k=yn;switch(Wt){case 8:Rv(),w=6;break t;case 3:case 2:case 9:case 6:pn.current===null&&(s=!0);var j=Wt;if(Wt=0,yn=null,wu(i,D,k,j),r&&bu){w=0;break t}break;default:j=Wt,Wt=0,yn=null,wu(i,D,k,j)}}bR(),w=Le;break}catch($){m_(i,$)}while(!0);return s&&i.shellSuspendCounter++,Ea=ro=null,$t=u,H.H=p,H.A=y,zt===null&&(ue=null,Ft=0,lm()),w}function bR(){for(;zt!==null;)A_(zt)}function vR(i,s){var r=$t;$t|=2;var u=b_(),p=v_();ue!==i||Ft!==s?(Um=null,Fm=un()+500,Su(i,s)):bu=vd(i,s);t:do try{if(Wt!==0&&zt!==null){s=zt;var y=yn;e:switch(Wt){case 1:Wt=0,yn=null,wu(i,s,y,1);break;case 2:case 9:if(D1(y)){Wt=0,yn=null,S_(s);break}s=function(){Wt!==2&&Wt!==9||ue!==i||(Wt=7),Is(i)},y.then(s,s);break t;case 3:Wt=7;break t;case 4:Wt=5;break t;case 7:D1(y)?(Wt=0,yn=null,S_(s)):(Wt=0,yn=null,wu(i,s,y,7));break;case 5:var w=null;switch(zt.tag){case 26:w=zt.memoizedState;case 5:case 27:var D=zt;if(w?rT(w):D.stateNode.complete){Wt=0,yn=null;var k=D.sibling;if(k!==null)zt=k;else{var j=D.return;j!==null?(zt=j,jm(j)):zt=null}break e}}Wt=0,yn=null,wu(i,s,y,5);break;case 6:Wt=0,yn=null,wu(i,s,y,6);break;case 8:Rv(),Le=6;break t;default:throw Error(n(462))}}AR();break}catch($){m_(i,$)}while(!0);return Ea=ro=null,H.H=u,H.A=p,$t=r,zt!==null?0:(ue=null,Ft=0,lm(),Le)}function AR(){for(;zt!==null&&!G2();)A_(zt)}function A_(i){var s=qE(i.alternate,i,Na);i.memoizedProps=i.pendingProps,s===null?jm(i):zt=s}function S_(i){var s=i,r=s.alternate;switch(s.tag){case 15:case 0:s=FE(r,s,s.pendingProps,s.type,void 0,Ft);break;case 11:s=FE(r,s,s.pendingProps,s.type.render,s.ref,Ft);break;case 5:V0(s);default:XE(r,s),s=zt=v1(s,Na),s=qE(r,s,Na)}i.memoizedProps=i.pendingProps,s===null?jm(i):zt=s}function wu(i,s,r,u){Ea=ro=null,V0(s),hu=null,zd=0;var p=s.return;try{if(oR(i,p,s,r,Ft)){Le=1,Rm(i,Yn(r,i.current)),zt=null;return}}catch(y){if(p!==null)throw zt=p,y;Le=1,Rm(i,Yn(r,i.current)),zt=null;return}s.flags&32768?(It||u===1?i=!0:bu||(Ft&536870912)!==0?i=!1:(Gr=i=!0,(u===2||u===9||u===3||u===6)&&(u=pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),w_(s,i)):jm(s)}function jm(i){var s=i;do{if((s.flags&32768)!==0){w_(s,Gr);return}i=s.return;var r=hR(s.alternate,s,Na);if(r!==null){zt=r;return}if(s=s.sibling,s!==null){zt=s;return}zt=s=i}while(s!==null);Le===0&&(Le=5)}function w_(i,s){do{var r=dR(i.alternate,i);if(r!==null){r.flags&=32767,zt=r;return}if(r=i.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(i=i.sibling,i!==null)){zt=i;return}zt=i=r}while(i!==null);Le=6,zt=null}function E_(i,s,r,u,p,y,w,D,k){i.cancelPendingCommit=null;do Gm();while(We!==0);if(($t&6)!==0)throw Error(n(327));if(s!==null){if(s===i.current)throw Error(n(177));if(y=s.lanes|s.childLanes,y|=b0,J2(i,r,y,w,D,k),i===ue&&(zt=ue=null,Ft=0),Au=s,Xr=i,ka=r,Cv=y,xv=p,d_=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,_R(Vp,function(){return M_(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,p=X.p,X.p=2,w=$t,$t|=4;try{fR(i,s,r)}finally{$t=w,X.p=p,H.T=u}}We=1,__(),T_(),C_()}}function __(){if(We===1){We=0;var i=Xr,s=Au,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=H.T,H.T=null;var u=X.p;X.p=2;var p=$t;$t|=4;try{s_(s,i);var y=jv,w=u1(i.containerInfo),D=y.focusedElem,k=y.selectionRange;if(w!==D&&D&&D.ownerDocument&&c1(D.ownerDocument.documentElement,D)){if(k!==null&&f0(D)){var j=k.start,$=k.end;if($===void 0&&($=j),"selectionStart"in D)D.selectionStart=j,D.selectionEnd=Math.min($,D.value.length);else{var Q=D.ownerDocument||document,G=Q&&Q.defaultView||window;if(G.getSelection){var V=G.getSelection(),ht=D.textContent.length,vt=Math.min(k.start,ht),ne=k.end===void 0?vt:Math.min(k.end,ht);!V.extend&&vt>ne&&(w=ne,ne=vt,vt=w);var U=o1(D,vt),P=o1(D,ne);if(U&&P&&(V.rangeCount!==1||V.anchorNode!==U.node||V.anchorOffset!==U.offset||V.focusNode!==P.node||V.focusOffset!==P.offset)){var I=Q.createRange();I.setStart(U.node,U.offset),V.removeAllRanges(),vt>ne?(V.addRange(I),V.extend(P.node,P.offset)):(I.setEnd(P.node,P.offset),V.addRange(I))}}}}for(Q=[],V=D;V=V.parentNode;)V.nodeType===1&&Q.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<Q.length;D++){var K=Q[D];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}ey=!!Iv,jv=Iv=null}finally{$t=p,X.p=u,H.T=r}}i.current=s,We=2}}function T_(){if(We===2){We=0;var i=Xr,s=Au,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=H.T,H.T=null;var u=X.p;X.p=2;var p=$t;$t|=4;try{JE(i,s.alternate,s)}finally{$t=p,X.p=u,H.T=r}}We=3}}function C_(){if(We===4||We===3){We=0,q2();var i=Xr,s=Au,r=ka,u=d_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?We=5:(We=0,Au=Xr=null,x_(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(Vr=null),$b(r),s=s.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(bd,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=H.T,p=X.p,X.p=2,H.T=null;try{for(var y=i.onRecoverableError,w=0;w<u.length;w++){var D=u[w];y(D.value,{componentStack:D.stack})}}finally{H.T=s,X.p=p}}(ka&3)!==0&&Gm(),Is(i),p=i.pendingLanes,(r&261930)!==0&&(p&42)!==0?i===Mv?Jd++:(Jd=0,Mv=i):Jd=0,tf(0)}}function x_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,kd(s)))}function Gm(){return __(),T_(),C_(),M_()}function M_(){if(We!==5)return!1;var i=Xr,s=Cv;Cv=0;var r=$b(ka),u=H.T,p=X.p;try{X.p=32>r?32:r,H.T=null,r=xv,xv=null;var y=Xr,w=ka;if(We=0,Au=Xr=null,ka=0,($t&6)!==0)throw Error(n(331));var D=$t;if($t|=4,c_(y.current),r_(y,y.current,w,r),$t=D,tf(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(bd,y)}catch{}return!0}finally{X.p=p,H.T=u,x_(i,s)}}function R_(i,s,r){s=Yn(r,s),s=rv(i.stateNode,s,2),i=Ur(i,s,2),i!==null&&(Ad(i,2),Is(i))}function Zt(i,s,r){if(i.tag===3)R_(i,i,r);else for(;s!==null;){if(s.tag===3){R_(s,i,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Vr===null||!Vr.has(u))){i=Yn(r,i),r=DE(2),u=Ur(s,r,2),u!==null&&(LE(r,u,s,i),Ad(u,2),Is(u));break}}s=s.return}}function Lv(i,s,r){var u=i.pingCache;if(u===null){u=i.pingCache=new mR;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(r)||(Ev=!0,p.add(r),i=SR.bind(null,i,s,r),s.then(i,i))}function SR(i,s,r){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&r,i.warmLanes&=~r,ue===i&&(Ft&r)===r&&(Le===4||Le===3&&(Ft&62914560)===Ft&&300>un()-Pm?($t&2)===0&&Su(i,0):_v|=r,vu===Ft&&(vu=0)),Is(i)}function D_(i,s){s===0&&(s=_w()),i=no(i,s),i!==null&&(Ad(i,s),Is(i))}function wR(i){var s=i.memoizedState,r=0;s!==null&&(r=s.retryLane),D_(i,r)}function ER(i,s){var r=0;switch(i.tag){case 31:case 13:var u=i.stateNode,p=i.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(s),D_(i,r)}function _R(i,s){return qb(i,s)}var qm=null,Eu=null,Ov=!1,Vm=!1,Nv=!1,$r=0;function Is(i){i!==Eu&&i.next===null&&(Eu===null?qm=Eu=i:Eu=Eu.next=i),Vm=!0,Ov||(Ov=!0,CR())}function tf(i,s){if(!Nv&&Vm){Nv=!0;do for(var r=!1,u=qm;u!==null;){if(i!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var w=u.suspendedLanes,D=u.pingedLanes;y=(1<<31-dn(42|i)+1)-1,y&=p&~(w&~D),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(r=!0,k_(u,y))}else y=Ft,y=Kp(u,u===ue?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||vd(u,y)||(r=!0,k_(u,y));u=u.next}while(r);Nv=!1}}function TR(){L_()}function L_(){Vm=Ov=!1;var i=0;$r!==0&&zR()&&(i=$r);for(var s=un(),r=null,u=qm;u!==null;){var p=u.next,y=O_(u,s);y===0?(u.next=null,r===null?qm=p:r.next=p,p===null&&(Eu=r)):(r=u,(i!==0||(y&3)!==0)&&(Vm=!0)),u=p}We!==0&&We!==5||tf(i),$r!==0&&($r=0)}function O_(i,s){for(var r=i.suspendedLanes,u=i.pingedLanes,p=i.expirationTimes,y=i.pendingLanes&-62914561;0<y;){var w=31-dn(y),D=1<<w,k=p[w];k===-1?((D&r)===0||(D&u)!==0)&&(p[w]=Z2(D,s)):k<=s&&(i.expiredLanes|=D),y&=~D}if(s=ue,r=Ft,r=Kp(i,i===s?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,r===0||i===s&&(Wt===2||Wt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&Vb(u),i.callbackNode=null,i.callbackPriority=0;if((r&3)===0||vd(i,r)){if(s=r&-r,s===i.callbackPriority)return s;switch(u!==null&&Vb(u),$b(r)){case 2:case 8:r=ww;break;case 32:r=Vp;break;case 268435456:r=Ew;break;default:r=Vp}return u=N_.bind(null,i),r=qb(r,u),i.callbackPriority=s,i.callbackNode=r,s}return u!==null&&u!==null&&Vb(u),i.callbackPriority=2,i.callbackNode=null,2}function N_(i,s){if(We!==0&&We!==5)return i.callbackNode=null,i.callbackPriority=0,null;var r=i.callbackNode;if(Gm()&&i.callbackNode!==r)return null;var u=Ft;return u=Kp(i,i===ue?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(g_(i,u,s),O_(i,un()),i.callbackNode!=null&&i.callbackNode===r?N_.bind(null,i):null)}function k_(i,s){if(Gm())return null;g_(i,s,!0)}function CR(){FR(function(){($t&6)!==0?qb(Sw,TR):L_()})}function kv(){if($r===0){var i=ou;i===0&&(i=Xp,Xp<<=1,(Xp&261888)===0&&(Xp=256)),$r=i}return $r}function B_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Jp(""+i)}function z_(i,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,i.id&&r.setAttribute("form",i.id),s.parentNode.insertBefore(r,s),i=new FormData(i),r.parentNode.removeChild(r),i}function xR(i,s,r,u,p){if(s==="submit"&&r&&r.stateNode===p){var y=B_((p[Xi]||null).action),w=u.submitter;w&&(s=(s=w[Xi]||null)?B_(s.formAction):w.getAttribute("formAction"),s!==null&&(y=s,w=null));var D=new nm("action","action",null,u,p);i.push({event:D,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($r!==0){var k=w?z_(p,w):new FormData(p);tv(r,{pending:!0,data:k,method:p.method,action:y},null,k)}}else typeof y=="function"&&(D.preventDefault(),k=w?z_(p,w):new FormData(p),tv(r,{pending:!0,data:k,method:p.method,action:y},y,k))},currentTarget:p}]})}}for(var Bv=0;Bv<y0.length;Bv++){var zv=y0[Bv],MR=zv.toLowerCase(),RR=zv[0].toUpperCase()+zv.slice(1);bs(MR,"on"+RR)}bs(f1,"onAnimationEnd"),bs(g1,"onAnimationIteration"),bs(p1,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(VM,"onTransitionRun"),bs(XM,"onTransitionStart"),bs(YM,"onTransitionCancel"),bs(m1,"onTransitionEnd"),$c("onMouseEnter",["mouseout","mouseover"]),$c("onMouseLeave",["mouseout","mouseover"]),$c("onPointerEnter",["pointerout","pointerover"]),$c("onPointerLeave",["pointerout","pointerover"]),Jl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ef="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ef));function P_(i,s){s=(s&4)!==0;for(var r=0;r<i.length;r++){var u=i[r],p=u.event;u=u.listeners;t:{var y=void 0;if(s)for(var w=u.length-1;0<=w;w--){var D=u[w],k=D.instance,j=D.currentTarget;if(D=D.listener,k!==y&&p.isPropagationStopped())break t;y=D,p.currentTarget=j;try{y(p)}catch($){rm($)}p.currentTarget=null,y=k}else for(w=0;w<u.length;w++){if(D=u[w],k=D.instance,j=D.currentTarget,D=D.listener,k!==y&&p.isPropagationStopped())break t;y=D,p.currentTarget=j;try{y(p)}catch($){rm($)}p.currentTarget=null,y=k}}}}function Pt(i,s){var r=s[Kb];r===void 0&&(r=s[Kb]=new Set);var u=i+"__bubble";r.has(u)||(F_(s,i,2,!1),r.add(u))}function Pv(i,s,r){var u=0;s&&(u|=4),F_(r,i,u,s)}var Xm="_reactListening"+Math.random().toString(36).slice(2);function Fv(i){if(!i[Xm]){i[Xm]=!0,Lw.forEach(function(r){r!=="selectionchange"&&(DR.has(r)||Pv(r,!1,i),Pv(r,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[Xm]||(s[Xm]=!0,Pv("selectionchange",!1,s))}}function F_(i,s,r,u){switch(fT(s)){case 2:var p=sD;break;case 8:p=aD;break;default:p=Jv}r=p.bind(null,s,r,i),p=void 0,!s0||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?i.addEventListener(s,r,{capture:!0,passive:p}):i.addEventListener(s,r,!0):p!==void 0?i.addEventListener(s,r,{passive:p}):i.addEventListener(s,r,!1)}function Uv(i,s,r,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var D=u.stateNode.containerInfo;if(D===p)break;if(w===4)for(w=u.return;w!==null;){var k=w.tag;if((k===3||k===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;D!==null;){if(w=Vc(D),w===null)return;if(k=w.tag,k===5||k===6||k===26||k===27){u=y=w;continue t}D=D.parentNode}}u=u.return}Gw(function(){var j=y,$=i0(r),Q=[];t:{var G=y1.get(i);if(G!==void 0){var V=nm,ht=i;switch(i){case"keypress":if(em(r)===0)break t;case"keydown":case"keyup":V=EM;break;case"focusin":ht="focus",V=o0;break;case"focusout":ht="blur",V=o0;break;case"beforeblur":case"afterblur":V=o0;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Xw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=hM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=CM;break;case f1:case g1:case p1:V=gM;break;case m1:V=MM;break;case"scroll":case"scrollend":V=cM;break;case"wheel":V=DM;break;case"copy":case"cut":case"paste":V=mM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=$w;break;case"toggle":case"beforetoggle":V=OM}var vt=(s&4)!==0,ne=!vt&&(i==="scroll"||i==="scrollend"),U=vt?G!==null?G+"Capture":null:G;vt=[];for(var P=j,I;P!==null;){var K=P;if(I=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||I===null||U===null||(K=Ed(P,U),K!=null&&vt.push(nf(P,K,I))),ne)break;P=P.return}0<vt.length&&(G=new V(G,ht,null,r,$),Q.push({event:G,listeners:vt}))}}if((s&7)===0){t:{if(G=i==="mouseover"||i==="pointerover",V=i==="mouseout"||i==="pointerout",G&&r!==e0&&(ht=r.relatedTarget||r.fromElement)&&(Vc(ht)||ht[qc]))break t;if((V||G)&&(G=$.window===$?$:(G=$.ownerDocument)?G.defaultView||G.parentWindow:window,V?(ht=r.relatedTarget||r.toElement,V=j,ht=ht?Vc(ht):null,ht!==null&&(ne=o(ht),vt=ht.tag,ht!==ne||vt!==5&&vt!==27&&vt!==6)&&(ht=null)):(V=null,ht=j),V!==ht)){if(vt=Xw,K="onMouseLeave",U="onMouseEnter",P="mouse",(i==="pointerout"||i==="pointerover")&&(vt=$w,K="onPointerLeave",U="onPointerEnter",P="pointer"),ne=V==null?G:wd(V),I=ht==null?G:wd(ht),G=new vt(K,P+"leave",V,r,$),G.target=ne,G.relatedTarget=I,K=null,Vc($)===j&&(vt=new vt(U,P+"enter",ht,r,$),vt.target=I,vt.relatedTarget=ne,K=vt),ne=K,V&&ht)e:{for(vt=LR,U=V,P=ht,I=0,K=U;K;K=vt(K))I++;K=0;for(var pt=P;pt;pt=vt(pt))K++;for(;0<I-K;)U=vt(U),I--;for(;0<K-I;)P=vt(P),K--;for(;I--;){if(U===P||P!==null&&U===P.alternate){vt=U;break e}U=vt(U),P=vt(P)}vt=null}else vt=null;V!==null&&U_(Q,G,V,vt,!1),ht!==null&&ne!==null&&U_(Q,ne,ht,vt,!0)}}t:{if(G=j?wd(j):window,V=G.nodeName&&G.nodeName.toLowerCase(),V==="select"||V==="input"&&G.type==="file")var Xt=i1;else if(t1(G))if(n1)Xt=jM;else{Xt=HM;var dt=UM}else V=G.nodeName,!V||V.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?j&&t0(j.elementType)&&(Xt=i1):Xt=IM;if(Xt&&(Xt=Xt(i,j))){e1(Q,Xt,r,$);break t}dt&&dt(i,G,j),i==="focusout"&&j&&G.type==="number"&&j.memoizedProps.value!=null&&Jb(G,"number",G.value)}switch(dt=j?wd(j):window,i){case"focusin":(t1(dt)||dt.contentEditable==="true")&&(tu=dt,g0=j,Ld=null);break;case"focusout":Ld=g0=tu=null;break;case"mousedown":p0=!0;break;case"contextmenu":case"mouseup":case"dragend":p0=!1,h1(Q,r,$);break;case"selectionchange":if(qM)break;case"keydown":case"keyup":h1(Q,r,$)}var Lt;if(u0)t:{switch(i){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else Jc?Zw(i,r)&&(Ut="onCompositionEnd"):i==="keydown"&&r.keyCode===229&&(Ut="onCompositionStart");Ut&&(Kw&&r.locale!=="ko"&&(Jc||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Jc&&(Lt=qw()):(Or=$,a0="value"in Or?Or.value:Or.textContent,Jc=!0)),dt=Ym(j,Ut),0<dt.length&&(Ut=new Yw(Ut,i,null,r,$),Q.push({event:Ut,listeners:dt}),Lt?Ut.data=Lt:(Lt=Jw(r),Lt!==null&&(Ut.data=Lt)))),(Lt=kM?BM(i,r):zM(i,r))&&(Ut=Ym(j,"onBeforeInput"),0<Ut.length&&(dt=new Yw("onBeforeInput","beforeinput",null,r,$),Q.push({event:dt,listeners:Ut}),dt.data=Lt)),xR(Q,i,j,r,$)}P_(Q,s)})}function nf(i,s,r){return{instance:i,listener:s,currentTarget:r}}function Ym(i,s){for(var r=s+"Capture",u=[];i!==null;){var p=i,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Ed(i,r),p!=null&&u.unshift(nf(i,p,y)),p=Ed(i,s),p!=null&&u.push(nf(i,p,y))),i.tag===3)return u;i=i.return}return[]}function LR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function U_(i,s,r,u,p){for(var y=s._reactName,w=[];r!==null&&r!==u;){var D=r,k=D.alternate,j=D.stateNode;if(D=D.tag,k!==null&&k===u)break;D!==5&&D!==26&&D!==27||j===null||(k=j,p?(j=Ed(r,y),j!=null&&w.unshift(nf(r,j,k))):p||(j=Ed(r,y),j!=null&&w.push(nf(r,j,k)))),r=r.return}w.length!==0&&i.push({event:s,listeners:w})}var OR=/\r\n?/g,NR=/\u0000|\uFFFD/g;function H_(i){return(typeof i=="string"?i:""+i).replace(OR,`
`).replace(NR,"")}function I_(i,s){return s=H_(s),H_(i)===s}function ie(i,s,r,u,p,y){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Qc(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Qc(i,""+u);break;case"className":Wp(i,"class",u);break;case"tabIndex":Wp(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Wp(i,r,u);break;case"style":Iw(i,u,y);break;case"data":if(s!=="object"){Wp(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){i.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Jp(""+u),i.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(r==="formAction"?(s!=="input"&&ie(i,s,"name",p.name,p,null),ie(i,s,"formEncType",p.formEncType,p,null),ie(i,s,"formMethod",p.formMethod,p,null),ie(i,s,"formTarget",p.formTarget,p,null)):(ie(i,s,"encType",p.encType,p,null),ie(i,s,"method",p.method,p,null),ie(i,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(r);break}u=Jp(""+u),i.setAttribute(r,u);break;case"onClick":u!=null&&(i.onclick=va);break;case"onScroll":u!=null&&Pt("scroll",i);break;case"onScrollEnd":u!=null&&Pt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}r=Jp(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""+u):i.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,""):i.removeAttribute(r);break;case"capture":case"download":u===!0?i.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(r,u):i.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(r,u):i.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(r):i.setAttribute(r,u);break;case"popover":Pt("beforetoggle",i),Pt("toggle",i),Qp(i,"popover",u);break;case"xlinkActuate":ba(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ba(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ba(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ba(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ba(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ba(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ba(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ba(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ba(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qp(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=lM.get(r)||r,Qp(i,r,u))}}function Hv(i,s,r,u,p,y){switch(r){case"style":Iw(i,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(n(60));i.innerHTML=r}}break;case"children":typeof u=="string"?Qc(i,u):(typeof u=="number"||typeof u=="bigint")&&Qc(i,""+u);break;case"onScroll":u!=null&&Pt("scroll",i);break;case"onScrollEnd":u!=null&&Pt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=va);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ow.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),s=r.slice(2,p?r.length-7:void 0),y=i[Xi]||null,y=y!=null?y[r]:null,typeof y=="function"&&i.removeEventListener(s,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(r in i?i[r]=null:i.hasAttribute(r)&&i.removeAttribute(r)),i.addEventListener(s,u,p);break t}r in i?i[r]=u:u===!0?i.setAttribute(r,""):Qp(i,r,u)}}}function yi(i,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",i),Pt("load",i);var u=!1,p=!1,y;for(y in r)if(r.hasOwnProperty(y)){var w=r[y];if(w!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ie(i,s,y,w,r,null)}}p&&ie(i,s,"srcSet",r.srcSet,r,null),u&&ie(i,s,"src",r.src,r,null);return;case"input":Pt("invalid",i);var D=y=w=p=null,k=null,j=null;for(u in r)if(r.hasOwnProperty(u)){var $=r[u];if($!=null)switch(u){case"name":p=$;break;case"type":w=$;break;case"checked":k=$;break;case"defaultChecked":j=$;break;case"value":y=$;break;case"defaultValue":D=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,s));break;default:ie(i,s,u,$,r,null)}}Pw(i,y,D,k,j,w,p,!1);return;case"select":Pt("invalid",i),u=w=y=null;for(p in r)if(r.hasOwnProperty(p)&&(D=r[p],D!=null))switch(p){case"value":y=D;break;case"defaultValue":w=D;break;case"multiple":u=D;default:ie(i,s,p,D,r,null)}s=y,r=w,i.multiple=!!u,s!=null?Kc(i,!!u,s,!1):r!=null&&Kc(i,!!u,r,!0);return;case"textarea":Pt("invalid",i),y=p=u=null;for(w in r)if(r.hasOwnProperty(w)&&(D=r[w],D!=null))switch(w){case"value":u=D;break;case"defaultValue":p=D;break;case"children":y=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(n(91));break;default:ie(i,s,w,D,r,null)}Uw(i,u,p,y);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(u=r[k],u!=null))switch(k){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ie(i,s,k,u,r,null)}return;case"dialog":Pt("beforetoggle",i),Pt("toggle",i),Pt("cancel",i),Pt("close",i);break;case"iframe":case"object":Pt("load",i);break;case"video":case"audio":for(u=0;u<ef.length;u++)Pt(ef[u],i);break;case"image":Pt("error",i),Pt("load",i);break;case"details":Pt("toggle",i);break;case"embed":case"source":case"link":Pt("error",i),Pt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in r)if(r.hasOwnProperty(j)&&(u=r[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:ie(i,s,j,u,r,null)}return;default:if(t0(s)){for($ in r)r.hasOwnProperty($)&&(u=r[$],u!==void 0&&Hv(i,s,$,u,r,void 0));return}}for(D in r)r.hasOwnProperty(D)&&(u=r[D],u!=null&&ie(i,s,D,u,r,null))}function kR(i,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,w=null,D=null,k=null,j=null,$=null;for(V in r){var Q=r[V];if(r.hasOwnProperty(V)&&Q!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":k=Q;default:u.hasOwnProperty(V)||ie(i,s,V,null,u,Q)}}for(var G in u){var V=u[G];if(Q=r[G],u.hasOwnProperty(G)&&(V!=null||Q!=null))switch(G){case"type":y=V;break;case"name":p=V;break;case"checked":j=V;break;case"defaultChecked":$=V;break;case"value":w=V;break;case"defaultValue":D=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(n(137,s));break;default:V!==Q&&ie(i,s,G,V,u,Q)}}Zb(i,w,D,k,j,$,y,p);return;case"select":V=w=D=G=null;for(y in r)if(k=r[y],r.hasOwnProperty(y)&&k!=null)switch(y){case"value":break;case"multiple":V=k;default:u.hasOwnProperty(y)||ie(i,s,y,null,u,k)}for(p in u)if(y=u[p],k=r[p],u.hasOwnProperty(p)&&(y!=null||k!=null))switch(p){case"value":G=y;break;case"defaultValue":D=y;break;case"multiple":w=y;default:y!==k&&ie(i,s,p,y,u,k)}s=D,r=w,u=V,G!=null?Kc(i,!!r,G,!1):!!u!=!!r&&(s!=null?Kc(i,!!r,s,!0):Kc(i,!!r,r?[]:"",!1));return;case"textarea":V=G=null;for(D in r)if(p=r[D],r.hasOwnProperty(D)&&p!=null&&!u.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:ie(i,s,D,null,u,p)}for(w in u)if(p=u[w],y=r[w],u.hasOwnProperty(w)&&(p!=null||y!=null))switch(w){case"value":G=p;break;case"defaultValue":V=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(n(91));break;default:p!==y&&ie(i,s,w,p,u,y)}Fw(i,G,V);return;case"option":for(var ht in r)if(G=r[ht],r.hasOwnProperty(ht)&&G!=null&&!u.hasOwnProperty(ht))switch(ht){case"selected":i.selected=!1;break;default:ie(i,s,ht,null,u,G)}for(k in u)if(G=u[k],V=r[k],u.hasOwnProperty(k)&&G!==V&&(G!=null||V!=null))switch(k){case"selected":i.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:ie(i,s,k,G,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vt in r)G=r[vt],r.hasOwnProperty(vt)&&G!=null&&!u.hasOwnProperty(vt)&&ie(i,s,vt,null,u,G);for(j in u)if(G=u[j],V=r[j],u.hasOwnProperty(j)&&G!==V&&(G!=null||V!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(n(137,s));break;default:ie(i,s,j,G,u,V)}return;default:if(t0(s)){for(var ne in r)G=r[ne],r.hasOwnProperty(ne)&&G!==void 0&&!u.hasOwnProperty(ne)&&Hv(i,s,ne,void 0,u,G);for($ in u)G=u[$],V=r[$],!u.hasOwnProperty($)||G===V||G===void 0&&V===void 0||Hv(i,s,$,G,u,V);return}}for(var U in r)G=r[U],r.hasOwnProperty(U)&&G!=null&&!u.hasOwnProperty(U)&&ie(i,s,U,null,u,G);for(Q in u)G=u[Q],V=r[Q],!u.hasOwnProperty(Q)||G===V||G==null&&V==null||ie(i,s,Q,G,u,V)}function j_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],y=p.transferSize,w=p.initiatorType,D=p.duration;if(y&&D&&j_(w)){for(w=0,D=p.responseEnd,u+=1;u<r.length;u++){var k=r[u],j=k.startTime;if(j>D)break;var $=k.transferSize,Q=k.initiatorType;$&&j_(Q)&&(k=k.responseEnd,w+=$*(k<D?1:(D-j)/(k-j)))}if(--u,s+=8*(y+w)/(p.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Iv=null,jv=null;function $m(i){return i.nodeType===9?i:i.ownerDocument}function G_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function q_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Gv(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var qv=null;function zR(){var i=window.event;return i&&i.type==="popstate"?i===qv?!1:(qv=i,!0):(qv=null,!1)}var V_=typeof setTimeout=="function"?setTimeout:void 0,PR=typeof clearTimeout=="function"?clearTimeout:void 0,X_=typeof Promise=="function"?Promise:void 0,FR=typeof queueMicrotask=="function"?queueMicrotask:typeof X_<"u"?function(i){return X_.resolve(null).then(i).catch(UR)}:V_;function UR(i){setTimeout(function(){throw i})}function Kr(i){return i==="head"}function Y_(i,s){var r=s,u=0;do{var p=r.nextSibling;if(i.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){i.removeChild(p),xu(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")sf(i.ownerDocument.documentElement);else if(r==="head"){r=i.ownerDocument.head,sf(r);for(var y=r.firstChild;y;){var w=y.nextSibling,D=y.nodeName;y[Sd]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&y.rel.toLowerCase()==="stylesheet"||r.removeChild(y),y=w}}else r==="body"&&sf(i.ownerDocument.body);r=p}while(r);xu(s)}function $_(i,s){var r=i;i=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(i===0)break;i--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||i++;r=u}while(r)}function Vv(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Vv(r),Qb(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}i.removeChild(r)}}function HR(i,s,r,u){for(;i.nodeType===1;){var p=r;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[Sd])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(y=i.getAttribute("rel"),y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(y!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(y=i.getAttribute("src"),(y!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===y)return i}else return i;if(i=Zn(i.nextSibling),i===null)break}return null}function IR(i,s,r){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=Zn(i.nextSibling),i===null))return null;return i}function K_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=Zn(i.nextSibling),i===null))return null;return i}function Xv(i){return i.data==="$?"||i.data==="$~"}function Yv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function jR(i,s){var r=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function Zn(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var $v=null;function Q_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="/$"||r==="/&"){if(s===0)return Zn(i.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}i=i.nextSibling}return null}function W_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var r=i.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return i;s--}else r!=="/$"&&r!=="/&"||s++}i=i.previousSibling}return null}function Z_(i,s,r){switch(s=$m(r),i){case"html":if(i=s.documentElement,!i)throw Error(n(452));return i;case"head":if(i=s.head,!i)throw Error(n(453));return i;case"body":if(i=s.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function sf(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Qb(i)}var Jn=new Map,J_=new Set;function Km(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ba=X.d;X.d={f:GR,r:qR,D:VR,C:XR,L:YR,m:$R,X:QR,S:KR,M:WR};function GR(){var i=Ba.f(),s=Hm();return i||s}function qR(i){var s=Xc(i);s!==null&&s.tag===5&&s.type==="form"?mE(s):Ba.r(i)}var _u=typeof document>"u"?null:document;function tT(i,s,r){var u=_u;if(u&&typeof s=="string"&&s){var p=Vn(s);p='link[rel="'+i+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),J_.has(p)||(J_.add(p),i={rel:i,crossOrigin:r,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),yi(s,"link",i),si(s),u.head.appendChild(s)))}}function VR(i){Ba.D(i),tT("dns-prefetch",i,null)}function XR(i,s){Ba.C(i,s),tT("preconnect",i,s)}function YR(i,s,r){Ba.L(i,s,r);var u=_u;if(u&&i&&s){var p='link[rel="preload"][as="'+Vn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+Vn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+Vn(r.imageSizes)+'"]')):p+='[href="'+Vn(i)+'"]';var y=p;switch(s){case"style":y=Tu(i);break;case"script":y=Cu(i)}Jn.has(y)||(i=b({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:i,as:s},r),Jn.set(y,i),u.querySelector(p)!==null||s==="style"&&u.querySelector(af(y))||s==="script"&&u.querySelector(rf(y))||(s=u.createElement("link"),yi(s,"link",i),si(s),u.head.appendChild(s)))}}function $R(i,s){Ba.m(i,s);var r=_u;if(r&&i){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+Vn(u)+'"][href="'+Vn(i)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Cu(i)}if(!Jn.has(y)&&(i=b({rel:"modulepreload",href:i},s),Jn.set(y,i),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(rf(y)))return}u=r.createElement("link"),yi(u,"link",i),si(u),r.head.appendChild(u)}}}function KR(i,s,r){Ba.S(i,s,r);var u=_u;if(u&&i){var p=Yc(u).hoistableStyles,y=Tu(i);s=s||"default";var w=p.get(y);if(!w){var D={loading:0,preload:null};if(w=u.querySelector(af(y)))D.loading=5;else{i=b({rel:"stylesheet",href:i,"data-precedence":s},r),(r=Jn.get(y))&&Kv(i,r);var k=w=u.createElement("link");si(k),yi(k,"link",i),k._p=new Promise(function(j,$){k.onload=j,k.onerror=$}),k.addEventListener("load",function(){D.loading|=1}),k.addEventListener("error",function(){D.loading|=2}),D.loading|=4,Qm(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:D},p.set(y,w)}}}function QR(i,s){Ba.X(i,s);var r=_u;if(r&&i){var u=Yc(r).hoistableScripts,p=Cu(i),y=u.get(p);y||(y=r.querySelector(rf(p)),y||(i=b({src:i,async:!0},s),(s=Jn.get(p))&&Qv(i,s),y=r.createElement("script"),si(y),yi(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function WR(i,s){Ba.M(i,s);var r=_u;if(r&&i){var u=Yc(r).hoistableScripts,p=Cu(i),y=u.get(p);y||(y=r.querySelector(rf(p)),y||(i=b({src:i,async:!0,type:"module"},s),(s=Jn.get(p))&&Qv(i,s),y=r.createElement("script"),si(y),yi(y,"link",i),r.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function eT(i,s,r,u){var p=(p=Et.current)?Km(p):null;if(!p)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Tu(r.href),r=Yc(p).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){i=Tu(r.href);var y=Yc(p).hoistableStyles,w=y.get(i);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(i,w),(y=p.querySelector(af(i)))&&!y._p&&(w.instance=y,w.state.loading=5),Jn.has(i)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Jn.set(i,r),y||ZR(p,i,r,w.state))),s&&u===null)throw Error(n(528,""));return w}if(s&&u!==null)throw Error(n(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Cu(r),r=Yc(p).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Tu(i){return'href="'+Vn(i)+'"'}function af(i){return'link[rel="stylesheet"]['+i+"]"}function iT(i){return b({},i,{"data-precedence":i.precedence,precedence:null})}function ZR(i,s,r,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),yi(s,"link",r),si(s),i.head.appendChild(s))}function Cu(i){return'[src="'+Vn(i)+'"]'}function rf(i){return"script[async]"+i}function nT(i,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+Vn(r.href)+'"]');if(u)return s.instance=u,si(u),u;var p=b({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),si(u),yi(u,"style",p),Qm(u,r.precedence,i),s.instance=u;case"stylesheet":p=Tu(r.href);var y=i.querySelector(af(p));if(y)return s.state.loading|=4,s.instance=y,si(y),y;u=iT(r),(p=Jn.get(p))&&Kv(u,p),y=(i.ownerDocument||i).createElement("link"),si(y);var w=y;return w._p=new Promise(function(D,k){w.onload=D,w.onerror=k}),yi(y,"link",u),s.state.loading|=4,Qm(y,r.precedence,i),s.instance=y;case"script":return y=Cu(r.src),(p=i.querySelector(rf(y)))?(s.instance=p,si(p),p):(u=r,(p=Jn.get(y))&&(u=b({},r),Qv(u,p)),i=i.ownerDocument||i,p=i.createElement("script"),si(p),yi(p,"link",u),i.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Qm(u,r.precedence,i));return s.instance}function Qm(i,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,w=0;w<u.length;w++){var D=u[w];if(D.dataset.precedence===s)y=D;else if(y!==p)break}y?y.parentNode.insertBefore(i,y.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(i,s.firstChild))}function Kv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Qv(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Wm=null;function sT(i,s,r){if(Wm===null){var u=new Map,p=Wm=new Map;p.set(r,u)}else p=Wm,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(i))return u;for(u.set(i,null),r=r.getElementsByTagName(i),p=0;p<r.length;p++){var y=r[p];if(!(y[Sd]||y[fi]||i==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var w=y.getAttribute(s)||"";w=i+w;var D=u.get(w);D?D.push(y):u.set(w,[y])}}return u}function aT(i,s,r){i=i.ownerDocument||i,i.head.insertBefore(r,s==="title"?i.querySelector("head > title"):null)}function JR(i,s,r){if(r===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function rT(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function tD(i,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Tu(u.href),y=s.querySelector(af(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Zm.bind(i),s.then(i,i)),r.state.loading|=4,r.instance=y,si(y);return}y=s.ownerDocument||s,u=iT(u),(p=Jn.get(p))&&Kv(u,p),y=y.createElement("link"),si(y);var w=y;w._p=new Promise(function(D,k){w.onload=D,w.onerror=k}),yi(y,"link",u),r.instance=y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(i.count++,r=Zm.bind(i),s.addEventListener("load",r),s.addEventListener("error",r))}}var Wv=0;function eD(i,s){return i.stylesheets&&i.count===0&&ty(i,i.stylesheets),0<i.count||0<i.imgCount?function(r){var u=setTimeout(function(){if(i.stylesheets&&ty(i,i.stylesheets),i.unsuspend){var y=i.unsuspend;i.unsuspend=null,y()}},6e4+s);0<i.imgBytes&&Wv===0&&(Wv=62500*BR());var p=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ty(i,i.stylesheets),i.unsuspend)){var y=i.unsuspend;i.unsuspend=null,y()}},(i.imgBytes>Wv?50:800)+s);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Zm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ty(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Jm=null;function ty(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Jm=new Map,s.forEach(iD,i),Jm=null,Zm.call(i))}function iD(i,s){if(!(s.state.loading&4)){var r=Jm.get(i);if(r)var u=r.get(null);else{r=new Map,Jm.set(i,r);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var w=p[y];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(r.set(w.dataset.precedence,w),u=w)}u&&r.set(null,u)}p=s.instance,w=p.getAttribute("data-precedence"),y=r.get(w)||u,y===u&&r.set(null,p),r.set(w,p),this.count++,u=Zm.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),s.state.loading|=4}}var lf={$$typeof:R,Provider:null,Consumer:null,_currentValue:at,_currentValue2:at,_threadCount:0};function nD(i,s,r,u,p,y,w,D,k){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xb(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xb(0),this.hiddenUpdates=Xb(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function lT(i,s,r,u,p,y,w,D,k,j,$,Q){return i=new nD(i,s,r,w,k,j,$,Q,D),s=1,y===!0&&(s|=24),y=gn(3,null,null,s),i.current=y,y.stateNode=i,s=D0(),s.refCount++,i.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:r,cache:s},k0(y),i}function oT(i){return i?(i=nu,i):nu}function cT(i,s,r,u,p,y){p=oT(p),u.context===null?u.context=p:u.pendingContext=p,u=Fr(s),u.payload={element:r},y=y===void 0?null:y,y!==null&&(u.callback=y),r=Ur(i,u,s),r!==null&&(Zi(r,i,s),Fd(r,i,s))}function uT(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var r=i.retryLane;i.retryLane=r!==0&&r<s?r:s}}function Zv(i,s){uT(i,s),(i=i.alternate)&&uT(i,s)}function hT(i){if(i.tag===13||i.tag===31){var s=no(i,67108864);s!==null&&Zi(s,i,67108864),Zv(i,67108864)}}function dT(i){if(i.tag===13||i.tag===31){var s=vn();s=Yb(s);var r=no(i,s);r!==null&&Zi(r,i,s),Zv(i,s)}}var ey=!0;function sD(i,s,r,u){var p=H.T;H.T=null;var y=X.p;try{X.p=2,Jv(i,s,r,u)}finally{X.p=y,H.T=p}}function aD(i,s,r,u){var p=H.T;H.T=null;var y=X.p;try{X.p=8,Jv(i,s,r,u)}finally{X.p=y,H.T=p}}function Jv(i,s,r,u){if(ey){var p=tA(u);if(p===null)Uv(i,s,u,iy,r),gT(i,u);else if(lD(p,i,s,r,u))u.stopPropagation();else if(gT(i,u),s&4&&-1<rD.indexOf(i)){for(;p!==null;){var y=Xc(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var w=Zl(y.pendingLanes);if(w!==0){var D=y;for(D.pendingLanes|=2,D.entangledLanes|=2;w;){var k=1<<31-dn(w);D.entanglements[1]|=k,w&=~k}Is(y),($t&6)===0&&(Fm=un()+500,tf(0))}}break;case 31:case 13:D=no(y,2),D!==null&&Zi(D,y,2),Hm(),Zv(y,2)}if(y=tA(u),y===null&&Uv(i,s,u,iy,r),y===p)break;p=y}p!==null&&u.stopPropagation()}else Uv(i,s,u,null,r)}}function tA(i){return i=i0(i),eA(i)}var iy=null;function eA(i){if(iy=null,i=Vc(i),i!==null){var s=o(i);if(s===null)i=null;else{var r=s.tag;if(r===13){if(i=c(s),i!==null)return i;i=null}else if(r===31){if(i=h(s),i!==null)return i;i=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return iy=i,null}function fT(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(V2()){case Sw:return 2;case ww:return 8;case Vp:case X2:return 32;case Ew:return 268435456;default:return 32}default:return 32}}var iA=!1,Qr=null,Wr=null,Zr=null,of=new Map,cf=new Map,Jr=[],rD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gT(i,s){switch(i){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":of.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":cf.delete(s.pointerId)}}function uf(i,s,r,u,p,y){return i===null||i.nativeEvent!==y?(i={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Xc(s),s!==null&&hT(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),i)}function lD(i,s,r,u,p){switch(s){case"focusin":return Qr=uf(Qr,i,s,r,u,p),!0;case"dragenter":return Wr=uf(Wr,i,s,r,u,p),!0;case"mouseover":return Zr=uf(Zr,i,s,r,u,p),!0;case"pointerover":var y=p.pointerId;return of.set(y,uf(of.get(y)||null,i,s,r,u,p)),!0;case"gotpointercapture":return y=p.pointerId,cf.set(y,uf(cf.get(y)||null,i,s,r,u,p)),!0}return!1}function pT(i){var s=Vc(i.target);if(s!==null){var r=o(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){i.blockedOn=s,Rw(i.priority,function(){dT(r)});return}}else if(s===31){if(s=h(r),s!==null){i.blockedOn=s,Rw(i.priority,function(){dT(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){i.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}i.blockedOn=null}function ny(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var r=tA(i.nativeEvent);if(r===null){r=i.nativeEvent;var u=new r.constructor(r.type,r);e0=u,r.target.dispatchEvent(u),e0=null}else return s=Xc(r),s!==null&&hT(s),i.blockedOn=r,!1;s.shift()}return!0}function mT(i,s,r){ny(i)&&r.delete(s)}function oD(){iA=!1,Qr!==null&&ny(Qr)&&(Qr=null),Wr!==null&&ny(Wr)&&(Wr=null),Zr!==null&&ny(Zr)&&(Zr=null),of.forEach(mT),cf.forEach(mT)}function sy(i,s){i.blockedOn===s&&(i.blockedOn=null,iA||(iA=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,oD)))}var ay=null;function yT(i){ay!==i&&(ay=i,g.unstable_scheduleCallback(g.unstable_NormalPriority,function(){ay===i&&(ay=null);for(var s=0;s<i.length;s+=3){var r=i[s],u=i[s+1],p=i[s+2];if(typeof u!="function"){if(eA(u||r)===null)continue;break}var y=Xc(r);y!==null&&(i.splice(s,3),s-=3,tv(y,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function xu(i){function s(k){return sy(k,i)}Qr!==null&&sy(Qr,i),Wr!==null&&sy(Wr,i),Zr!==null&&sy(Zr,i),of.forEach(s),cf.forEach(s);for(var r=0;r<Jr.length;r++){var u=Jr[r];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Jr.length&&(r=Jr[0],r.blockedOn===null);)pT(r),r.blockedOn===null&&Jr.shift();if(r=(i.ownerDocument||i).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],y=r[u+1],w=p[Xi]||null;if(typeof y=="function")w||yT(r);else if(w){var D=null;if(y&&y.hasAttribute("formAction")){if(p=y,w=y[Xi]||null)D=w.formAction;else if(eA(p)!==null)continue}else D=w.action;typeof D=="function"?r[u+1]=D:(r.splice(u,3),u-=3),yT(r)}}}function bT(){function i(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function nA(i){this._internalRoot=i}ry.prototype.render=nA.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(n(409));var r=s.current,u=vn();cT(r,u,i,s,null,null)},ry.prototype.unmount=nA.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;cT(i.current,2,null,i,null,null),Hm(),s[qc]=null}};function ry(i){this._internalRoot=i}ry.prototype.unstable_scheduleHydration=function(i){if(i){var s=Mw();i={blockedOn:null,target:i,priority:s};for(var r=0;r<Jr.length&&s!==0&&s<Jr[r].priority;r++);Jr.splice(r,0,i),r===0&&pT(i)}};var vT=t.version;if(vT!=="19.2.0")throw Error(n(527,vT,"19.2.0"));X.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(s),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var cD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ly.isDisabled&&ly.supportsFiber)try{bd=ly.inject(cD),hn=ly}catch{}}return df.createRoot=function(i,s){if(!a(i))throw Error(n(299));var r=!1,u="",p=CE,y=xE,w=ME;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=lT(i,1,!1,null,null,r,u,null,p,y,w,bT),i[qc]=s.current,Fv(i),new nA(s)},df.hydrateRoot=function(i,s,r){if(!a(i))throw Error(n(299));var u=!1,p="",y=CE,w=xE,D=ME,k=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(D=r.onRecoverableError),r.formState!==void 0&&(k=r.formState)),s=lT(i,1,!0,s,r??null,u,p,k,y,w,D,bT),s.context=oT(null),r=s.current,u=vn(),u=Yb(u),p=Fr(u),p.callback=null,Ur(r,p,u),r=u,s.current.lanes=r,Ad(s,r),Is(s),i[qc]=s.current,Fv(i),new ry(s)},df.version="19.2.0",df}var DT;function SD(){if(DT)return lA.exports;DT=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),lA.exports=AD(),lA.exports}var wD=SD();const ED=uC(wD);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var LT="popstate";function _D(g={}){function t(n,a){let{pathname:o,search:c,hash:h}=n.location;return wA("",{pathname:o,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(n,a){return typeof a=="string"?a:Hf(a)}return CD(t,e,null,g)}function Me(g,t){if(g===!1||g===null||typeof g>"u")throw new Error(t)}function zs(g,t){if(!g){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TD(){return Math.random().toString(36).substring(2,10)}function OT(g,t){return{usr:g.state,key:g.key,idx:t}}function wA(g,t,e=null,n){return{pathname:typeof g=="string"?g:g.pathname,search:"",hash:"",...typeof t=="string"?pd(t):t,state:e,key:t&&t.key||n||TD()}}function Hf({pathname:g="/",search:t="",hash:e=""}){return t&&t!=="?"&&(g+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(g+=e.charAt(0)==="#"?e:"#"+e),g}function pd(g){let t={};if(g){let e=g.indexOf("#");e>=0&&(t.hash=g.substring(e),g=g.substring(0,e));let n=g.indexOf("?");n>=0&&(t.search=g.substring(n),g=g.substring(0,n)),g&&(t.pathname=g)}return t}function CD(g,t,e,n={}){let{window:a=document.defaultView,v5Compat:o=!1}=n,c=a.history,h="POP",d=null,f=m();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function m(){return(c.state||{idx:null}).idx}function b(){h="POP";let M=m(),x=M==null?null:M-f;f=M,d&&d({action:h,location:T.location,delta:x})}function v(M,x){h="PUSH";let L=wA(T.location,M,x);f=m()+1;let R=OT(L,f),O=T.createHref(L);try{c.pushState(R,"",O)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(O)}o&&d&&d({action:h,location:T.location,delta:1})}function S(M,x){h="REPLACE";let L=wA(T.location,M,x);f=m();let R=OT(L,f),O=T.createHref(L);c.replaceState(R,"",O),o&&d&&d({action:h,location:T.location,delta:0})}function C(M){return xD(M)}let T={get action(){return h},get location(){return g(a,c)},listen(M){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(LT,b),d=M,()=>{a.removeEventListener(LT,b),d=null}},createHref(M){return t(a,M)},createURL:C,encodeLocation(M){let x=C(M);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:v,replace:S,go(M){return c.go(M)}};return T}function xD(g,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),Me(e,"No window.location.(origin|href) available to create URL");let n=typeof g=="string"?g:Hf(g);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=e+n),new URL(n,e)}function dC(g,t,e="/"){return MD(g,t,e,!1)}function MD(g,t,e,n){let a=typeof t=="string"?pd(t):t,o=Cr(a.pathname||"/",e);if(o==null)return null;let c=fC(g);RD(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let f=HD(o);h=FD(c[d],f,n)}return h}function fC(g,t=[],e=[],n="",a=!1){let o=(c,h,d=a,f)=>{let m={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&d)return;Me(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let b=wr([n,m.relativePath]),v=e.concat(m);c.children&&c.children.length>0&&(Me(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),fC(c.children,t,v,b,d)),!(c.path==null&&!c.index)&&t.push({path:b,score:zD(b,c.index),routesMeta:v})};return g.forEach((c,h)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))o(c,h);else for(let f of gC(c.path))o(c,h,!0,f)}),t}function gC(g){let t=g.split("/");if(t.length===0)return[];let[e,...n]=t,a=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return a?[o,""]:[o];let c=gC(n.join("/")),h=[];return h.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&h.push(...c),h.map(d=>g.startsWith("/")&&d===""?"/":d)}function RD(g){g.sort((t,e)=>t.score!==e.score?e.score-t.score:PD(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}var DD=/^:[\w-]+$/,LD=3,OD=2,ND=1,kD=10,BD=-2,NT=g=>g==="*";function zD(g,t){let e=g.split("/"),n=e.length;return e.some(NT)&&(n+=BD),t&&(n+=OD),e.filter(a=>!NT(a)).reduce((a,o)=>a+(DD.test(o)?LD:o===""?ND:kD),n)}function PD(g,t){return g.length===t.length&&g.slice(0,-1).every((n,a)=>n===t[a])?g[g.length-1]-t[t.length-1]:0}function FD(g,t,e=!1){let{routesMeta:n}=g,a={},o="/",c=[];for(let h=0;h<n.length;++h){let d=n[h],f=h===n.length-1,m=o==="/"?t:t.slice(o.length)||"/",b=tb({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),v=d.route;if(!b&&f&&e&&!n[n.length-1].route.index&&(b=tb({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:wr([o,b.pathname]),pathnameBase:VD(wr([o,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(o=wr([o,b.pathnameBase]))}return c}function tb(g,t){typeof g=="string"&&(g={path:g,caseSensitive:!1,end:!0});let[e,n]=UD(g.path,g.caseSensitive,g.end),a=t.match(e);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:n.reduce((f,{paramName:m,isOptional:b},v)=>{if(m==="*"){let C=h[v]||"";c=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const S=h[v];return b&&!S?f[m]=void 0:f[m]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:g}}function UD(g,t=!1,e=!0){zs(g==="*"||!g.endsWith("*")||g.endsWith("/*"),`Route path "${g}" will be treated as if it were "${g.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${g.replace(/\*$/,"/*")}".`);let n=[],a="^"+g.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(n.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return g.endsWith("*")?(n.push({paramName:"*"}),a+=g==="*"||g==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":g!==""&&g!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function HD(g){try{return g.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zs(!1,`The URL path "${g}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),g}}function Cr(g,t){if(t==="/")return g;if(!g.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=g.charAt(e);return n&&n!=="/"?null:g.slice(e)||"/"}var ID=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jD=g=>ID.test(g);function GD(g,t="/"){let{pathname:e,search:n="",hash:a=""}=typeof g=="string"?pd(g):g,o;if(e)if(jD(e))o=e;else{if(e.includes("//")){let c=e;e=e.replace(/\/\/+/g,"/"),zs(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${e}`)}e.startsWith("/")?o=kT(e.substring(1),"/"):o=kT(e,t)}else o=t;return{pathname:o,search:XD(n),hash:YD(a)}}function kT(g,t){let e=t.replace(/\/+$/,"").split("/");return g.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function hA(g,t,e,n){return`Cannot include a '${g}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function qD(g){return g.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function pC(g){let t=qD(g);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function mC(g,t,e,n=!1){let a;typeof g=="string"?a=pd(g):(a={...g},Me(!a.pathname||!a.pathname.includes("?"),hA("?","pathname","search",a)),Me(!a.pathname||!a.pathname.includes("#"),hA("#","pathname","hash",a)),Me(!a.search||!a.search.includes("#"),hA("#","search","hash",a)));let o=g===""||a.pathname==="",c=o?"/":a.pathname,h;if(c==null)h=e;else{let b=t.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),b-=1;a.pathname=v.join("/")}h=b>=0?t[b]:"/"}let d=GD(a,h),f=c&&c!=="/"&&c.endsWith("/"),m=(o||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var wr=g=>g.join("/").replace(/\/\/+/g,"/"),VD=g=>g.replace(/\/+$/,"").replace(/^\/*/,"/"),XD=g=>!g||g==="?"?"":g.startsWith("?")?g:"?"+g,YD=g=>!g||g==="#"?"":g.startsWith("#")?g:"#"+g;function $D(g){return g!=null&&typeof g.status=="number"&&typeof g.statusText=="string"&&typeof g.internal=="boolean"&&"data"in g}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yC=["POST","PUT","PATCH","DELETE"];new Set(yC);var KD=["GET",...yC];new Set(KD);var md=Y.createContext(null);md.displayName="DataRouter";var Nb=Y.createContext(null);Nb.displayName="DataRouterState";Y.createContext(!1);var bC=Y.createContext({isTransitioning:!1});bC.displayName="ViewTransition";var QD=Y.createContext(new Map);QD.displayName="Fetchers";var WD=Y.createContext(null);WD.displayName="Await";var ma=Y.createContext(null);ma.displayName="Navigation";var Bp=Y.createContext(null);Bp.displayName="Location";var Rr=Y.createContext({outlet:null,matches:[],isDataRoute:!1});Rr.displayName="Route";var tw=Y.createContext(null);tw.displayName="RouteError";function ZD(g,{relative:t}={}){Me(zp(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:n}=Y.useContext(ma),{hash:a,pathname:o,search:c}=Pp(g,{relative:t}),h=o;return e!=="/"&&(h=o==="/"?e:wr([e,o])),n.createHref({pathname:h,search:c,hash:a})}function zp(){return Y.useContext(Bp)!=null}function Ic(){return Me(zp(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(Bp).location}var vC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function AC(g){Y.useContext(ma).static||Y.useLayoutEffect(g)}function JD(){let{isDataRoute:g}=Y.useContext(Rr);return g?dL():tL()}function tL(){Me(zp(),"useNavigate() may be used only in the context of a <Router> component.");let g=Y.useContext(md),{basename:t,navigator:e}=Y.useContext(ma),{matches:n}=Y.useContext(Rr),{pathname:a}=Ic(),o=JSON.stringify(pC(n)),c=Y.useRef(!1);return AC(()=>{c.current=!0}),Y.useCallback((d,f={})=>{if(zs(c.current,vC),!c.current)return;if(typeof d=="number"){e.go(d);return}let m=mC(d,JSON.parse(o),a,f.relative==="path");g==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:wr([t,m.pathname])),(f.replace?e.replace:e.push)(m,f.state,f)},[t,e,o,a,g])}Y.createContext(null);function Pp(g,{relative:t}={}){let{matches:e}=Y.useContext(Rr),{pathname:n}=Ic(),a=JSON.stringify(pC(e));return Y.useMemo(()=>mC(g,JSON.parse(a),n,t==="path"),[g,a,n,t])}function eL(g,t){return SC(g,t)}function SC(g,t,e,n,a){var L;Me(zp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Y.useContext(ma),{matches:c}=Y.useContext(Rr),h=c[c.length-1],d=h?h.params:{},f=h?h.pathname:"/",m=h?h.pathnameBase:"/",b=h&&h.route;{let R=b&&b.path||"";wC(f,!b||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=Ic(),S;if(t){let R=typeof t=="string"?pd(t):t;Me(m==="/"||((L=R.pathname)==null?void 0:L.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${R.pathname}" was given in the \`location\` prop.`),S=R}else S=v;let C=S.pathname||"/",T=C;if(m!=="/"){let R=m.replace(/^\//,"").split("/");T="/"+C.replace(/^\//,"").split("/").slice(R.length).join("/")}let M=dC(g,{pathname:T});zs(b||M!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),zs(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=rL(M&&M.map(R=>Object.assign({},R,{params:Object.assign({},d,R.params),pathname:wr([m,o.encodeLocation?o.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?m:wr([m,o.encodeLocation?o.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),c,e,n,a);return t&&x?Y.createElement(Bp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},x):x}function iL(){let g=hL(),t=$D(g)?`${g.status} ${g.statusText}`:g instanceof Error?g.message:JSON.stringify(g),e=g instanceof Error?g.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",g),c=Y.createElement(Y.Fragment,null,Y.createElement("p",null," Hey developer "),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:o},"ErrorBoundary")," or"," ",Y.createElement("code",{style:o},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},t),e?Y.createElement("pre",{style:a},e):null,c)}var nL=Y.createElement(iL,null),sL=class extends Y.Component{constructor(g){super(g),this.state={location:g.location,revalidation:g.revalidation,error:g.error}}static getDerivedStateFromError(g){return{error:g}}static getDerivedStateFromProps(g,t){return t.location!==g.location||t.revalidation!=="idle"&&g.revalidation==="idle"?{error:g.error,location:g.location,revalidation:g.revalidation}:{error:g.error!==void 0?g.error:t.error,location:t.location,revalidation:g.revalidation||t.revalidation}}componentDidCatch(g,t){this.props.onError?this.props.onError(g,t):console.error("React Router caught the following error during render",g)}render(){return this.state.error!==void 0?Y.createElement(Rr.Provider,{value:this.props.routeContext},Y.createElement(tw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function aL({routeContext:g,match:t,children:e}){let n=Y.useContext(md);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),Y.createElement(Rr.Provider,{value:g},e)}function rL(g,t=[],e=null,n=null,a=null){if(g==null){if(!e)return null;if(e.errors)g=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)g=e.matches;else return null}let o=g,c=e==null?void 0:e.errors;if(c!=null){let m=o.findIndex(b=>b.route.id&&(c==null?void 0:c[b.route.id])!==void 0);Me(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let h=!1,d=-1;if(e)for(let m=0;m<o.length;m++){let b=o[m];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(d=m),b.route.id){let{loaderData:v,errors:S}=e,C=b.route.loader&&!v.hasOwnProperty(b.route.id)&&(!S||S[b.route.id]===void 0);if(b.route.lazy||C){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=e&&n?(m,b)=>{var v,S;n(m,{location:e.location,params:((S=(v=e.matches)==null?void 0:v[0])==null?void 0:S.params)??{},errorInfo:b})}:void 0;return o.reduceRight((m,b,v)=>{let S,C=!1,T=null,M=null;e&&(S=c&&b.route.id?c[b.route.id]:void 0,T=b.route.errorElement||nL,h&&(d<0&&v===0?(wC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,M=null):d===v&&(C=!0,M=b.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,v+1)),L=()=>{let R;return S?R=T:C?R=M:b.route.Component?R=Y.createElement(b.route.Component,null):b.route.element?R=b.route.element:R=m,Y.createElement(aL,{match:b,routeContext:{outlet:m,matches:x,isDataRoute:e!=null},children:R})};return e&&(b.route.ErrorBoundary||b.route.errorElement||v===0)?Y.createElement(sL,{location:e.location,revalidation:e.revalidation,component:T,error:S,children:L(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:f}):L()},null)}function ew(g){return`${g} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lL(g){let t=Y.useContext(md);return Me(t,ew(g)),t}function oL(g){let t=Y.useContext(Nb);return Me(t,ew(g)),t}function cL(g){let t=Y.useContext(Rr);return Me(t,ew(g)),t}function iw(g){let t=cL(g),e=t.matches[t.matches.length-1];return Me(e.route.id,`${g} can only be used on routes that contain a unique "id"`),e.route.id}function uL(){return iw("useRouteId")}function hL(){var n;let g=Y.useContext(tw),t=oL("useRouteError"),e=iw("useRouteError");return g!==void 0?g:(n=t.errors)==null?void 0:n[e]}function dL(){let{router:g}=lL("useNavigate"),t=iw("useNavigate"),e=Y.useRef(!1);return AC(()=>{e.current=!0}),Y.useCallback(async(a,o={})=>{zs(e.current,vC),e.current&&(typeof a=="number"?g.navigate(a):await g.navigate(a,{fromRouteId:t,...o}))},[g,t])}var BT={};function wC(g,t,e){!t&&!BT[g]&&(BT[g]=!0,zs(!1,e))}Y.memo(fL);function fL({routes:g,future:t,state:e,unstable_onError:n}){return SC(g,void 0,e,n,t)}function EA(g){Me(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gL({basename:g="/",children:t=null,location:e,navigationType:n="POP",navigator:a,static:o=!1}){Me(!zp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=g.replace(/^\/*/,"/"),h=Y.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof e=="string"&&(e=pd(e));let{pathname:d="/",search:f="",hash:m="",state:b=null,key:v="default"}=e,S=Y.useMemo(()=>{let C=Cr(d,c);return C==null?null:{location:{pathname:C,search:f,hash:m,state:b,key:v},navigationType:n}},[c,d,f,m,b,v,n]);return zs(S!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:Y.createElement(ma.Provider,{value:h},Y.createElement(Bp.Provider,{children:t,value:S}))}function pL({children:g,location:t}){return eL(_A(g),t)}function _A(g,t=[]){let e=[];return Y.Children.forEach(g,(n,a)=>{if(!Y.isValidElement(n))return;let o=[...t,a];if(n.type===Y.Fragment){e.push.apply(e,_A(n.props.children,o));return}Me(n.type===EA,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Me(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=_A(n.props.children,o)),e.push(c)}),e}var by="get",vy="application/x-www-form-urlencoded";function kb(g){return g!=null&&typeof g.tagName=="string"}function mL(g){return kb(g)&&g.tagName.toLowerCase()==="button"}function yL(g){return kb(g)&&g.tagName.toLowerCase()==="form"}function bL(g){return kb(g)&&g.tagName.toLowerCase()==="input"}function vL(g){return!!(g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)}function AL(g,t){return g.button===0&&(!t||t==="_self")&&!vL(g)}var oy=null;function SL(){if(oy===null)try{new FormData(document.createElement("form"),0),oy=!1}catch{oy=!0}return oy}var wL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function dA(g){return g!=null&&!wL.has(g)?(zs(!1,`"${g}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vy}"`),null):g}function EL(g,t){let e,n,a,o,c;if(yL(g)){let h=g.getAttribute("action");n=h?Cr(h,t):null,e=g.getAttribute("method")||by,a=dA(g.getAttribute("enctype"))||vy,o=new FormData(g)}else if(mL(g)||bL(g)&&(g.type==="submit"||g.type==="image")){let h=g.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=g.getAttribute("formaction")||h.getAttribute("action");if(n=d?Cr(d,t):null,e=g.getAttribute("formmethod")||h.getAttribute("method")||by,a=dA(g.getAttribute("formenctype"))||dA(h.getAttribute("enctype"))||vy,o=new FormData(h,g),!SL()){let{name:f,type:m,value:b}=g;if(m==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,b)}}else{if(kb(g))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=by,n=null,a=vy,c=g}return o&&a==="text/plain"&&(c=o,o=void 0),{action:n,method:e.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function nw(g,t){if(g===!1||g===null||typeof g>"u")throw new Error(t)}function _L(g,t,e){let n=typeof g=="string"?new URL(g,typeof window>"u"?"server://singlefetch/":window.location.origin):g;return n.pathname==="/"?n.pathname=`_root.${e}`:t&&Cr(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${e}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${e}`,n}async function TL(g,t){if(g.id in t)return t[g.id];try{let e=await import(g.module);return t[g.id]=e,e}catch(e){return console.error(`Error loading route module \`${g.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CL(g){return g==null?!1:g.href==null?g.rel==="preload"&&typeof g.imageSrcSet=="string"&&typeof g.imageSizes=="string":typeof g.rel=="string"&&typeof g.href=="string"}async function xL(g,t,e){let n=await Promise.all(g.map(async a=>{let o=t.routes[a.route.id];if(o){let c=await TL(o,e);return c.links?c.links():[]}return[]}));return LL(n.flat(1).filter(CL).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function zT(g,t,e,n,a,o){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,h=(d,f)=>{var m;return e[f].pathname!==d.pathname||((m=e[f].route.path)==null?void 0:m.endsWith("*"))&&e[f].params["*"]!==d.params["*"]};return o==="assets"?t.filter((d,f)=>c(d,f)||h(d,f)):o==="data"?t.filter((d,f)=>{var b;let m=n.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((b=e[0])==null?void 0:b.params)||{},nextUrl:new URL(g,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function ML(g,t,{includeHydrateFallback:e}={}){return RL(g.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function RL(g){return[...new Set(g)]}function DL(g){let t={},e=Object.keys(g).sort();for(let n of e)t[n]=g[n];return t}function LL(g,t){let e=new Set;return new Set(t),g.reduce((n,a)=>{let o=JSON.stringify(DL(a));return e.has(o)||(e.add(o),n.push({key:o,link:a})),n},[])}function EC(){let g=Y.useContext(md);return nw(g,"You must render this element inside a <DataRouterContext.Provider> element"),g}function OL(){let g=Y.useContext(Nb);return nw(g,"You must render this element inside a <DataRouterStateContext.Provider> element"),g}var sw=Y.createContext(void 0);sw.displayName="FrameworkContext";function _C(){let g=Y.useContext(sw);return nw(g,"You must render this element inside a <HydratedRouter> element"),g}function NL(g,t){let e=Y.useContext(sw),[n,a]=Y.useState(!1),[o,c]=Y.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:b}=t,v=Y.useRef(null);Y.useEffect(()=>{if(g==="render"&&c(!0),g==="viewport"){let T=x=>{x.forEach(L=>{c(L.isIntersecting)})},M=new IntersectionObserver(T,{threshold:.5});return v.current&&M.observe(v.current),()=>{M.disconnect()}}},[g]),Y.useEffect(()=>{if(n){let T=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(T)}}},[n]);let S=()=>{a(!0)},C=()=>{a(!1),c(!1)};return e?g!=="intent"?[o,v,{}]:[o,v,{onFocus:ff(h,S),onBlur:ff(d,C),onMouseEnter:ff(f,S),onMouseLeave:ff(m,C),onTouchStart:ff(b,S)}]:[!1,v,{}]}function ff(g,t){return e=>{g&&g(e),e.defaultPrevented||t(e)}}function kL({page:g,...t}){let{router:e}=EC(),n=Y.useMemo(()=>dC(e.routes,g,e.basename),[e.routes,g,e.basename]);return n?Y.createElement(zL,{page:g,matches:n,...t}):null}function BL(g){let{manifest:t,routeModules:e}=_C(),[n,a]=Y.useState([]);return Y.useEffect(()=>{let o=!1;return xL(g,t,e).then(c=>{o||a(c)}),()=>{o=!0}},[g,t,e]),n}function zL({page:g,matches:t,...e}){let n=Ic(),{manifest:a,routeModules:o}=_C(),{basename:c}=EC(),{loaderData:h,matches:d}=OL(),f=Y.useMemo(()=>zT(g,t,d,a,n,"data"),[g,t,d,a,n]),m=Y.useMemo(()=>zT(g,t,d,a,n,"assets"),[g,t,d,a,n]),b=Y.useMemo(()=>{if(g===n.pathname+n.search+n.hash)return[];let C=new Set,T=!1;if(t.forEach(x=>{var R;let L=a.routes[x.route.id];!L||!L.hasLoader||(!f.some(O=>O.route.id===x.route.id)&&x.route.id in h&&((R=o[x.route.id])!=null&&R.shouldRevalidate)||L.hasClientLoader?T=!0:C.add(x.route.id))}),C.size===0)return[];let M=_L(g,c,"data");return T&&C.size>0&&M.searchParams.set("_routes",t.filter(x=>C.has(x.route.id)).map(x=>x.route.id).join(",")),[M.pathname+M.search]},[c,h,n,a,f,t,g,o]),v=Y.useMemo(()=>ML(m,a),[m,a]),S=BL(m);return Y.createElement(Y.Fragment,null,b.map(C=>Y.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...e})),v.map(C=>Y.createElement("link",{key:C,rel:"modulepreload",href:C,...e})),S.map(({key:C,link:T})=>Y.createElement("link",{key:C,nonce:e.nonce,...T})))}function PL(...g){return t=>{g.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var TC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TC&&(window.__reactRouterVersion="7.9.6")}catch{}function FL({basename:g,children:t,window:e}){let n=Y.useRef();n.current==null&&(n.current=_D({window:e,v5Compat:!0}));let a=n.current,[o,c]=Y.useState({action:a.action,location:a.location}),h=Y.useCallback(d=>{Y.startTransition(()=>c(d))},[c]);return Y.useLayoutEffect(()=>a.listen(h),[a,h]),Y.createElement(gL,{basename:g,children:t,location:o.location,navigationType:o.action,navigator:a})}var CC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xC=Y.forwardRef(function({onClick:t,discover:e="render",prefetch:n="none",relative:a,reloadDocument:o,replace:c,state:h,target:d,to:f,preventScrollReset:m,viewTransition:b,...v},S){let{basename:C}=Y.useContext(ma),T=typeof f=="string"&&CC.test(f),M,x=!1;if(typeof f=="string"&&T&&(M=f,TC))try{let Z=new URL(window.location.href),it=f.startsWith("//")?new URL(Z.protocol+f):new URL(f),et=Cr(it.pathname,C);it.origin===Z.origin&&et!=null?f=et+it.search+it.hash:x=!0}catch{zs(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=ZD(f,{relative:a}),[R,O,N]=NL(n,v),B=jL(f,{replace:c,state:h,target:d,preventScrollReset:m,relative:a,viewTransition:b});function F(Z){t&&t(Z),Z.defaultPrevented||B(Z)}let W=Y.createElement("a",{...v,...N,href:M||L,onClick:x||o?t:F,ref:PL(S,O),target:d,"data-discover":!T&&e==="render"?"true":void 0});return R&&!T?Y.createElement(Y.Fragment,null,W,Y.createElement(kL,{page:L})):W});xC.displayName="Link";var UL=Y.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:n="",end:a=!1,style:o,to:c,viewTransition:h,children:d,...f},m){let b=Pp(c,{relative:f.relative}),v=Ic(),S=Y.useContext(Nb),{navigator:C,basename:T}=Y.useContext(ma),M=S!=null&&YL(b)&&h===!0,x=C.encodeLocation?C.encodeLocation(b).pathname:b.pathname,L=v.pathname,R=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;e||(L=L.toLowerCase(),R=R?R.toLowerCase():null,x=x.toLowerCase()),R&&T&&(R=Cr(R,T)||R);const O=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=L===x||!a&&L.startsWith(x)&&L.charAt(O)==="/",B=R!=null&&(R===x||!a&&R.startsWith(x)&&R.charAt(x.length)==="/"),F={isActive:N,isPending:B,isTransitioning:M},W=N?t:void 0,Z;typeof n=="function"?Z=n(F):Z=[n,N?"active":null,B?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let it=typeof o=="function"?o(F):o;return Y.createElement(xC,{...f,"aria-current":W,className:Z,ref:m,style:it,to:c,viewTransition:h},typeof d=="function"?d(F):d)});UL.displayName="NavLink";var HL=Y.forwardRef(({discover:g="render",fetcherKey:t,navigate:e,reloadDocument:n,replace:a,state:o,method:c=by,action:h,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:b,...v},S)=>{let C=VL(),T=XL(h,{relative:f}),M=c.toLowerCase()==="get"?"get":"post",x=typeof h=="string"&&CC.test(h),L=R=>{if(d&&d(R),R.defaultPrevented)return;R.preventDefault();let O=R.nativeEvent.submitter,N=(O==null?void 0:O.getAttribute("formmethod"))||c;C(O||R.currentTarget,{fetcherKey:t,method:N,navigate:e,replace:a,state:o,relative:f,preventScrollReset:m,viewTransition:b})};return Y.createElement("form",{ref:S,method:M,action:T,onSubmit:n?d:L,...v,"data-discover":!x&&g==="render"?"true":void 0})});HL.displayName="Form";function IL(g){return`${g} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MC(g){let t=Y.useContext(md);return Me(t,IL(g)),t}function jL(g,{target:t,replace:e,state:n,preventScrollReset:a,relative:o,viewTransition:c}={}){let h=JD(),d=Ic(),f=Pp(g,{relative:o});return Y.useCallback(m=>{if(AL(m,t)){m.preventDefault();let b=e!==void 0?e:Hf(d)===Hf(f);h(g,{replace:b,state:n,preventScrollReset:a,relative:o,viewTransition:c})}},[d,h,f,e,n,t,g,a,o,c])}var GL=0,qL=()=>`__${String(++GL)}__`;function VL(){let{router:g}=MC("useSubmit"),{basename:t}=Y.useContext(ma),e=uL();return Y.useCallback(async(n,a={})=>{let{action:o,method:c,encType:h,formData:d,body:f}=EL(n,t);if(a.navigate===!1){let m=a.fetcherKey||qL();await g.fetch(m,e,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await g.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:e,flushSync:a.flushSync,viewTransition:a.viewTransition})},[g,t,e])}function XL(g,{relative:t}={}){let{basename:e}=Y.useContext(ma),n=Y.useContext(Rr);Me(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),o={...Pp(g||".",{relative:t})},c=Ic();if(g==null){o.search=c.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(m=>m==="")){h.delete("index"),d.filter(b=>b).forEach(b=>h.append("index",b));let m=h.toString();o.search=m?`?${m}`:""}}return(!g||g===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(o.pathname=o.pathname==="/"?e:wr([e,o.pathname])),Hf(o)}function YL(g,{relative:t}={}){let e=Y.useContext(bC);Me(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=MC("useViewTransitionState"),a=Pp(g,{relative:t});if(!e.isTransitioning)return!1;let o=Cr(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=Cr(e.nextLocation.pathname,n)||e.nextLocation.pathname;return tb(a.pathname,c)!=null||tb(a.pathname,o)!=null}const $L=()=>nt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:nt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),KL=()=>nt.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:nt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),QL=()=>nt.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[nt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h5M20 20v-5h-5"}),nt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 9a9 9 0 0114.13-5.26M20 15a9 9 0 01-14.13 5.26"})]}),WL=()=>nt.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00e0d4] flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:"U"}),RC=()=>nt.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:"AI"}),ZL=({message:g})=>{const t=g.role==="user",e=t?"bg-white text-gray-900 self-end border border-gray-200":"bg-gray-50 text-gray-900 border border-[#00e0d4]/30 self-start",n=t?"flex justify-end items-start gap-3":"flex justify-start items-start gap-3",a=g.content.split(`
`).map((o,c)=>nt.jsxs(hC.Fragment,{children:[o,nt.jsx("br",{})]},c));return nt.jsxs("div",{className:n,children:[!t&&nt.jsx(RC,{}),nt.jsx("div",{className:`max-w-xl lg:max-w-2xl px-4 py-3 rounded-2xl ${e} shadow-md`,children:nt.jsx("p",{className:"text-sm md:text-base whitespace-pre-wrap",children:a})}),t&&nt.jsx(WL,{})]})},JL=({messages:g,isLoading:t})=>{const e=Y.useRef(null);return Y.useEffect(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[g,t]),nt.jsxs("div",{ref:e,className:"flex-1 p-4 md:p-6 overflow-y-auto space-y-6 bg-white",children:[g.map((n,a)=>nt.jsx(ZL,{message:n},a)),t&&nt.jsxs("div",{className:"flex justify-start items-start gap-3",children:[nt.jsx(RC,{}),nt.jsx("div",{className:"bg-gray-50 text-gray-900 border border-[#00e0d4]/30 self-start max-w-sm px-4 py-3 rounded-2xl flex items-center",children:nt.jsxs("div",{className:"animate-pulse flex space-x-2",children:[nt.jsx("div",{className:"w-2 h-2 bg-[#00e0d4] rounded-full"}),nt.jsx("div",{className:"w-2 h-2 bg-[#00e0d4] rounded-full"}),nt.jsx("div",{className:"w-2 h-2 bg-[#00e0d4] rounded-full"})]})})]})]})},tO=({onSendMessage:g,isLoading:t})=>{const[e,n]=Y.useState(""),a=o=>{o.preventDefault(),e.trim()&&!t&&(g(e.trim()),n(""))};return nt.jsx("form",{onSubmit:a,className:"p-4 bg-white backdrop-blur-sm border-t border-[#00e0d4]",children:nt.jsxs("div",{className:"relative",children:[nt.jsx("input",{type:"text",className:"w-full bg-gray-50 text-gray-900 placeholder-gray-400 border border-[#00e0d4]/50 rounded-full py-3 pl-5 pr-14 focus:outline-none focus:ring-2 focus:ring-[#00e0d4] transition duration-200",placeholder:t?"Aan het denken...":"Stel een vraag...",value:e,onChange:o=>n(o.target.value),disabled:t}),nt.jsx("button",{type:"submit",disabled:t||!e.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-[#00e0d4] hover:bg-[#00c9be] disabled:bg-gray-300 disabled:cursor-not-allowed text-white rounded-full p-2.5 transition duration-200","aria-label":"Verstuur bericht",children:nt.jsx(KL,{})})]})})},eO=()=>{const[g,t]=Y.useState([]),[e,n]=Y.useState(!1),[a,o]=Y.useState(null),[c,h]=Y.useState(!1);Y.useEffect(()=>{t([{role:"model",content:"Hallo! Waarmee kan ik je helpen? Wat zou je willen weten over Orbinite?"}]),h(!0)},[]);const d=Y.useCallback(async m=>{if(e||!c)return;const b={role:"user",content:m},v=[...g,b];t(v),n(!0),o(null);try{const S=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({history:v})});if(!S.ok){const M=await S.json();throw new Error(M.error||`HTTP error! status: ${S.status}`)}const T={role:"model",content:(await S.json()).text};t(M=>[...M,T])}catch(S){console.error("Fout bij het communiceren met de backend:",S);const C=`Sorry, er is iets misgegaan: ${S.message}`;o(C),t(T=>[...T,{role:"model",content:C}])}finally{n(!1)}},[g,e,c]),f=()=>{t([{role:"model",content:"Hallo! Waarmee kan ik je helpen? Wat zou je willen weten over Orbinite?"}]),o(null),n(!1)};return nt.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",style:{background:"transparent"},children:nt.jsxs("div",{className:"w-full h-[95vh] max-w-4xl flex flex-col bg-white backdrop-blur-xl rounded-2xl shadow-2xl border border-[#00e0d4] overflow-hidden",children:[nt.jsxs("header",{className:"flex items-center justify-between p-4 bg-white border-b border-[#00e0d4]",children:[nt.jsx("h1",{className:"text-xl font-bold text-[#00e0d4]",children:"ORBINITE AI"}),nt.jsxs("button",{onClick:f,className:"flex items-center gap-2 text-sm text-[#00e0d4] hover:text-[#00c9be] bg-[#00e0d4]/10 hover:bg-[#00e0d4]/20 px-3 py-1.5 rounded-lg transition-colors border border-[#00e0d4]",title:"Start een nieuwe chat",children:[nt.jsx(QL,{}),"Reset"]})]}),a&&nt.jsx("div",{className:"p-4 bg-red-500/50 text-white text-center",children:a}),nt.jsx(JL,{messages:g,isLoading:e}),nt.jsx(tO,{onSendMessage:d,isLoading:e||!c})]})})},ji=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),TA=[.001,0,0,.001,0,0],fA=1.35,Un={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},il={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},If="pdfjs_internal_editor_",Mt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},iO={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},CA={TRIANGLES:1,LATTICE:2},bi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ay={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ye={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ru={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Bb={ERRORS:0,WARNINGS:1,INFOS:5},jf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},gf={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},nO={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let zb=Bb.WARNINGS;function sO(g){Number.isInteger(g)&&(zb=g)}function aO(){return zb}function Pb(g){zb>=Bb.INFOS&&console.info(`Info: ${g}`)}function Tt(g){zb>=Bb.WARNINGS&&console.warn(`Warning: ${g}`)}function ge(g){throw new Error(g)}function Gt(g,t){g||ge(t)}function rO(g){switch(g==null?void 0:g.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function DC(g,t=null,e=null){if(!g)return null;if(e&&typeof g=="string"){if(e.addDefaultProtocol&&g.startsWith("www.")){const a=g.match(/\./g);(a==null?void 0:a.length)>=2&&(g=`http://${g}`)}if(e.tryConvertEncoding)try{g=hO(g)}catch{}}const n=t?URL.parse(g,t):URL.parse(g);return rO(n)?n:null}function LC(g,t,e=!1){const n=URL.parse(g);return n?(n.hash=t,n.href):e&&DC(g,"http://example.com")?g.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ct(g,t,e,n=!1){return Object.defineProperty(g,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const jc=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class PT extends jc{constructor(t,e){super(t,"PasswordException"),this.code=e}}class gA extends jc{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class xA extends jc{constructor(t){super(t,"InvalidPDFException")}}class eb extends jc{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class lO extends jc{constructor(t){super(t,"FormatError")}}class $l extends jc{constructor(t){super(t,"AbortException")}}function OC(g){(typeof g!="object"||(g==null?void 0:g.length)===void 0)&&ge("Invalid argument for bytesToString");const t=g.length,e=8192;if(t<e)return String.fromCharCode.apply(null,g);const n=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),c=g.subarray(a,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function Fp(g){typeof g!="string"&&ge("Invalid argument for stringToBytes");const t=g.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=g.charCodeAt(n)&255;return e}function oO(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function cO(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function uO(){try{return new Function(""),!0}catch{return!1}}class xi{static get isLittleEndian(){return Ct(this,"isLittleEndian",cO())}static get isEvalSupported(){return Ct(this,"isEvalSupported",uO())}static get isOffscreenCanvasSupported(){return Ct(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ct(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ct(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ct(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ct(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Ct(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const pA=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));var Er,Sy,MA;class ut{static makeHexColor(t,e,n){return`#${pA[t]}${pA[e]}${pA[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const a=t[n],o=t[n+1];t[n]=a*e[0]+o*e[2]+e[4],t[n+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const a=e[0],o=e[1],c=e[2],h=e[3],d=e[4],f=e[5];for(let m=0;m<6;m+=2){const b=t[n+m],v=t[n+m+1];t[n+m]=b*a+v*c+d,t[n+m+1]=b*o+v*h+f}}static applyInverseTransform(t,e){const n=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const a=e[0],o=e[1],c=e[2],h=e[3],d=e[4],f=e[5],m=t[0],b=t[1],v=t[2],S=t[3];let C=a*m+d,T=C,M=a*v+d,x=M,L=h*b+f,R=L,O=h*S+f,N=O;if(o!==0||c!==0){const B=o*m,F=o*v,W=c*b,Z=c*S;C+=W,x+=W,M+=Z,T+=Z,L+=B,N+=B,O+=F,R+=F}n[0]=Math.min(n[0],C,M,T,x),n[1]=Math.min(n[1],L,O,R,N),n[2]=Math.max(n[2],C,M,T,x),n[3]=Math.max(n[3],L,O,R,N)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],a=t[1],o=t[2],c=t[3],h=n**2+a**2,d=n*o+a*c,f=o**2+c**2,m=(h+f)/2,b=Math.sqrt(m**2-(h*f-d**2));e[0]=Math.sqrt(m+b||1),e[1]=Math.sqrt(m-b||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,a,c]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,a,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,a)}static bezierBoundingBox(t,e,n,a,o,c,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),_(this,Er,MA).call(this,t,n,o,h,e,a,c,d,3*(-t+3*(n-o)+h),6*(t-2*n+o),3*(n-t),f),_(this,Er,MA).call(this,t,n,o,h,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f)}}Er=new WeakSet,Sy=function(t,e,n,a,o,c,h,d,f,m){if(f<=0||f>=1)return;const b=1-f,v=f*f,S=v*f,C=b*(b*(b*t+3*f*e)+3*v*n)+S*a,T=b*(b*(b*o+3*f*c)+3*v*h)+S*d;m[0]=Math.min(m[0],C),m[1]=Math.min(m[1],T),m[2]=Math.max(m[2],C),m[3]=Math.max(m[3],T)},MA=function(t,e,n,a,o,c,h,d,f,m,b,v){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&_(this,Er,Sy).call(this,t,e,n,a,o,c,h,d,-b/m,v);return}const S=m**2-4*b*f;if(S<0)return;const C=Math.sqrt(S),T=2*f;_(this,Er,Sy).call(this,t,e,n,a,o,c,h,d,(-m+C)/T,v),_(this,Er,Sy).call(this,t,e,n,a,o,c,h,d,(-m-C)/T,v)},E(ut,Er);function hO(g){return decodeURIComponent(escape(g))}let mA=null,FT=null;function dO(g){return mA||(mA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,FT=new Map([["","t"]])),g.replaceAll(mA,(t,e,n)=>e?e.normalize("NFKC"):FT.get(n))}function NC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);return crypto.getRandomValues(g),OC(g)}const Pu="pdfjs_internal_id_";function fO(g,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,a,...o]=e;if(!g(n)&&!Number.isInteger(n)||!t(a))return!1;const c=o.length;let h=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Gi(g,t,e){return Math.min(Math.max(g,t),e)}function kC(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(OC(g))}function gO(g){return Uint8Array.fromBase64?Uint8Array.fromBase64(g):Fp(atob(g))}typeof Promise.try!="function"&&(Promise.try=function(g,...t){return new Promise(e=>{e(g(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(g){return g.reduce((t,e)=>t+e,0)});class Gf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function a(o){var d;if(!o)return;let c=null;const h=o.name;if(h==="#text")c=o.value;else if(Gf.shouldBuildText(h))(d=o==null?void 0:o.attributes)!=null&&d.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const f of o.children)a(f)}return a(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class BC{static setupStorage(t,e,n,a,o){const c=a.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of n.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:a,linkService:o}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){var b,v;const e=t.annotationStorage,n=t.linkService,a=t.xfaHtml,o=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:n});const h=o!=="richText",d=t.div;if(d.append(c),t.viewport){const S=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=S}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const S=document.createTextNode(a.value);c.append(S),h&&Gf.shouldBuildText(a.name)&&f.push(S)}return{textDivs:f}}const m=[[a,-1,c]];for(;m.length>0;){const[S,C,T]=m.at(-1);if(C+1===S.children.length){m.pop();continue}const M=S.children[++m.at(-1)[1]];if(M===null)continue;const{name:x}=M;if(x==="#text"){const R=document.createTextNode(M.value);f.push(R),T.append(R);continue}const L=(b=M==null?void 0:M.attributes)!=null&&b.xmlns?document.createElementNS(M.attributes.xmlns,x):document.createElement(x);if(T.append(L),M.attributes&&this.setAttributes({html:L,element:M,storage:e,intent:o,linkService:n}),((v=M.children)==null?void 0:v.length)>0)m.push([M,-1,L]);else if(M.value){const R=document.createTextNode(M.value);h&&Gf.shouldBuildText(x)&&f.push(R),L.append(R)}}for(const S of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))S.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const za="http://www.w3.org/2000/svg",Ao=class Ao{};tt(Ao,"CSS",96),tt(Ao,"PDF",72),tt(Ao,"PDF_TO_CSS_UNITS",Ao.CSS/Ao.PDF);let Kl=Ao;async function Up(g,t="text"){if(vf(g,document.baseURI)){const e=await fetch(g);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const a=new XMLHttpRequest;a.open("GET",g,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}n(new Error(a.statusText))}},a.send(null)})}class Hp{constructor({viewBox:t,userUnit:e,scale:n,rotation:a,offsetX:o=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=a,this.offsetX=o,this.offsetY=c,n*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,b,v,S;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,b=0,v=0,S=1;break;case 90:m=0,b=1,v=1,S=0;break;case 270:m=0,b=-1,v=-1,S=0;break;case 0:m=1,b=0,v=0,S=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,S=-S);let C,T,M,x;m===0?(C=Math.abs(f-t[1])*n+o,T=Math.abs(d-t[0])*n+c,M=(t[3]-t[1])*n,x=(t[2]-t[0])*n):(C=Math.abs(d-t[0])*n+o,T=Math.abs(f-t[1])*n+c,M=(t[2]-t[0])*n,x=(t[3]-t[1])*n),this.transform=[m*n,b*n,v*n,S*n,C-m*n*d-v*n*f,T-b*n*d-S*n*f],this.width=M,this.height=x}get rawDims(){const t=this.viewBox;return Ct(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new Hp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return ut.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];ut.applyTransform(e,this.transform);const n=[t[2],t[3]];return ut.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return ut.applyInverseTransform(n,this.transform),n}}class aw extends jc{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Fb(g){const t=g.length;let e=0;for(;e<t&&g[e].trim()==="";)e++;return g.substring(e,e+5).toLowerCase()==="data:"}function rw(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function pO(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function mO(g,t="document.pdf"){if(typeof g!="string")return t;if(Fb(g))return Tt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(g);if(!n)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},o=/\.pdf$/i,c=n.pathname.split("/").at(-1);if(o.test(c))return a(c);if(n.searchParams.size>0){const h=Array.from(n.searchParams.values()).reverse();for(const f of h)if(o.test(f))return a(f);const d=Array.from(n.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(n.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(d)return a(d[0])}return t}class UT{constructor(){tt(this,"started",Object.create(null));tt(this,"times",[])}time(t){t in this.started&&Tt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Tt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:a,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-a}ms
`);return t.join("")}}function vf(g,t){const e=t?URL.parse(g,t):URL.parse(g);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function ms(g){g.preventDefault()}function Pe(g){g.preventDefault(),g.stopPropagation()}function yO(g){console.log("Deprecated API usage: "+g)}var Xf;class ib{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;l(this,Xf)||A(this,Xf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,Xf).exec(t);if(!e)return null;const n=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let b=parseInt(e[9],10)||0;return b=b>=0&&b<=59?b:0,f==="-"?(c+=m,h+=b):f==="+"&&(c-=m,h-=b),new Date(Date.UTC(n,a,o,c,h,d))}}Xf=new WeakMap,E(ib,Xf);function bO(g,{scale:t=1,rotation:e=0}){const{width:n,height:a}=g.attributes.style,o=[0,0,parseInt(n),parseInt(a)];return new Hp({viewBox:o,userUnit:1,scale:t,rotation:e})}function Ip(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Tt(`Not a valid color format: "${g}"`),[0,0,0])}function vO(g){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of g.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;g.set(e,Ip(n))}t.remove()}function xe(g){const{a:t,b:e,c:n,d:a,e:o,f:c}=g.getTransform();return[t,e,n,a,o,c]}function js(g){const{a:t,b:e,c:n,d:a,e:o,f:c}=g.getTransform().invertSelf();return[t,e,n,a,o,c]}function Fc(g,t,e=!1,n=!0){if(t instanceof Hp){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:c}=g,h=xi.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,m=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,b=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=m,c.height=b):(c.width=b,c.height=m)}n&&g.setAttribute("data-main-rotation",t.rotation)}class ga{constructor(){const{pixelRatio:t}=ga;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,a,o=-1){let c=1/0,h=1/0,d=1/0;n=ga.capPixels(n,o),n>0&&(c=Math.sqrt(n/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(c,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const RA=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class AO{static get isDarkMode(){var t;return Ct(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class SO{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Ct(this,"commentForegroundColor",Ip(n))}}function wO(g,t,e,n){n=Math.min(Math.max(n??1,0),1);const a=255*(1-n);return g=Math.round(g*n+a),t=Math.round(t*n+a),e=Math.round(e*n+a),[g,t,e]}function HT(g,t){const e=g[0]/255,n=g[1]/255,a=g[2]/255,o=Math.max(e,n,a),c=Math.min(e,n,a),h=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const d=o-c;switch(t[1]=h<.5?d/(o+c):d/(2-o-c),o){case e:t[0]=((n-a)/d+(n<a?6:0))*60;break;case n:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-n)/d+4)*60;break}}t[2]=h}function DA(g,t){const e=g[0],n=g[1],a=g[2],o=(1-Math.abs(2*a-1))*n,c=o*(1-Math.abs(e/60%2-1)),h=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+h,t[1]=c+h,t[2]=h;break;case 1:t[0]=c+h,t[1]=o+h,t[2]=h;break;case 2:t[0]=h,t[1]=o+h,t[2]=c+h;break;case 3:t[0]=h,t[1]=c+h,t[2]=o+h;break;case 4:t[0]=c+h,t[1]=h,t[2]=o+h;break;case 5:case 6:t[0]=o+h,t[1]=h,t[2]=c+h;break}}function IT(g){return g<=.03928?g/12.92:((g+.055)/1.055)**2.4}function jT(g,t,e){DA(g,e),e.map(IT);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];DA(t,e),e.map(IT);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>a?(n+.05)/(a+.05):(a+.05)/(n+.05)}const GT=new Map;function EO(g,t){const e=g[0]+g[1]*256+g[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=GT.get(e);if(n)return n;const a=new Float32Array(9),o=a.subarray(0,3),c=a.subarray(3,6);HT(g,c);const h=a.subarray(6,9);HT(t,h);const d=h[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),jT(c,h,o)<f){let m,b;d?(m=c[2],b=1):(m=0,b=c[2]);const v=.005;for(;b-m>v;){const S=c[2]=(m+b)/2;d===jT(c,h,o)<f?m=S:b=S}c[2]=d?b:m}return DA(c,o),n=ut.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),GT.set(e,n),n}function zC({html:g,dir:t,className:e},n){const a=document.createDocumentFragment();if(typeof g=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=g.split(/(?:\r\n?|\n)/);for(let h=0,d=c.length;h<d;++h){const f=c[h];o.append(document.createTextNode(f)),h<d-1&&o.append(document.createElement("br"))}a.append(o)}else BC.render({xfaHtml:g,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),n.append(a)}function PC(g){const t=new Path2D;if(!g)return t;for(let e=0,n=g.length;e<n;)switch(g[e++]){case gf.moveTo:t.moveTo(g[e++],g[e++]);break;case gf.lineTo:t.lineTo(g[e++],g[e++]);break;case gf.curveTo:t.bezierCurveTo(g[e++],g[e++],g[e++],g[e++],g[e++],g[e++]);break;case gf.quadraticCurveTo:t.quadraticCurveTo(g[e++],g[e++],g[e++],g[e++]);break;case gf.closePath:t.closePath();break;default:Tt(`Unrecognized drawing path operator: ${g[e-1]}`);break}return t}var nl,sl,is,ns,Yf,al,qu,Vu,$f,gb,FC,Ci,UC,HC,Du,Af;const Ua=class Ua{constructor(t){E(this,Ci);E(this,nl,null);E(this,sl,null);E(this,is);E(this,ns,null);E(this,Yf,null);E(this,al,null);E(this,qu,null);E(this,Vu,null);A(this,is,t),l(Ua,$f)||A(Ua,$f,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=A(this,nl,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,is)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",ms,{signal:e}),t.addEventListener("pointerdown",_(Ua,gb,FC),{signal:e}));const n=A(this,ns,document.createElement("div"));n.className="buttons",t.append(n);const a=l(this,is).toolbarPosition;if(a){const{style:o}=t,c=l(this,is)._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return l(this,nl)}hide(){var t;l(this,nl).classList.add("hidden"),(t=l(this,sl))==null||t.hideDropdown()}show(){var t,e;l(this,nl).classList.remove("hidden"),(t=l(this,Yf))==null||t.shown(),(e=l(this,al))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=l(this,is),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(Ua,$f)[t]),_(this,Ci,Du).call(this,n)&&n.addEventListener("click",a=>{e.delete()},{signal:e._signal}),l(this,ns).append(n)}async addAltText(t){const e=await t.render();_(this,Ci,Du).call(this,e),l(this,ns).append(e,l(this,Ci,Af)),A(this,Yf,t)}addComment(t,e=null){if(l(this,al))return;const n=t.renderForToolbar();if(!n)return;_(this,Ci,Du).call(this,n);const a=A(this,qu,l(this,Ci,Af));e?(l(this,ns).insertBefore(n,e),l(this,ns).insertBefore(a,e)):l(this,ns).append(n,a),A(this,al,t),t.toolbar=this}addColorPicker(t){if(l(this,sl))return;A(this,sl,t);const e=t.renderButton();_(this,Ci,Du).call(this,e),l(this,ns).append(e,l(this,Ci,Af))}async addEditSignatureButton(t){const e=A(this,Vu,await t.renderEditButton(l(this,is)));_(this,Ci,Du).call(this,e),l(this,ns).append(e,l(this,Ci,Af))}removeButton(t){var e,n;switch(t){case"comment":(e=l(this,al))==null||e.removeToolbarCommentButton(),A(this,al,null),(n=l(this,qu))==null||n.remove(),A(this,qu,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const a=l(this,ns).querySelector(n);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){l(this,Vu)&&(l(this,Vu).title=t)}remove(){var t;l(this,nl).remove(),(t=l(this,sl))==null||t.destroy(),A(this,sl,null)}};nl=new WeakMap,sl=new WeakMap,is=new WeakMap,ns=new WeakMap,Yf=new WeakMap,al=new WeakMap,qu=new WeakMap,Vu=new WeakMap,$f=new WeakMap,gb=new WeakSet,FC=function(t){t.stopPropagation()},Ci=new WeakSet,UC=function(t){l(this,is)._focusEventsAllowed=!1,Pe(t)},HC=function(t){l(this,is)._focusEventsAllowed=!0,Pe(t)},Du=function(t){const e=l(this,is)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",_(this,Ci,UC).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",_(this,Ci,HC).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",ms,{signal:e}),!0)},Af=function(){const t=document.createElement("div");return t.className="divider",t},E(Ua,gb),E(Ua,$f,null);let LA=Ua;var Kf,Eo,Ia,xr,IC,jC,OA;class _O{constructor(t){E(this,xr);E(this,Kf,null);E(this,Eo,null);E(this,Ia);A(this,Ia,t)}show(t,e,n){const[a,o]=_(this,xr,jC).call(this,e,n),{style:c}=l(this,Eo)||A(this,Eo,_(this,xr,IC).call(this));t.append(l(this,Eo)),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Eo).remove()}}Kf=new WeakMap,Eo=new WeakMap,Ia=new WeakMap,xr=new WeakSet,IC=function(){const t=A(this,Eo,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,Ia)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",ms,{signal:e});const n=A(this,Kf,document.createElement("div"));return n.className="buttons",t.append(n),l(this,Ia).hasCommentManager()&&_(this,xr,OA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,Ia).commentSelection("floating_button")}),_(this,xr,OA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,Ia).highlightSelection("floating_button")}),t},jC=function(t,e){let n=0,a=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const h=o.x+(e?o.width:0);if(c>n){a=h,n=c;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,n]},OA=function(t,e,n,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",n);const h=l(this,Ia)._signal;h instanceof AbortSignal&&!h.aborted&&(o.addEventListener("contextmenu",ms,{signal:h}),o.addEventListener("click",a,{signal:h})),l(this,Kf).append(o)};function GC(g,t,e){for(const n of e)t.addEventListener(n,g[n].bind(g))}var _o,To,Xu,Co;const se=class se{static initializeAndAddPointerId(t){(l(se,To)||A(se,To,new Set)).add(t)}static setPointer(t,e){l(se,_o)||A(se,_o,e),l(se,Co)??A(se,Co,t)}static setTimeStamp(t){A(se,Xu,t)}static isSamePointerId(t){return l(se,_o)===t}static isSamePointerIdOrRemove(t){var e;return l(se,_o)===t?!0:((e=l(se,To))==null||e.delete(t),!1)}static isSamePointerType(t){return l(se,Co)===t}static isInitializedAndDifferentPointerType(t){return l(se,Co)!==null&&!se.isSamePointerType(t)}static isSameTimeStamp(t){return l(se,Xu)===t}static isUsingMultiplePointers(){var t;return((t=l(se,To))==null?void 0:t.size)>=1}static clearPointerType(){A(se,Co,null)}static clearPointerIds(){A(se,_o,NaN),A(se,To,null)}static clearTimeStamp(){A(se,Xu,NaN)}};_o=new WeakMap,To=new WeakMap,Xu=new WeakMap,Co=new WeakMap,E(se,_o,NaN),E(se,To,null),E(se,Xu,NaN),E(se,Co,null);let Di=se;var pb;class TO{constructor(){E(this,pb,0)}get id(){return`${If}${Ze(this,pb)._++}`}}pb=new WeakMap;var Yu,Qf,Li,$u,wy;const gw=class gw{constructor(){E(this,$u);E(this,Yu,NC());E(this,Qf,0);E(this,Li,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(n.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ct(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:a,type:o}=t;return _(this,$u,wy).call(this,`${e}_${n}_${a}_${o}`,t)}async getFromUrl(t){return _(this,$u,wy).call(this,t,t)}async getFromBlob(t,e){const n=await e;return _(this,$u,wy).call(this,t,n)}async getFromId(t){l(this,Li)||A(this,Li,new Map);const e=l(this,Li).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Li)||A(this,Li,new Map);let n=l(this,Li).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),n={bitmap:a.transferToImageBitmap(),id:`image_${l(this,Yu)}_${Ze(this,Qf)._++}`,refCounter:1,isSvg:!1},l(this,Li).set(t,n),l(this,Li).set(n.id,n),n}getSvgUrl(t){const e=l(this,Li).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var a;l(this,Li)||A(this,Li,new Map);const e=l(this,Li).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(n.width,n.height);o.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=o.convertToBlob()}(a=n.close)==null||a.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,Yu)}_`)}};Yu=new WeakMap,Qf=new WeakMap,Li=new WeakMap,$u=new WeakSet,wy=async function(t,e){l(this,Li)||A(this,Li,new Map);let n=l(this,Li).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Yu)}_${Ze(this,Qf)._++}`,refCounter:0,isSvg:!1});let a;if(typeof e=="string"?(n.url=e,a=await Up(e,"blob")):e instanceof File?a=n.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=gw._isSVGFittingCanvas,c=new FileReader,h=new Image,d=new Promise((f,m)=>{h.onload=()=>{n.bitmap=h,n.isSvg=!0,f()},c.onload=async()=>{const b=n.svgUrl=c.result;h.src=await o?`${b}#svgView(preserveAspectRatio(none))`:b},h.onerror=c.onerror=m});c.readAsDataURL(a),await d}else n.bitmap=await createImageBitmap(a);n.refCounter=1}catch(a){Tt(a),n=null}return l(this,Li).set(t,n),n&&l(this,Li).set(n.id,n),n};let NA=gw;var He,rl,Wf,Ce;class CO{constructor(t=128){E(this,He,[]);E(this,rl,!1);E(this,Wf);E(this,Ce,-1);A(this,Wf,t)}add({cmd:t,undo:e,post:n,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(a&&t(),l(this,rl))return;const d={cmd:t,undo:e,post:n,type:o};if(l(this,Ce)===-1){l(this,He).length>0&&(l(this,He).length=0),A(this,Ce,0),l(this,He).push(d);return}if(c&&l(this,He)[l(this,Ce)].type===o){h&&(d.undo=l(this,He)[l(this,Ce)].undo),l(this,He)[l(this,Ce)]=d;return}const f=l(this,Ce)+1;f===l(this,Wf)?l(this,He).splice(0,1):(A(this,Ce,f),f<l(this,He).length&&l(this,He).splice(f)),l(this,He).push(d)}undo(){if(l(this,Ce)===-1)return;A(this,rl,!0);const{undo:t,post:e}=l(this,He)[l(this,Ce)];t(),e==null||e(),A(this,rl,!1),A(this,Ce,l(this,Ce)-1)}redo(){if(l(this,Ce)<l(this,He).length-1){A(this,Ce,l(this,Ce)+1),A(this,rl,!0);const{cmd:t,post:e}=l(this,He)[l(this,Ce)];t(),e==null||e(),A(this,rl,!1)}}hasSomethingToUndo(){return l(this,Ce)!==-1}hasSomethingToRedo(){return l(this,Ce)<l(this,He).length-1}cleanType(t){if(l(this,Ce)!==-1){for(let e=l(this,Ce);e>=0;e--)if(l(this,He)[e].type!==t){l(this,He).splice(e+1,l(this,Ce)-e),A(this,Ce,e);return}l(this,He).length=0,A(this,Ce,-1)}}destroy(){A(this,He,null)}}He=new WeakMap,rl=new WeakMap,Wf=new WeakMap,Ce=new WeakMap;var mb,qC;class jp{constructor(t){E(this,mb);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=xi.platform;for(const[n,a,o={}]of t)for(const c of n){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(_(this,mb,qC).call(this,e));if(!n)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:h=null}}=n;h&&!h(t,e)||(a.bind(t,...c,e)(),o||Pe(e))}}mb=new WeakSet,qC=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const yb=class yb{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return vO(t),Ct(this,"_colors",t)}convert(t){const e=Ip(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,a]of this._colors)if(a.every((o,c)=>o===e[c]))return yb._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?ut.makeHexColor(...e):t}};tt(yb,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let kA=yb;var Ku,Sn,Qu,Oe,ei,Wu,ss,Zu,as,Oi,ll,ol,Ju,cl,Vs,rs,xo,Zf,Jf,th,tg,Xs,ul,eh,hl,Ys,bb,dl,ih,eg,fl,Mo,nh,gl,ig,$e,Jt,ja,pl,ml,ng,sh,sg,yl,$s,Ga,ag,rg,ls,st,Ey,BA,VC,XC,Sf,YC,$C,KC,zA,QC,WC,ZC,JC,Pi,Pa,tx,ex,PA,ix,wf,FA;const Uu=class Uu{constructor(t,e,n,a,o,c,h,d,f,m,b,v,S,C,T,M){E(this,st);E(this,Ku,new AbortController);E(this,Sn,null);E(this,Qu,null);E(this,Oe,new Map);E(this,ei,new Map);E(this,Wu,null);E(this,ss,null);E(this,Zu,null);E(this,as,new CO);E(this,Oi,null);E(this,ll,null);E(this,ol,null);E(this,Ju,0);E(this,cl,new Set);E(this,Vs,null);E(this,rs,null);E(this,xo,new Set);tt(this,"_editorUndoBar",null);E(this,Zf,!1);E(this,Jf,!1);E(this,th,!1);E(this,tg,null);E(this,Xs,null);E(this,ul,null);E(this,eh,null);E(this,hl,!1);E(this,Ys,null);E(this,bb,new TO);E(this,dl,!1);E(this,ih,!1);E(this,eg,!1);E(this,fl,null);E(this,Mo,null);E(this,nh,null);E(this,gl,null);E(this,ig,null);E(this,$e,Mt.NONE);E(this,Jt,new Set);E(this,ja,null);E(this,pl,null);E(this,ml,null);E(this,ng,null);E(this,sh,null);E(this,sg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});E(this,yl,[0,0]);E(this,$s,null);E(this,Ga,null);E(this,ag,null);E(this,rg,null);E(this,ls,null);const x=this._signal=l(this,Ku).signal;A(this,Ga,t),A(this,ag,e),A(this,rg,n),A(this,Wu,a),A(this,Oi,o),A(this,pl,c),A(this,sh,d),this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:x}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:x}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:x}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:x}),h._on("setpreference",this.onSetPreference.bind(this),{signal:x}),h._on("switchannotationeditorparams",L=>this.updateParams(L.type,L.value),{signal:x}),window.addEventListener("pointerdown",()=>{A(this,ih,!0)},{capture:!0,signal:x}),window.addEventListener("pointerup",()=>{A(this,ih,!1)},{capture:!0,signal:x}),_(this,st,YC).call(this),_(this,st,JC).call(this),_(this,st,zA).call(this),A(this,ss,d.annotationStorage),A(this,tg,d.filterFactory),A(this,ml,f),A(this,eh,m||null),A(this,Zf,b),A(this,Jf,v),A(this,th,S),A(this,ig,C||null),this.viewParameters={realScale:Kl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=T||null,this._supportsPinchToZoom=M!==!1,o==null||o.setSidebarUiManager(this)}static get _keyboardManager(){const t=Uu.prototype,e=c=>l(c,Ga).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new jp([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&l(c,Ga).contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&l(c,Ga).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,n,a,o,c,h,d,f;(t=l(this,ls))==null||t.resolve(),A(this,ls,null),(e=l(this,Ku))==null||e.abort(),A(this,Ku,null),this._signal=null;for(const m of l(this,ei).values())m.destroy();l(this,ei).clear(),l(this,Oe).clear(),l(this,xo).clear(),(n=l(this,gl))==null||n.clear(),A(this,Sn,null),l(this,Jt).clear(),l(this,as).destroy(),(a=l(this,Wu))==null||a.destroy(),(o=l(this,Oi))==null||o.destroy(),(c=l(this,pl))==null||c.destroy(),(h=l(this,Ys))==null||h.hide(),A(this,Ys,null),(d=l(this,nh))==null||d.destroy(),A(this,nh,null),A(this,Qu,null),l(this,Xs)&&(clearTimeout(l(this,Xs)),A(this,Xs,null)),l(this,$s)&&(clearTimeout(l(this,$s)),A(this,$s,null)),(f=this._editorUndoBar)==null||f.destroy(),A(this,sh,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,ig)}get useNewAltTextFlow(){return l(this,Jf)}get useNewAltTextWhenAddingImage(){return l(this,th)}get hcmFilter(){return Ct(this,"hcmFilter",l(this,ml)?l(this,tg).addHCMFilter(l(this,ml).foreground,l(this,ml).background):"none")}get direction(){return Ct(this,"direction",getComputedStyle(l(this,Ga)).direction)}get _highlightColors(){return Ct(this,"_highlightColors",l(this,eh)?new Map(l(this,eh).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ct(this,"highlightColors",null);const e=new Map,n=!!l(this,ml);for(const[a,o]of t){const c=a.endsWith("_HCM");if(n&&c){e.set(a.replace("_HCM",""),o);continue}!n&&!c&&e.set(a,o)}return Ct(this,"highlightColors",e)}get highlightColorNames(){return Ct(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,ol,t)}setMainHighlightColorPicker(t){A(this,nh,t)}editAltText(t,e=!1){var n;(n=l(this,Wu))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!l(this,Oi)}editComment(t,e,n,a){var o;(o=l(this,Oi))==null||o.showDialog(this,t,e,n,a)}selectComment(t,e){const n=l(this,ei).get(t),a=n==null?void 0:n.getEditorByUID(e);a==null||a.toggleComment(!0,!0)}updateComment(t){var e;(e=l(this,Oi))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=l(this,Oi))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=l(this,Oi))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var a;(a=l(this,Oi))==null||a.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=l(this,Oi))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=l(this,Oi))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(l(this,ei).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await n}getSignature(t){var e;(e=l(this,pl))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,pl)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,th,e);break}}onPageChanging({pageNumber:t}){A(this,Ju,t-1)}focusMainContainer(){l(this,Ga).focus()}findParent(t,e){for(const n of l(this,ei).values()){const{x:a,y:o,width:c,height:h}=n.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=o&&e<=o+h)return n}return null}disableUserSelect(t=!1){l(this,ag).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,xo).add(t)}removeShouldRescale(t){l(this,xo).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Kl.PDF_TO_CSS_UNITS;for(const n of l(this,xo))n.onScaleChanging();(e=l(this,ol))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:h}=n,d=n.toString(),m=_(this,st,Ey).call(this,n).closest(".textLayer"),b=this.getSelectionBoxes(m);if(!b)return;n.empty();const v=_(this,st,BA).call(this,m),S=l(this,$e)===Mt.NONE,C=()=>{const T=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:b,anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:h,text:d});S&&this.showAllEditors("highlight",!0,!0),e&&(T==null||T.editComment())};if(S){this.switchToMode(Mt.HIGHLIGHT,C);return}C()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!l(this,ss))return null;const e=`${If}${t}`,n=l(this,ss).getRawValue(e);return n&&l(this,ss).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&l(this,ss)&&!l(this,ss).has(t.id)&&l(this,ss).setValue(t.id,t)}a11yAlert(t,e=null){const n=l(this,rg);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,hl)&&(A(this,hl,!1),_(this,st,Sf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,Jt))if(e.div.contains(t)){A(this,Mo,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,Mo))return;const[t,e]=l(this,Mo);A(this,Mo,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){_(this,st,zA).call(this),this.setEditingState(!0)}removeEditListeners(){_(this,st,QC).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of l(this,rs))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of l(this,rs))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=l(this,Sn))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const a of l(this,Jt)){const o=a.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of l(this,rs))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Tt(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of n){const f=await a.deserialize(d);if(!f)return;o.push(f)}const c=()=>{for(const d of o)_(this,st,PA).call(this,d);_(this,st,FA).call(this,o)},h=()=>{for(const d of o)d.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(o){Tt(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,$e)!==Mt.NONE&&!this.isEditorHandlingKeyboard&&Uu._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,hl)&&(A(this,hl,!1),_(this,st,Sf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(_(this,st,$C).call(this),_(this,st,WC).call(this),_(this,st,Pi).call(this,{isEditing:l(this,$e)!==Mt.NONE,isEmpty:_(this,st,wf).call(this),hasSomethingToUndo:l(this,as).hasSomethingToUndo(),hasSomethingToRedo:l(this,as).hasSomethingToRedo(),hasSelectedEditor:!1})):(_(this,st,KC).call(this),_(this,st,ZC).call(this),_(this,st,Pi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,rs)){A(this,rs,t);for(const e of l(this,rs))_(this,st,Pa).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,bb).id}get currentLayer(){return l(this,ei).get(l(this,Ju))}getLayer(t){return l(this,ei).get(t)}get currentPageIndex(){return l(this,Ju)}addLayer(t){l(this,ei).set(t.pageIndex,t),l(this,dl)?t.enable():t.disable()}removeLayer(t){l(this,ei).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,a=!1,o=!1){var c,h,d,f,m,b;if(l(this,$e)!==t&&!(l(this,ls)&&(await l(this,ls).promise,!l(this,ls)))){if(A(this,ls,Promise.withResolvers()),(c=l(this,ol))==null||c.commitOrRemove(),l(this,$e)===Mt.POPUP&&((h=l(this,Oi))==null||h.hideSidebar()),(d=l(this,Oi))==null||d.destroyPopup(),A(this,$e,t),t===Mt.NONE){this.setEditingState(!1),_(this,st,ex).call(this);for(const v of l(this,Oe).values())v.hideStandaloneCommentButton();(f=this._editorUndoBar)==null||f.hide(),this.toggleComment(null),l(this,ls).resolve();return}for(const v of l(this,Oe).values())v.addStandaloneCommentButton();t===Mt.SIGNATURE&&await((m=l(this,pl))==null?void 0:m.loadSignatures()),this.setEditingState(!0),await _(this,st,tx).call(this),this.unselectAll();for(const v of l(this,ei).values())v.updateMode(t);if(t===Mt.POPUP){l(this,Qu)||A(this,Qu,await l(this,sh).getAnnotationsByType(new Set(l(this,rs).map(C=>C._editorType))));const v=new Set,S=[];for(const C of l(this,Oe).values()){const{annotationElementId:T,hasComment:M,deleted:x}=C;T&&v.add(T),M&&!x&&S.push(C.getData())}for(const C of l(this,Qu)){const{id:T,popupRef:M,contentsObj:x}=C;M&&(x!=null&&x.str)&&!v.has(T)&&!l(this,cl).has(T)&&S.push(C)}(b=l(this,Oi))==null||b.showSidebar(S)}if(!e){n&&this.addNewEditorFromKeyboard(),l(this,ls).resolve();return}for(const v of l(this,Oe).values())v.uid===e?(this.setSelected(v),o?v.editComment():a?v.enterInEditMode():v.focus()):v.unselect();l(this,ls).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==l(this,$e)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(l(this,rs)){switch(t){case jt.CREATE:this.currentLayer.addNewEditor(e);return;case jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,ng)||A(this,ng,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of l(this,Jt))n.updateParams(t,e);else for(const n of l(this,rs))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var o;for(const c of l(this,Oe).values())c.editorType===t&&c.show(e);(((o=l(this,ng))==null?void 0:o.get(jt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&_(this,st,Pa).call(this,[[jt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,eg)!==t){A(this,eg,t);for(const e of l(this,ei).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of l(this,Oe).values())e.pageIndex===t&&(yield e)}getEditor(t){return l(this,Oe).get(t)}addEditor(t){l(this,Oe).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(l(this,Xs)&&clearTimeout(l(this,Xs)),A(this,Xs,setTimeout(()=>{this.focusMainContainer(),A(this,Xs,null)},0))),l(this,Oe).delete(t.id),t.annotationElementId&&((e=l(this,gl))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,cl).has(t.annotationElementId))&&((n=l(this,ss))==null||n.remove(t.id))}addDeletedAnnotationElement(t){l(this,cl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,cl).has(t)}removeDeletedAnnotationElement(t){l(this,cl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,Sn)!==t&&(A(this,Sn,t),t&&_(this,st,Pa).call(this,t.propertiesToUpdate))}updateUI(t){l(this,st,ix)===t&&_(this,st,Pa).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){_(this,st,Pa).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,Jt).has(t)){l(this,Jt).delete(t),t.unselect(),_(this,st,Pi).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,Jt).add(t),t.select(),_(this,st,Pa).call(this,t.propertiesToUpdate),_(this,st,Pi).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=l(this,ol))==null||e.commitOrRemove();for(const n of l(this,Jt))n!==t&&n.unselect();l(this,Jt).clear(),l(this,Jt).add(t),t.select(),_(this,st,Pa).call(this,t.propertiesToUpdate),_(this,st,Pi).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,Jt).has(t)}get firstSelectedEditor(){return l(this,Jt).values().next().value}unselect(t){t.unselect(),l(this,Jt).delete(t),_(this,st,Pi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,Jt).size!==0}get isEnterHandled(){return l(this,Jt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,as).undo(),_(this,st,Pi).call(this,{hasSomethingToUndo:l(this,as).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_(this,st,wf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,as).redo(),_(this,st,Pi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,as).hasSomethingToRedo(),isEmpty:_(this,st,wf).call(this)})}addCommands(t){l(this,as).add(t),_(this,st,Pi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_(this,st,wf).call(this)})}cleanUndoStack(t){l(this,as).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,Jt)],n=()=>{var c;(c=this._editorUndoBar)==null||c.show(a,e.length===1?e[0].editorType:e.length);for(const h of e)h.remove()},a=()=>{for(const c of e)_(this,st,PA).call(this,c)};this.addCommands({cmd:n,undo:a,mustExec:!0})}commitOrRemove(){var t;(t=l(this,Sn))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,Sn)||this.hasSelection}selectAll(){for(const t of l(this,Jt))t.commit();_(this,st,FA).call(this,l(this,Oe).values())}unselectAll(){var t;if(!(l(this,Sn)&&(l(this,Sn).commitOrRemove(),l(this,$e)!==Mt.NONE))&&!((t=l(this,ol))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,Jt))e.unselect();l(this,Jt).clear(),_(this,st,Pi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,yl)[0]+=t,l(this,yl)[1]+=e;const[a,o]=l(this,yl),c=[...l(this,Jt)],h=1e3;l(this,$s)&&clearTimeout(l(this,$s)),A(this,$s,setTimeout(()=>{A(this,$s,null),l(this,yl)[0]=l(this,yl)[1]=0,this.addCommands({cmd:()=>{for(const d of c)l(this,Oe).has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of c)l(this,Oe).has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},h));for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Vs,new Map);for(const t of l(this,Jt))l(this,Vs).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Vs))return!1;this.disableUserSelect(!1);const t=l(this,Vs);A(this,Vs,null);let e=!1;for(const[{x:a,y:o,pageIndex:c},h]of t)h.newX=a,h.newY=o,h.newPageIndex=c,e||(e=a!==h.savedX||o!==h.savedY||c!==h.savedPageIndex);if(!e)return!1;const n=(a,o,c,h)=>{if(l(this,Oe).has(a.id)){const d=l(this,ei).get(h);d?a._setParentAndPosition(d,o,c):(a.pageIndex=h,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:h}]of t)n(a,o,c,h)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:h}]of t)n(a,o,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,Vs))for(const n of l(this,Vs).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,Jt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,Sn)===t}getActive(){return l(this,Sn)}getMode(){return l(this,$e)}isEditingMode(){return l(this,$e)!==Mt.NONE}get imageManager(){return Ct(this,"imageManager",new NA)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:a,width:o,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,m,b,v)=>({x:(m-a)/c,y:1-(f+b-n)/o,width:v/c,height:b/o});break;case"180":h=(f,m,b,v)=>({x:1-(f+b-n)/o,y:1-(m+v-a)/c,width:b/o,height:v/c});break;case"270":h=(f,m,b,v)=>({x:1-(m+v-a)/c,y:(f-n)/o,width:v/c,height:b/o});break;default:h=(f,m,b,v)=>({x:(f-n)/o,y:(m-a)/c,width:b/o,height:v/c});break}const d=[];for(let f=0,m=e.rangeCount;f<m;f++){const b=e.getRangeAt(f);if(!b.collapsed)for(const{x:v,y:S,width:C,height:T}of b.getClientRects())C===0||T===0||d.push(h(v,S,C,T))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,Zu)||A(this,Zu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,Zu))==null||e.delete(t)}renderAnnotationElement(t){var a;const e=(a=l(this,Zu))==null?void 0:a.get(t.data.id);if(!e)return;const n=l(this,ss).getRawValue(e);n&&(l(this,$e)===Mt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var o;const a=(o=l(this,gl))==null?void 0:o.get(t);a&&(a.setCanvas(e,n),l(this,gl).delete(t))}addMissingCanvas(t,e){(l(this,gl)||A(this,gl,new Map)).set(t,e)}};Ku=new WeakMap,Sn=new WeakMap,Qu=new WeakMap,Oe=new WeakMap,ei=new WeakMap,Wu=new WeakMap,ss=new WeakMap,Zu=new WeakMap,as=new WeakMap,Oi=new WeakMap,ll=new WeakMap,ol=new WeakMap,Ju=new WeakMap,cl=new WeakMap,Vs=new WeakMap,rs=new WeakMap,xo=new WeakMap,Zf=new WeakMap,Jf=new WeakMap,th=new WeakMap,tg=new WeakMap,Xs=new WeakMap,ul=new WeakMap,eh=new WeakMap,hl=new WeakMap,Ys=new WeakMap,bb=new WeakMap,dl=new WeakMap,ih=new WeakMap,eg=new WeakMap,fl=new WeakMap,Mo=new WeakMap,nh=new WeakMap,gl=new WeakMap,ig=new WeakMap,$e=new WeakMap,Jt=new WeakMap,ja=new WeakMap,pl=new WeakMap,ml=new WeakMap,ng=new WeakMap,sh=new WeakMap,sg=new WeakMap,yl=new WeakMap,$s=new WeakMap,Ga=new WeakMap,ag=new WeakMap,rg=new WeakMap,ls=new WeakMap,st=new WeakSet,Ey=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},BA=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of l(this,ei).values())if(n.hasTextLayer(t))return n;return null},VC=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=_(this,st,Ey).call(this,t).closest(".textLayer"),a=this.getSelectionBoxes(n);a&&(l(this,Ys)||A(this,Ys,new _O(this)),l(this,Ys).show(n,a,this.direction==="ltr"))},XC=function(){var o,c,h;const t=document.getSelection();if(!t||t.isCollapsed){l(this,ja)&&((o=l(this,Ys))==null||o.hide(),A(this,ja,null),_(this,st,Pi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,ja))return;const a=_(this,st,Ey).call(this,t).closest(".textLayer");if(!a){l(this,ja)&&((c=l(this,Ys))==null||c.hide(),A(this,ja,null),_(this,st,Pi).call(this,{hasSelectedText:!1}));return}if((h=l(this,Ys))==null||h.hide(),A(this,ja,e),_(this,st,Pi).call(this,{hasSelectedText:!0}),!(l(this,$e)!==Mt.HIGHLIGHT&&l(this,$e)!==Mt.NONE)&&(l(this,$e)===Mt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,hl,this.isShiftKeyDown),!this.isShiftKeyDown)){const d=l(this,$e)===Mt.HIGHLIGHT?_(this,st,BA).call(this,a):null;if(d==null||d.toggleDrawing(),l(this,ih)){const f=new AbortController,m=this.combinedSignal(f),b=v=>{v.type==="pointerup"&&v.button!==0||(f.abort(),d==null||d.toggleDrawing(!0),v.type==="pointerup"&&_(this,st,Sf).call(this,"main_toolbar"))};window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("blur",b,{signal:m})}else d==null||d.toggleDrawing(!0),_(this,st,Sf).call(this,"main_toolbar")}},Sf=function(t=""){l(this,$e)===Mt.HIGHLIGHT?this.highlightSelection(t):l(this,Zf)&&_(this,st,VC).call(this)},YC=function(){document.addEventListener("selectionchange",_(this,st,XC).bind(this),{signal:this._signal})},$C=function(){if(l(this,ul))return;A(this,ul,new AbortController);const t=this.combinedSignal(l(this,ul));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},KC=function(){var t;(t=l(this,ul))==null||t.abort(),A(this,ul,null)},zA=function(){if(l(this,fl))return;A(this,fl,new AbortController);const t=this.combinedSignal(l(this,fl));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},QC=function(){var t;(t=l(this,fl))==null||t.abort(),A(this,fl,null)},WC=function(){if(l(this,ll))return;A(this,ll,new AbortController);const t=this.combinedSignal(l(this,ll));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},ZC=function(){var t;(t=l(this,ll))==null||t.abort(),A(this,ll,null)},JC=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Pi=function(t){Object.entries(t).some(([n,a])=>l(this,sg)[n]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,sg),t)}),l(this,$e)===Mt.HIGHLIGHT&&t.hasSelectedEditor===!1&&_(this,st,Pa).call(this,[[jt.HIGHLIGHT_FREE,!0]]))},Pa=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},tx=async function(){if(!l(this,dl)){A(this,dl,!0);const t=[];for(const e of l(this,ei).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,Oe).values())e.enable()}},ex=function(){if(this.unselectAll(),l(this,dl)){A(this,dl,!1);for(const t of l(this,ei).values())t.disable();for(const t of l(this,Oe).values())t.disable()}},PA=function(t){const e=l(this,ei).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},ix=function(){let t=null;for(t of l(this,Jt));return t},wf=function(){if(l(this,Oe).size===0)return!0;if(l(this,Oe).size===1)for(const t of l(this,Oe).values())return t.isEmpty();return!1},FA=function(t){for(const e of l(this,Jt))e.unselect();l(this,Jt).clear();for(const e of t)e.isEmpty()||(l(this,Jt).add(e),e.select());_(this,st,Pi).call(this,{hasSelectedEditor:this.hasSelection})},tt(Uu,"TRANSLATE_SMALL",1),tt(Uu,"TRANSLATE_BIG",10);let Uc=Uu;var ri,Ks,Es,ah,Qs,wn,rh,Ws,en,qa,Ro,Zs,bl,Bs,Ef,_y;const Fi=class Fi{constructor(t){E(this,Bs);E(this,ri,null);E(this,Ks,!1);E(this,Es,null);E(this,ah,null);E(this,Qs,null);E(this,wn,null);E(this,rh,!1);E(this,Ws,null);E(this,en,null);E(this,qa,null);E(this,Ro,null);E(this,Zs,!1);A(this,en,t),A(this,Zs,t._uiManager.useNewAltTextFlow),l(Fi,bl)||A(Fi,bl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Fi._l10n??(Fi._l10n=t)}async render(){const t=A(this,Es,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,ah,document.createElement("span"));t.append(e),l(this,Zs)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(Fi,bl).missing),e.setAttribute("data-l10n-id",l(Fi,bl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,en)._uiManager._signal;t.addEventListener("contextmenu",ms,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),l(this,en)._uiManager.editAltText(l(this,en)),l(this,Zs)&&l(this,en)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Bs,Ef)}})};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,rh,!0),a(o))},{signal:n}),await _(this,Bs,_y).call(this),t}finish(){l(this,Es)&&(l(this,Es).focus({focusVisible:l(this,rh)}),A(this,rh,!1))}isEmpty(){return l(this,Zs)?l(this,ri)===null:!l(this,ri)&&!l(this,Ks)}hasData(){return l(this,Zs)?l(this,ri)!==null||!!l(this,qa):this.isEmpty()}get guessedText(){return l(this,qa)}async setGuessedText(t){l(this,ri)===null&&(A(this,qa,t),A(this,Ro,await Fi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),_(this,Bs,_y).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,Zs)||l(this,ri)){(e=l(this,Ws))==null||e.remove(),A(this,Ws,null);return}if(!l(this,Ws)){const n=A(this,Ws,document.createElement("div"));n.className="noAltTextBadge",l(this,en).div.append(n)}l(this,Ws).classList.toggle("hidden",!t)}serialize(t){let e=l(this,ri);return!t&&l(this,qa)===e&&(e=l(this,Ro)),{altText:e,decorative:l(this,Ks),guessedText:l(this,qa),textWithDisclaimer:l(this,Ro)}}get data(){return{altText:l(this,ri),decorative:l(this,Ks)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:a,cancel:o=!1}){n&&(A(this,qa,n),A(this,Ro,a)),!(l(this,ri)===t&&l(this,Ks)===e)&&(o||(A(this,ri,t),A(this,Ks,e)),_(this,Bs,_y).call(this))}toggle(t=!1){l(this,Es)&&(!t&&l(this,wn)&&(clearTimeout(l(this,wn)),A(this,wn,null)),l(this,Es).disabled=!t)}shown(){l(this,en)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Bs,Ef)}})}destroy(){var t,e;(t=l(this,Es))==null||t.remove(),A(this,Es,null),A(this,ah,null),A(this,Qs,null),(e=l(this,Ws))==null||e.remove(),A(this,Ws,null)}};ri=new WeakMap,Ks=new WeakMap,Es=new WeakMap,ah=new WeakMap,Qs=new WeakMap,wn=new WeakMap,rh=new WeakMap,Ws=new WeakMap,en=new WeakMap,qa=new WeakMap,Ro=new WeakMap,Zs=new WeakMap,bl=new WeakMap,Bs=new WeakSet,Ef=function(){return l(this,ri)&&"added"||l(this,ri)===null&&this.guessedText&&"review"||"missing"},_y=async function(){var a,o,c;const t=l(this,Es);if(!t)return;if(l(this,Zs)){if(t.classList.toggle("done",!!l(this,ri)),t.setAttribute("data-l10n-id",l(Fi,bl)[l(this,Bs,Ef)]),(a=l(this,ah))==null||a.setAttribute("data-l10n-id",l(Fi,bl)[`${l(this,Bs,Ef)}-label`]),!l(this,ri)){(o=l(this,Qs))==null||o.remove();return}}else{if(!l(this,ri)&&!l(this,Ks)){t.classList.remove("done"),(c=l(this,Qs))==null||c.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,Qs);if(!e){A(this,Qs,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,en).id}`;const h=100,d=l(this,en)._uiManager._signal;d.addEventListener("abort",()=>{clearTimeout(l(this,wn)),A(this,wn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,wn,setTimeout(()=>{A(this,wn,null),l(this,Qs).classList.add("show"),l(this,en)._reportTelemetry({action:"alt_text_tooltip"})},h))},{signal:d}),t.addEventListener("mouseleave",()=>{var f;l(this,wn)&&(clearTimeout(l(this,wn)),A(this,wn,null)),(f=l(this,Qs))==null||f.classList.remove("show")},{signal:d})}l(this,Ks)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,ri)),e.parentNode||t.append(e);const n=l(this,en).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},E(Fi,bl,null),tt(Fi,"_l10n",null);let nb=Fi;var vi,os,Do,me,lg,Lo,_s,Oo,No,ko,og,UA;class cy{constructor(t){E(this,og);E(this,vi,null);E(this,os,null);E(this,Do,!1);E(this,me,null);E(this,lg,null);E(this,Lo,null);E(this,_s,null);E(this,Oo,null);E(this,No,!1);E(this,ko,null);A(this,me,t)}renderForToolbar(){const t=A(this,os,document.createElement("button"));return t.className="comment",_(this,og,UA).call(this,t,!1)}renderForStandalone(){const t=A(this,vi,document.createElement("button"));t.className="annotationCommentButton";const e=l(this,me).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(l(this,me)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=l(this,me).commentButtonColor;a&&(n.backgroundColor=a)}return _(this,og,UA).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=l(this,vi)??l(this,os))==null||t.focus()},0)}onUpdatedColor(){if(!l(this,vi))return;const t=l(this,me).commentButtonColor;t&&(l(this,vi).style.backgroundColor=t),l(this,me)._uiManager.updatePopupColor(l(this,me))}get commentButtonWidth(){var t;return(((t=l(this,vi))==null?void 0:t.getBoundingClientRect().width)??0)/l(this,me).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,ko))return l(this,ko);if(!l(this,vi))return null;const{x:t,y:e,height:n}=l(this,vi).getBoundingClientRect(),{x:a,y:o,width:c,height:h}=l(this,me).parent.boundingClientRect;return[(t-a)/c,(e+n-o)/h]}set commentPopupPositionInLayer(t){A(this,ko,t)}hasDefaultPopupPosition(){return l(this,ko)===null}removeStandaloneCommentButton(){var t;(t=l(this,vi))==null||t.remove(),A(this,vi,null)}removeToolbarCommentButton(){var t;(t=l(this,os))==null||t.remove(),A(this,os,null)}setCommentButtonStates({selected:t,hasPopup:e}){l(this,vi)&&(l(this,vi).classList.toggle("selected",t),l(this,vi).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,a;if(e)[n,a]=e;else{[n,a]=l(this,me).commentButtonPosition;const{width:m,height:b,x:v,y:S}=l(this,me);n=v+n*m,a=S+a*b}const o=l(this,me).parent.boundingClientRect,{x:c,y:h,width:d,height:f}=o;l(this,me)._uiManager.editComment(l(this,me),c+n*d,h+a*f,{...t,parentDimensions:o})}finish(){l(this,os)&&(l(this,os).focus({focusVisible:l(this,Do)}),A(this,Do,!1))}isDeleted(){return l(this,No)||l(this,_s)===""}isEmpty(){return l(this,_s)===null}hasBeenEdited(){return this.isDeleted()||l(this,_s)!==l(this,lg)}serialize(){return this.data}get data(){return{text:l(this,_s),richText:l(this,Lo),date:l(this,Oo),deleted:this.isDeleted()}}set data(t){if(t!==l(this,_s)&&A(this,Lo,null),t===null){A(this,_s,""),A(this,No,!0);return}A(this,_s,t),A(this,Oo,new Date),A(this,No,!1)}setInitialText(t,e=null){A(this,lg,t),this.data=t,A(this,Oo,null),A(this,Lo,e)}shown(){}destroy(){var t,e;(t=l(this,os))==null||t.remove(),A(this,os,null),(e=l(this,vi))==null||e.remove(),A(this,vi,null),A(this,_s,""),A(this,Lo,null),A(this,Oo,null),A(this,me,null),A(this,Do,!1),A(this,No,!1)}}vi=new WeakMap,os=new WeakMap,Do=new WeakMap,me=new WeakMap,lg=new WeakMap,Lo=new WeakMap,_s=new WeakMap,Oo=new WeakMap,No=new WeakMap,ko=new WeakMap,og=new WeakSet,UA=function(t,e){if(!l(this,me)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[l(this,me)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=l(this,me)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",ms,{signal:n}),e&&(t.addEventListener("focusin",o=>{l(this,me)._focusEventsAllowed=!1,Pe(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{l(this,me)._focusEventsAllowed=!0,Pe(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const a=o=>{o.preventDefault(),t===l(this,os)?this.edit():l(this,me).toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,Do,!0),a(o))},{signal:n}),t.addEventListener("pointerenter",()=>{l(this,me).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{l(this,me).toggleComment(!1,!1)},{signal:n}),t};var lh,Bo,cg,ug,hg,dg,fg,Va,zo,Xa,Po,Ya,Ql,nx,sx,ax;const pw=class pw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:c=null,signal:h}){E(this,Ql);E(this,lh);E(this,Bo,!1);E(this,cg,null);E(this,ug);E(this,hg);E(this,dg);E(this,fg);E(this,Va,null);E(this,zo);E(this,Xa,null);E(this,Po);E(this,Ya,null);A(this,lh,t),A(this,cg,n),A(this,ug,e),A(this,hg,a),A(this,dg,o),A(this,fg,c),A(this,Po,new AbortController),A(this,zo,AbortSignal.any([h,l(this,Po).signal])),t.addEventListener("touchstart",_(this,Ql,nx).bind(this),{passive:!1,signal:l(this,zo)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ga.pixelRatio}destroy(){var t,e;(t=l(this,Po))==null||t.abort(),A(this,Po,null),(e=l(this,Va))==null||e.abort(),A(this,Va,null)}};lh=new WeakMap,Bo=new WeakMap,cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,dg=new WeakMap,fg=new WeakMap,Va=new WeakMap,zo=new WeakMap,Xa=new WeakMap,Po=new WeakMap,Ya=new WeakMap,Ql=new WeakSet,nx=function(t){var a,o,c;if((a=l(this,ug))!=null&&a.call(this))return;if(t.touches.length===1){if(l(this,Va))return;const h=A(this,Va,new AbortController),d=AbortSignal.any([l(this,zo),h.signal]),f=l(this,lh),m={capture:!0,signal:d,passive:!1},b=v=>{var S;v.pointerType==="touch"&&((S=l(this,Va))==null||S.abort(),A(this,Va,null))};f.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(Pe(v),b(v))},m),f.addEventListener("pointerup",b,m),f.addEventListener("pointercancel",b,m);return}if(!l(this,Ya)){A(this,Ya,new AbortController);const h=AbortSignal.any([l(this,zo),l(this,Ya).signal]),d=l(this,lh),f={signal:h,capture:!1,passive:!1};d.addEventListener("touchmove",_(this,Ql,sx).bind(this),f);const m=_(this,Ql,ax).bind(this);d.addEventListener("touchend",m,f),d.addEventListener("touchcancel",m,f),f.capture=!0,d.addEventListener("pointerdown",Pe,f),d.addEventListener("pointermove",Pe,f),d.addEventListener("pointercancel",Pe,f),d.addEventListener("pointerup",Pe,f),(o=l(this,hg))==null||o.call(this)}if(Pe(t),t.touches.length!==2||(c=l(this,cg))!=null&&c.call(this)){A(this,Xa,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),A(this,Xa,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},sx=function(t){var O;if(!l(this,Xa)||t.touches.length!==2)return;Pe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:a,screenY:o}=e,{screenX:c,screenY:h}=n,d=l(this,Xa),{touch0X:f,touch0Y:m,touch1X:b,touch1Y:v}=d,S=b-f,C=v-m,T=c-a,M=h-o,x=Math.hypot(T,M)||1,L=Math.hypot(S,C)||1;if(!l(this,Bo)&&Math.abs(L-x)<=pw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=c,d.touch1Y=h,!l(this,Bo)){A(this,Bo,!0);return}const R=[(a+c)/2,(o+h)/2];(O=l(this,dg))==null||O.call(this,R,L,x)},ax=function(t){var e;t.touches.length>=2||(l(this,Ya)&&(l(this,Ya).abort(),A(this,Ya,null),(e=l(this,fg))==null||e.call(this)),l(this,Xa)&&(Pe(t),A(this,Xa,null),A(this,Bo,!1)))};let sb=pw;var Fo,Ts,_e,he,$a,oh,vl,gg,Ai,Uo,Ka,cs,Al,pg,Ho,En,mg,Io,Qa,Js,ch,uh,us,jo,yg,vb,At,HA,bg,IA,Ty,rx,lx,jA,Cy,GA,ox,cx,ux,qA,hx,VA,dx,fx,gx,XA,_f;const xt=class xt{constructor(t){E(this,At);E(this,Fo,null);E(this,Ts,null);E(this,_e,null);E(this,he,null);E(this,$a,null);E(this,oh,!1);E(this,vl,null);E(this,gg,"");E(this,Ai,null);E(this,Uo,null);E(this,Ka,null);E(this,cs,null);E(this,Al,null);E(this,pg,"");E(this,Ho,!1);E(this,En,null);E(this,mg,!1);E(this,Io,!1);E(this,Qa,!1);E(this,Js,null);E(this,ch,0);E(this,uh,0);E(this,us,null);E(this,jo,null);tt(this,"isSelected",!1);tt(this,"_isCopy",!1);tt(this,"_editToolbar",null);tt(this,"_initialOptions",Object.create(null));tt(this,"_initialData",null);tt(this,"_isVisible",!0);tt(this,"_uiManager",null);tt(this,"_focusEventsAllowed",!0);E(this,yg,!1);E(this,vb,xt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[o,c];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=xt.prototype._resizeWithKeyboard,e=Uc.TRANSLATE_SMALL,n=Uc.TRANSLATE_BIG;return Ct(this,"_resizerKeyboardManager",new jp([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],xt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ct(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new xO({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(xt._l10n??(xt._l10n=t),xt._l10nResizer||(xt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),xt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);xt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,yg)}set _isDraggable(t){var e;A(this,yg,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,vb)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(_(this,At,_f).call(this),(e=l(this,cs))==null||e.remove(),A(this,cs,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Ho)?A(this,Ho,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,a){const[o,c]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(t+n)/o,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,a]=this.parentDimensions;this.setAt(t*n,e*a,this.width*n,this.height*a),this._onTranslated()}translate(t,e){_(this,At,HA).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,En)||A(this,En,[this.x,this.y,this.width,this.height]),_(this,At,HA).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,En)||A(this,En,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[d,f]=this.getBaseTranslation();c+=d,h+=f;const{style:m}=n;m.left=`${(100*c).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,En)&&(l(this,En)[0]!==this.x||l(this,En)[1]!==this.y)}get _hasBeenResized(){return!!l(this,En)&&(l(this,En)[2]!==this.width||l(this,En)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=xt,a=n/t,o=n/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,a]}=this;let{x:o,y:c,width:h,height:d}=this;if(h*=n,d*=a,o*=n,c*=a,this._mustFixPosition)switch(t){case 0:o=Gi(o,0,n-h),c=Gi(c,0,a-d);break;case 90:o=Gi(o,0,n-d),c=Gi(c,h,a);break;case 180:o=Gi(o,h,n),c=Gi(c,d,a);break;case 270:o=Gi(o,d,n),c=Gi(c,0,a-h);break}this.x=o/=n,this.y=c/=a;const[f,m]=this.getBaseTranslation();o+=f,c+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return _(n=xt,bg,IA).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return _(n=xt,bg,IA).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,_e))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Io))return this._editToolbar;this._editToolbar=new LA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=l(this,_e))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,_e)||(nb.initialize(xt._l10n),A(this,_e,new nb(this)),l(this,Fo)&&(l(this,_e).data=l(this,Fo),A(this,Fo,null))),l(this,_e)}get altTextData(){var t;return(t=l(this,_e))==null?void 0:t.data}set altTextData(t){l(this,_e)&&(l(this,_e).data=t)}get guessedAltText(){var t;return(t=l(this,_e))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,_e))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,_e))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,_e)&&!l(this,_e).isEmpty()}hasAltTextData(){var t;return((t=l(this,_e))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=l(this,he))==null||t.focusButton()}addCommentButton(){return this.canAddComment?l(this,he)||A(this,he,new cy(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,$a)){this._uiManager.isEditingMode()&&l(this,$a).classList.remove("hidden");return}this.hasComment&&(A(this,$a,l(this,he).renderForStandalone()),this.div.append(l(this,$a)))}}removeStandaloneCommentButton(){l(this,he).removeStandaloneCommentButton(),A(this,$a,null)}hideStandaloneCommentButton(){var t;(t=l(this,$a))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:a}}=l(this,he);return{text:e,richText:t,date:n,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){l(this,he)||A(this,he,new cy(this)),l(this,he).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(l(this,he)||A(this,he,new cy(this)),l(this,he).setInitialText(t,n),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){var t;return(t=l(this,he))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=l(this,he))==null?void 0:t.isDeleted()}get hasComment(){return!!l(this,he)&&!l(this,he).isEmpty()&&!l(this,he).isDeleted()}async editComment(t){l(this,he)||A(this,he,new cy(this)),l(this,he).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){l(this,he).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,h=c+o+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){l(this,he).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var c;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,oh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),_(this,At,VA).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),GC(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,jo)||A(this,jo,new sb({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:_(this,At,ox).bind(this),onPinching:_(this,At,cx).bind(this),onPinchEnd:_(this,At,ux).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(c=this._uiManager._editorUndoBar)==null||c.hide(),t}pointerdown(t){const{isMac:e}=xi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,Ho,!0),this._isDraggable){_(this,At,hx).call(this,t);return}_(this,At,qA).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Js)&&clearTimeout(l(this,Js)),A(this,Js,setTimeout(()=>{var t;A(this,Js,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,m=e/a,b=this.x*o,v=this.y*c,S=this.width*o,C=this.height*c;switch(n){case 0:return[b+f+h,c-v-m-C+d,b+f+S+h,c-v-m+d];case 90:return[b+m+h,c-v+f+d,b+m+C+h,c-v+f+S+d];case 180:return[b-f-S+h,c-v+m+d,b-f+h,c-v+m+C+d];case 270:return[b-m-C+h,c-v-f-S+d,b-m+h,c-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,a,o,c]=t,h=o-n,d=c-a;switch(this.rotation){case 0:return[n,e-c,h,d];case 90:return[n,e-a,d,h];case 180:return[o,e-a,h,d];case 270:return[o,e-c,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&xt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=l(this,he))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:a,deleted:o,richText:c},uid:h,pageIndex:d,creationDate:f,modificationDate:m}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:n||m,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,Io,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,Io,!1),!0):!1}isInEditMode(){return l(this,Io)}shouldGetKeyboardEvents(){return l(this,Qa)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return e<c&&a>0&&t<o&&n>0}rebuild(){_(this,At,VA).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,A(a,Fo,t.accessibilityData),a._isCopy=t.isCopy||!1;const[o,c]=a.pageDimensions,[h,d,f,m]=a.getRectInCurrentCoords(t.rect,c);return a.x=h/o,a.y=d/c,a.width=f/o,a.height=m/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=l(this,Al))==null||t.abort(),A(this,Al,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,Js)&&(clearTimeout(l(this,Js)),A(this,Js,null)),_(this,At,_f).call(this),this.removeEditToolbar(),l(this,us)){for(const a of l(this,us).values())clearTimeout(a);A(this,us,null)}this.parent=null,(e=l(this,jo))==null||e.destroy(),A(this,jo,null),(n=l(this,cs))==null||n.remove(),A(this,cs,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(_(this,At,rx).call(this),l(this,Ai).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,a,o,c]=this.getPDFRect();return[xt._round(n+(o-n)*t),xt._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,he).commentPopupPositionInLayer}set commentPopupPosition(t){l(this,he).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return l(this,he).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,he).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=l(this,he))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Ka,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,Ai).children;if(!l(this,Ts)){A(this,Ts,Array.from(e));const c=_(this,At,dx).bind(this),h=_(this,At,fx).bind(this),d=this._uiManager._signal;for(const f of l(this,Ts)){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",_(this,At,gx).bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",xt._l10nResizer[m])}}const n=l(this,Ts)[0];let a=0;for(const c of e){if(c===n)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ts).length/4);if(o!==a){if(o<a)for(let h=0;h<a-o;h++)l(this,Ai).append(l(this,Ai).firstElementChild);else if(o>a)for(let h=0;h<o-a;h++)l(this,Ai).firstElementChild.before(l(this,Ai).lastElementChild);let c=0;for(const h of e){const f=l(this,Ts)[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",xt._l10nResizer[f])}}_(this,At,XA).call(this,0),A(this,Qa,!0),l(this,Ai).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Qa)&&_(this,At,GA).call(this,l(this,pg),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){_(this,At,_f).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var a,o;(a=this.div)!=null&&a.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(n=l(this,_e))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,a,o;this.isSelected&&(this.isSelected=!1,(t=l(this,Ai))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(a=this._editToolbar)==null||a.hide(),(o=l(this,_e))==null||o.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,mg)}set isEditing(t){A(this,mg,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,us)||A(this,us,new Map);const{action:n}=t;let a=l(this,us).get(n);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),l(this,us).delete(n),l(this,us).size===0&&A(this,us,null)},xt._telemetryTimeout),l(this,us).set(n,a);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,oh,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,oh,!0)}updateFakeAnnotationElement(t){if(!l(this,cs)&&!this.deleted){A(this,cs,t.addFakeAnnotation(this));return}if(this.deleted){l(this,cs).remove(),A(this,cs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,cs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Fo=new WeakMap,Ts=new WeakMap,_e=new WeakMap,he=new WeakMap,$a=new WeakMap,oh=new WeakMap,vl=new WeakMap,gg=new WeakMap,Ai=new WeakMap,Uo=new WeakMap,Ka=new WeakMap,cs=new WeakMap,Al=new WeakMap,pg=new WeakMap,Ho=new WeakMap,En=new WeakMap,mg=new WeakMap,Io=new WeakMap,Qa=new WeakMap,Js=new WeakMap,ch=new WeakMap,uh=new WeakMap,us=new WeakMap,jo=new WeakMap,yg=new WeakMap,vb=new WeakMap,At=new WeakSet,HA=function([t,e],n,a){[n,a]=this.screenToPageTranslation(n,a),this.x+=n/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},bg=new WeakSet,IA=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Ty=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},rx=function(){if(l(this,Ai))return;A(this,Ai,document.createElement("div")),l(this,Ai).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const a=document.createElement("div");l(this,Ai).append(a),a.classList.add("resizer",n),a.setAttribute("data-resizer-name",n),a.addEventListener("pointerdown",_(this,At,lx).bind(this,n),{signal:e}),a.addEventListener("contextmenu",ms,{signal:e}),a.tabIndex=-1}this.div.prepend(l(this,Ai))},lx=function(t,e){var m;e.preventDefault();const{isMac:n}=xi.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=l(this,_e))==null||m.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,A(this,Uo,[e.screenX,e.screenY]);const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",_(this,At,GA).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",Pe,{passive:!1,signal:c}),window.addEventListener("contextmenu",ms,{signal:c}),A(this,Ka,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{var b;o.abort(),this.parent.togglePointerEvents(!0),(b=l(this,_e))==null||b.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,_(this,At,Cy).call(this)};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})},jA=function(t,e,n,a){this.width=n,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Cy=function(){if(!l(this,Ka))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:a}=l(this,Ka);A(this,Ka,null);const o=this.x,c=this.y,h=this.width,d=this.height;o===t&&c===e&&h===n&&d===a||this.addCommands({cmd:_(this,At,jA).bind(this,o,c,h,d),undo:_(this,At,jA).bind(this,t,e,n,a),mustExec:!0})},GA=function(t,e){const[n,a]=this.parentDimensions,o=this.x,c=this.y,h=this.width,d=this.height,f=xt.MIN_SIZE/n,m=xt.MIN_SIZE/a,b=_(this,At,Ty).call(this,this.rotation),v=(H,X)=>[b[0]*H+b[2]*X,b[1]*H+b[3]*X],S=_(this,At,Ty).call(this,360-this.rotation),C=(H,X)=>[S[0]*H+S[2]*X,S[1]*H+S[3]*X];let T,M,x=!1,L=!1;switch(t){case"topLeft":x=!0,T=(H,X)=>[0,0],M=(H,X)=>[H,X];break;case"topMiddle":T=(H,X)=>[H/2,0],M=(H,X)=>[H/2,X];break;case"topRight":x=!0,T=(H,X)=>[H,0],M=(H,X)=>[0,X];break;case"middleRight":L=!0,T=(H,X)=>[H,X/2],M=(H,X)=>[0,X/2];break;case"bottomRight":x=!0,T=(H,X)=>[H,X],M=(H,X)=>[0,0];break;case"bottomMiddle":T=(H,X)=>[H/2,X],M=(H,X)=>[H/2,0];break;case"bottomLeft":x=!0,T=(H,X)=>[0,X],M=(H,X)=>[H,0];break;case"middleLeft":L=!0,T=(H,X)=>[0,X/2],M=(H,X)=>[H,X/2];break}const R=T(h,d),O=M(h,d);let N=v(...O);const B=xt._round(o+N[0]),F=xt._round(c+N[1]);let W=1,Z=1,it,et;if(e.fromKeyboard)({deltaX:it,deltaY:et}=e);else{const{screenX:H,screenY:X}=e,[at,St]=l(this,Uo);[it,et]=this.screenToPageTranslation(H-at,X-St),l(this,Uo)[0]=H,l(this,Uo)[1]=X}if([it,et]=C(it/n,et/a),x){const H=Math.hypot(h,d);W=Z=Math.max(Math.min(Math.hypot(O[0]-R[0]-it,O[1]-R[1]-et)/H,1/h,1/d),f/h,m/d)}else L?W=Gi(Math.abs(O[0]-R[0]-it),f,1)/h:Z=Gi(Math.abs(O[1]-R[1]-et),m,1)/d;const rt=xt._round(h*W),yt=xt._round(d*Z);N=v(...M(rt,yt));const gt=B-N[0],wt=F-N[1];l(this,En)||A(this,En,[this.x,this.y,this.width,this.height]),this.width=rt,this.height=yt,this.x=gt,this.y=wt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ox=function(){var t;A(this,Ka,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,_e))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},cx=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const c=_(this,At,Ty).call(this,this.rotation),h=(B,F)=>[c[0]*B+c[2]*F,c[1]*B+c[3]*F],[d,f]=this.parentDimensions,m=this.x,b=this.y,v=this.width,S=this.height,C=xt.MIN_SIZE/d,T=xt.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/S),C/v,T/S);const M=xt._round(v*o),x=xt._round(S*o);if(M===v&&x===S)return;l(this,En)||A(this,En,[m,b,v,S]);const L=h(v/2,S/2),R=xt._round(m+L[0]),O=xt._round(b+L[1]),N=h(M/2,x/2);this.x=R-N[0],this.y=O-N[1],this.width=M,this.height=x,this.setDims(),this.fixAndSetPosition(),this._onResizing()},ux=function(){var t;(t=l(this,_e))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),_(this,At,Cy).call(this)},qA=function(t){const{isMac:e}=xi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},hx=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:o},h=f=>{a.abort(),A(this,vl,null),A(this,Ho,!1),this._uiManager.endDragSession()||_(this,At,qA).call(this,f),n&&this._onStopDragging()};e&&(A(this,ch,t.clientX),A(this,uh,t.clientY),A(this,vl,t.pointerId),A(this,gg,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:b,pointerId:v}=f;if(v!==l(this,vl)){Pe(f);return}const[S,C]=this.screenToPageTranslation(m-l(this,ch),b-l(this,uh));A(this,ch,m),A(this,uh,b),this._uiManager.dragSelectedEditors(S,C)},c),window.addEventListener("touchmove",Pe,c),window.addEventListener("pointerdown",f=>{f.pointerType===l(this,gg)&&(l(this,jo)||f.isPrimary)&&h(f),Pe(f)},c));const d=f=>{if(!l(this,vl)||l(this,vl)===f.pointerId){h(f);return}Pe(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},VA=function(){if(l(this,Al)||!this.div)return;A(this,Al,new AbortController);const t=this._uiManager.combinedSignal(l(this,Al));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},dx=function(t){xt._resizerKeyboardManager.exec(this,t)},fx=function(t){var e;l(this,Qa)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,Ai)&&_(this,At,_f).call(this)},gx=function(t){A(this,pg,l(this,Qa)?t:"")},XA=function(t){if(l(this,Ts))for(const e of l(this,Ts))e.tabIndex=t},_f=function(){A(this,Qa,!1),_(this,At,XA).call(this,-1),_(this,At,Cy).call(this)},E(xt,bg),tt(xt,"_l10n",null),tt(xt,"_l10nResizer",null),tt(xt,"_borderLineWidth",-1),tt(xt,"_colorManager",new kA),tt(xt,"_zIndex",1),tt(xt,"_telemetryTimeout",1e3);let ye=xt;class xO extends ye{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const qT=3285377520,ts=4294901760,Gs=65535;class px{constructor(t){this.h1=t?t&4294967295:qT,this.h2=t?t&4294967295:qT}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let T=0,M=t.length;T<M;T++){const x=t.charCodeAt(T);x<=255?e[n++]=x:(e[n++]=x>>>8,e[n++]=x&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=n>>2,o=n-a*4,c=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,m=this.h2;const b=3432918353,v=461845907,S=b&Gs,C=v&Gs;for(let T=0;T<a;T++)T&1?(h=c[T],h=h*b&ts|h*S&Gs,h=h<<15|h>>>17,h=h*v&ts|h*C&Gs,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[T],d=d*b&ts|d*S&Gs,d=d<<15|d>>>17,d=d*v&ts|d*C&Gs,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,o){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*b&ts|h*S&Gs,h=h<<15|h>>>17,h=h*v&ts|h*C&Gs,a&1?f^=h:m^=h}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ts|t*36045&Gs,e=e*4283543511&ts|((e<<16|t>>>16)*2950163797&ts)>>>16,t^=e>>>1,t=t*444984403&ts|t*60499&Gs,e=e*3301882366&ts|((e<<16|t>>>16)*3120437893&ts)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const YA=Object.freeze({map:null,hash:"",transfer:void 0});var Go,qo,Wa,Si,Ab,mx;class lw{constructor(){E(this,Ab);E(this,Go,!1);E(this,qo,null);E(this,Wa,null);E(this,Si,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=l(this,Si).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return l(this,Si).get(t)}remove(t){const e=l(this,Si).get(t);if(e!==void 0&&(e instanceof ye&&l(this,Wa).delete(e.annotationElementId),l(this,Si).delete(t),l(this,Si).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of l(this,Si).values())if(n instanceof ye)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=l(this,Si).get(t);let a=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(a=!0,n[o]=c);else a=!0,l(this,Si).set(t,e);a&&_(this,Ab,mx).call(this),e instanceof ye&&((l(this,Wa)||A(this,Wa,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return l(this,Si).has(t)}get size(){return l(this,Si).size}resetModified(){l(this,Go)&&(A(this,Go,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new yx(this)}get serializable(){if(l(this,Si).size===0)return YA;const t=new Map,e=new px,n=[],a=Object.create(null);let o=!1;for(const[c,h]of l(this,Si)){const d=h instanceof ye?h.serialize(!1,a):h;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),o||(o=!!d.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:YA}get editorStats(){let t=null;const e=new Map;let n=0,a=0;for(const o of l(this,Si).values()){if(!(o instanceof ye)){o.popup&&(o.popup.deleted?a+=1:n+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(n+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:h}=c;e.has(h)||e.set(h,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const d=t[h]||(t[h]=new Map);for(const[f,m]of Object.entries(c)){if(f==="type")continue;let b=d.get(f);b||(b=new Map,d.set(f,b));const v=b.get(m)??0;b.set(m,v+1)}}if((a>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:a,edited:n}),!t)return null;for(const[o,c]of e)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){A(this,qo,null)}updateEditor(t,e){var a;const n=(a=l(this,Wa))==null?void 0:a.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=l(this,Wa))==null?void 0:e.get(t))||null}get modifiedIds(){if(l(this,qo))return l(this,qo);const t=[];if(l(this,Wa))for(const e of l(this,Wa).values())e.serialize()&&t.push(e.annotationElementId);return A(this,qo,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,Si).entries()}}Go=new WeakMap,qo=new WeakMap,Wa=new WeakMap,Si=new WeakMap,Ab=new WeakSet,mx=function(){l(this,Go)||(A(this,Go,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var vg;class yx extends lw{constructor(e){super();E(this,vg);const{map:n,hash:a,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);A(this,vg,{map:c,hash:a,transfer:o})}get print(){ge("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,vg)}get modifiedIds(){return Ct(this,"modifiedIds",{ids:new Set,hash:""})}}vg=new WeakMap;var hh;class MO{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){E(this,hh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,hh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||l(this,hh).has(t.loadedName))){if(Gt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:c}=t,h=new FontFace(a,o,c);this.addNativeFontFace(h);try{await h.load(),l(this,hh).add(a),n==null||n(t)}catch{Tt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(a){throw Tt(`Failed to load font '${n.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const a=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ct(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ct(this,"isSyncFontLoadingSupported",ji||xi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Gt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,a={done:!1,complete:e,callback:t};return n.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ct(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(O,N){return O.charCodeAt(N)<<24|O.charCodeAt(N+1)<<16|O.charCodeAt(N+2)<<8|O.charCodeAt(N+3)&255}function a(O,N,B,F){const W=O.substring(0,N),Z=O.substring(N+B);return W+F+Z}let o,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function m(O,N){if(++f>30){Tt("Load test font never loaded."),N();return}if(d.font="30px "+O,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(m.bind(null,O,N))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,b.length,b);const C=16,T=1482184792;let M=n(v,C);for(o=0,c=b.length-3;o<c;o+=4)M=M-T+n(b,o)|0;o<b.length&&(M=M-T+n(b+"XXX",o)|0),v=a(v,C,4,oO(M));const x=`url(data:font/opentype;base64,${btoa(v)});`,L=`@font-face {font-family:"${b}";src:${x}}`;this.insertRule(L);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const O of[t.loadedName,b]){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=O,R.append(N)}this._document.body.append(R),m(b,()=>{R.remove(),e.complete()})}}hh=new WeakMap;var ae;class RO{constructor(t,e=null,n,a){E(this,ae);this.compiledGlyphs=Object.create(null),A(this,ae,t),this._inspectFont=e,n&&Object.assign(this,n),a&&(this.charProcOperatorList=a)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${kC(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let a;try{a=t.get(n)}catch(c){Tt(`getPathGenerator - ignoring character: "${c}".`)}const o=PC(a);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return l(this,ae).black}get bold(){return l(this,ae).bold}get disableFontFace(){return l(this,ae).disableFontFace??!1}set disableFontFace(t){Ct(this,"disableFontFace",!!t)}get fontExtraProperties(){return l(this,ae).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,ae).isInvalidPDFjsFont}get isType3Font(){return l(this,ae).isType3Font}get italic(){return l(this,ae).italic}get missingFile(){return l(this,ae).missingFile}get remeasure(){return l(this,ae).remeasure}get vertical(){return l(this,ae).vertical}get ascent(){return l(this,ae).ascent}get defaultWidth(){return l(this,ae).defaultWidth}get descent(){return l(this,ae).descent}get bbox(){return l(this,ae).bbox}set bbox(t){Ct(this,"bbox",t)}get fontMatrix(){return l(this,ae).fontMatrix}get fallbackName(){return l(this,ae).fallbackName}get loadedName(){return l(this,ae).loadedName}get mimetype(){return l(this,ae).mimetype}get name(){return l(this,ae).name}get data(){return l(this,ae).data}clearData(){l(this,ae).clearData()}get cssFontInfo(){return l(this,ae).cssFontInfo}get systemFontInfo(){return l(this,ae).systemFontInfo}get defaultVMetrics(){return l(this,ae).defaultVMetrics}}ae=new WeakMap;var dh,fh,Ag,gh,xy;const Hu=class Hu{constructor(t){E(this,gh);E(this,dh);E(this,fh);E(this,Ag);A(this,dh,t),A(this,fh,new DataView(l(this,dh))),A(this,Ag,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let a=0;for(const f of Hu.strings){const m=e.encode(t[f]);n[f]=m,a+=4+m.length}const o=new ArrayBuffer(a),c=new Uint8Array(o),h=new DataView(o);let d=0;for(const f of Hu.strings){const m=n[f],b=m.length;h.setUint32(d,b),c.set(m,d+4),d+=4+b}return Gt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return _(this,gh,xy).call(this,0)}get fontWeight(){return _(this,gh,xy).call(this,1)}get italicAngle(){return _(this,gh,xy).call(this,2)}};dh=new WeakMap,fh=new WeakMap,Ag=new WeakMap,gh=new WeakSet,xy=function(t){Gt(t<Hu.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=l(this,fh).getUint32(e)+4;const n=l(this,fh).getUint32(e);return l(this,Ag).decode(new Uint8Array(l(this,dh),e+4,n))},tt(Hu,"strings",["fontFamily","fontWeight","italicAngle"]);let ab=Hu;var Sl,ta,Vo,Xo,Tf;const Iu=class Iu{constructor(t){E(this,Xo);E(this,Sl);E(this,ta);E(this,Vo);A(this,Sl,t),A(this,ta,new DataView(l(this,Sl))),A(this,Vo,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let a=0;for(const v of Iu.strings){const S=e.encode(t[v]);n[v]=S,a+=4+S.length}a+=4;let o,c,h=1+a;t.style&&(o=e.encode(t.style.style),c=e.encode(t.style.weight),h+=4+o.length+4+c.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),m=new DataView(d);let b=0;m.setUint8(b++,t.guessFallback?1:0),m.setUint32(b,0),b+=4,a=0;for(const v of Iu.strings){const S=n[v],C=S.length;a+=4+C,m.setUint32(b,C),f.set(S,b+4),b+=4+C}return m.setUint32(b-a-4,a),t.style&&(m.setUint32(b,o.length),f.set(o,b+4),b+=4+o.length,m.setUint32(b,c.length),f.set(c,b+4),b+=4+c.length),Gt(b<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(b)}get guessFallback(){return l(this,ta).getUint8(0)!==0}get css(){return _(this,Xo,Tf).call(this,0)}get loadedName(){return _(this,Xo,Tf).call(this,1)}get baseFontName(){return _(this,Xo,Tf).call(this,2)}get src(){return _(this,Xo,Tf).call(this,3)}get style(){let t=1;t+=4+l(this,ta).getUint32(t);const e=l(this,ta).getUint32(t),n=l(this,Vo).decode(new Uint8Array(l(this,Sl),t+4,e));t+=4+e;const a=l(this,ta).getUint32(t),o=l(this,Vo).decode(new Uint8Array(l(this,Sl),t+4,a));return{style:n,weight:o}}};Sl=new WeakMap,ta=new WeakMap,Vo=new WeakMap,Xo=new WeakSet,Tf=function(t){Gt(t<Iu.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=l(this,ta).getUint32(e)+4;const n=l(this,ta).getUint32(e);return l(this,Vo).decode(new Uint8Array(l(this,Sl),e+4,n))},tt(Iu,"strings",["css","loadedName","baseFontName","src"]);let rb=Iu;var ph,mh,yh,bh,_n,ea,Sg,re,ze,Ss,My,Cf;const Dt=class Dt{constructor({data:t,extra:e}){E(this,ze);E(this,ea);E(this,Sg);E(this,re);A(this,ea,t),A(this,Sg,new TextDecoder),A(this,re,new DataView(l(this,ea))),e&&Object.assign(this,e)}get black(){return _(this,ze,Ss).call(this,0)}get bold(){return _(this,ze,Ss).call(this,1)}get disableFontFace(){return _(this,ze,Ss).call(this,2)}get fontExtraProperties(){return _(this,ze,Ss).call(this,3)}get isInvalidPDFjsFont(){return _(this,ze,Ss).call(this,4)}get isType3Font(){return _(this,ze,Ss).call(this,5)}get italic(){return _(this,ze,Ss).call(this,6)}get missingFile(){return _(this,ze,Ss).call(this,7)}get remeasure(){return _(this,ze,Ss).call(this,8)}get vertical(){return _(this,ze,Ss).call(this,9)}get ascent(){return _(this,ze,My).call(this,0)}get defaultWidth(){return _(this,ze,My).call(this,1)}get descent(){return _(this,ze,My).call(this,2)}get bbox(){let t=l(Dt,mh);if(l(this,re).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<4;a++)n.push(l(this,re).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=l(Dt,yh);if(l(this,re).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<6;a++)n.push(l(this,re).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=l(Dt,bh);if(l(this,re).getUint8(t)===0)return;t+=1;const n=[];for(let a=0;a<3;a++)n.push(l(this,re).getInt16(t,!0)),t+=2;return n}get fallbackName(){return _(this,ze,Cf).call(this,0)}get loadedName(){return _(this,ze,Cf).call(this,1)}get mimetype(){return _(this,ze,Cf).call(this,2)}get name(){return _(this,ze,Cf).call(this,3)}get data(){let t=l(Dt,_n);const e=l(this,re).getUint32(t);t+=4+e;const n=l(this,re).getUint32(t);t+=4+n;const a=l(this,re).getUint32(t);t+=4+a;const o=l(this,re).getUint32(t);if(o!==0)return new Uint8Array(l(this,ea),t+4,o)}clearData(){let t=l(Dt,_n);const e=l(this,re).getUint32(t);t+=4+e;const n=l(this,re).getUint32(t);t+=4+n;const a=l(this,re).getUint32(t);t+=4+a;const o=l(this,re).getUint32(t);new Uint8Array(l(this,ea),t+4,o).fill(0),l(this,re).setUint32(t,0)}get cssFontInfo(){let t=l(Dt,_n);const e=l(this,re).getUint32(t);t+=4+e;const n=l(this,re).getUint32(t);t+=4+n;const a=l(this,re).getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(l(this,ea),t+4,a)),new ab(o.buffer)}get systemFontInfo(){let t=l(Dt,_n);const e=l(this,re).getUint32(t);t+=4+e;const n=l(this,re).getUint32(t);if(n===0)return null;const a=new Uint8Array(n);return a.set(new Uint8Array(l(this,ea),t+4,n)),new rb(a.buffer)}static write(t){const e=t.systemFontInfo?rb.write(t.systemFontInfo):null,n=t.cssFontInfo?ab.write(t.cssFontInfo):null,a=new TextEncoder,o={};let c=0;for(const T of Dt.strings)o[T]=a.encode(t[T]),c+=4+o[T].length;const h=l(Dt,_n)+4+c+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),m=new DataView(d);let b=0;const v=Dt.bools.length;let S=0,C=0;for(let T=0;T<v;T++){const M=t[Dt.bools[T]];S|=(M===void 0?0:M?2:1)<<C,C+=2,(C===8||T===v-1)&&(m.setUint8(b++,S),S=0,C=0)}Gt(b===l(Dt,ph),"FontInfo.write: Boolean properties offset mismatch");for(const T of Dt.numbers)m.setFloat64(b,t[T]),b+=8;if(Gt(b===l(Dt,mh),"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(b++,4);for(const T of t.bbox)m.setInt16(b,T,!0),b+=2}else m.setUint8(b++,0),b+=8;if(Gt(b===l(Dt,yh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(b++,6);for(const T of t.fontMatrix)m.setFloat64(b,T,!0),b+=8}else m.setUint8(b++,0),b+=48;if(Gt(b===l(Dt,bh),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(b++,1);for(const T of t.defaultVMetrics)m.setInt16(b,T,!0),b+=2}else m.setUint8(b++,0),b+=6;Gt(b===l(Dt,_n),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(l(Dt,_n),0),b+=4;for(const T of Dt.strings){const M=o[T],x=M.length;m.setUint32(b,x),f.set(M,b+4),b+=4+x}if(m.setUint32(l(Dt,_n),b-l(Dt,_n)-4),!e)m.setUint32(b,0),b+=4;else{const T=e.byteLength;m.setUint32(b,T),Gt(b+4+T<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),b+4),b+=4+T}if(!n)m.setUint32(b,0),b+=4;else{const T=n.byteLength;m.setUint32(b,T),Gt(b+4+T<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),b+4),b+=4+T}return t.data===void 0?(m.setUint32(b,0),b+=4):(m.setUint32(b,t.data.length),f.set(t.data,b+4),b+=4+t.data.length),Gt(b<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(b)}};ph=new WeakMap,mh=new WeakMap,yh=new WeakMap,bh=new WeakMap,_n=new WeakMap,ea=new WeakMap,Sg=new WeakMap,re=new WeakMap,ze=new WeakSet,Ss=function(t){Gt(t<Dt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,a=l(this,re).getUint8(e)>>n&3;return a===0?void 0:a===2},My=function(t){return Gt(t<Dt.numbers.length,"Invalid number index"),l(this,re).getFloat64(l(Dt,ph)+t*8)},Cf=function(t){Gt(t<Dt.strings.length,"Invalid string index");let e=l(Dt,_n)+4;for(let o=0;o<t;o++)e+=l(this,re).getUint32(e)+4;const n=l(this,re).getUint32(e),a=new Uint8Array(n);return a.set(new Uint8Array(l(this,ea),e+4,n)),l(this,Sg).decode(a)},tt(Dt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),tt(Dt,"numbers",["ascent","defaultWidth","descent"]),tt(Dt,"strings",["fallbackName","loadedName","mimetype","name"]),E(Dt,ph,Math.ceil(Dt.bools.length*2/8)),E(Dt,mh,l(Dt,ph)+Dt.numbers.length*8),E(Dt,yh,l(Dt,mh)+1+8),E(Dt,bh,l(Dt,yh)+1+48),E(Dt,_n,l(Dt,bh)+1+6);let $A=Dt;var wg,Eg,_g,Tg,Cg,xg,Mg,Rg;const pe=class pe{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,a=[],o=[],c=[],h=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],c=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],o=t[3],h=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const m=Math.floor(a.length/2),b=Math.floor(o.length/3),v=c.length,S=h.length;let C=0;for(const N of h)C+=1,C=Math.ceil(C/4)*4,C+=4+N.coords.length*4,C+=4+N.colors.length*4,N.verticesPerRow!==void 0&&(C+=4);const T=20+m*8+b*3+v*8+(n?16:0)+(f?3:0)+C,M=new ArrayBuffer(T),x=new DataView(M),L=new Uint8Array(M);x.setUint8(l(pe,wg),e),x.setUint8(l(pe,Eg),n?1:0),x.setUint8(l(pe,_g),f?1:0),x.setUint8(l(pe,Tg),d),x.setUint32(l(pe,Cg),m,!0),x.setUint32(l(pe,xg),b,!0),x.setUint32(l(pe,Mg),v,!0),x.setUint32(l(pe,Rg),S,!0);let R=20;new Float32Array(M,R,m*2).set(a),R+=m*8,L.set(o,R),R+=b*3;for(const[N,B]of c)x.setFloat32(R,N,!0),R+=4,x.setUint32(R,parseInt(B.slice(1),16),!0),R+=4;if(n)for(const N of n)x.setFloat32(R,N,!0),R+=4;f&&(L.set(f,R),R+=3);for(let N=0;N<h.length;N++){const B=h[N];x.setUint8(R,B.type),R+=1,R=Math.ceil(R/4)*4,x.setUint32(R,B.coords.length,!0),R+=4,new Int32Array(M,R,B.coords.length).set(B.coords),R+=B.coords.length*4,x.setUint32(R,B.colors.length,!0),R+=4,new Int32Array(M,R,B.colors.length).set(B.colors),R+=B.colors.length*4,B.verticesPerRow!==void 0&&(x.setUint32(R,B.verticesPerRow,!0),R+=4)}return M}getIR(){const t=this.view,e=this.data[l(pe,wg)],n=!!this.data[l(pe,Eg)],a=!!this.data[l(pe,_g)],o=t.getUint32(l(pe,Cg),!0),c=t.getUint32(l(pe,xg),!0),h=t.getUint32(l(pe,Mg),!0),d=t.getUint32(l(pe,Rg),!0);let f=20;const m=new Float32Array(this.buffer,f,o*2);f+=o*8;const b=new Uint8Array(this.buffer,f,c*3);f+=c*3;const v=[];for(let M=0;M<h;++M){const x=t.getFloat32(f,!0);f+=4;const L=t.getUint32(f,!0);f+=4,v.push([x,`#${L.toString(16).padStart(6,"0")}`])}let S=null;if(n){S=[];for(let M=0;M<4;++M)S.push(t.getFloat32(f,!0)),f+=4}let C=null;a&&(C=new Uint8Array(this.buffer,f,3),f+=3);const T=[];for(let M=0;M<d;++M){const x=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const L=t.getUint32(f,!0);f+=4;const R=new Int32Array(this.buffer,f,L);f+=L*4;const O=t.getUint32(f,!0);f+=4;const N=new Int32Array(this.buffer,f,O);f+=O*4;const B={type:x,coords:R,colors:N};x===CA.LATTICE&&(B.verticesPerRow=t.getUint32(f,!0),f+=4),T.push(B)}if(e===1)return["RadialAxial","axial",S,v,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",S,v,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(e===3){const M=this.data[l(pe,Tg)];let x=null;if(m.length>0){let L=m[0],R=m[0],O=m[1],N=m[1];for(let B=0;B<m.length;B+=2){const F=m[B],W=m[B+1];L=L>F?F:L,O=O>W?W:O,R=R<F?F:R,N=N<W?W:N}x=[L,O,R,N]}return["Mesh",M,m,b,T,x,S,C]}throw new Error(`Unsupported pattern kind: ${e}`)}};wg=new WeakMap,Eg=new WeakMap,_g=new WeakMap,Tg=new WeakMap,Cg=new WeakMap,xg=new WeakMap,Mg=new WeakMap,Rg=new WeakMap,E(pe,wg,0),E(pe,Eg,1),E(pe,_g,2),E(pe,Tg,3),E(pe,Cg,4),E(pe,xg,8),E(pe,Mg,12),E(pe,Rg,16);let KA=pe;function DO(g){if(g instanceof URL)return g.href;if(typeof g=="string"){if(ji)return g;const t=URL.parse(g,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function LO(g){if(ji&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return Fp(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g==null?void 0:g.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function uy(g){if(typeof g!="string")return null;if(g.endsWith("/"))return g;throw new Error(`Invalid factory url: "${g}" must include trailing slash.`)}const QA=g=>typeof g=="object"&&Number.isInteger(g==null?void 0:g.num)&&g.num>=0&&Number.isInteger(g==null?void 0:g.gen)&&g.gen>=0,OO=g=>typeof g=="object"&&typeof(g==null?void 0:g.name)=="string",NO=fO.bind(null,QA,OO);var Za,Sb;class kO{constructor(){E(this,Za,new Map);E(this,Sb,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};l(this,Sb).then(()=>{for(const[a]of l(this,Za))a.call(this,n)})}addEventListener(t,e,n=null){let a=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Tt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}l(this,Za).set(e,a)}removeEventListener(t,e){const n=l(this,Za).get(e);n==null||n(),l(this,Za).delete(e)}terminate(){for(const[,t]of l(this,Za))t==null||t();l(this,Za).clear()}}Za=new WeakMap,Sb=new WeakMap;const hy={DATA:1,ERROR:2},Xe={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function VT(){}function Ji(g){if(g instanceof $l||g instanceof xA||g instanceof PT||g instanceof eb||g instanceof gA)return g;switch(g instanceof Error||typeof g=="object"&&g!==null||ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new $l(g.message);case"InvalidPDFException":return new xA(g.message);case"PasswordException":return new PT(g.message,g.code);case"ResponseException":return new eb(g.message,g.status,g.missing);case"UnknownErrorException":return new gA(g.message,g.details)}return new gA(g.message,g.toString())}var vh,ps,bx,vx,Ax,Ry;class xf{constructor(t,e,n){E(this,ps);E(this,vh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",_(this,ps,bx).bind(this),{signal:l(this,vh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,a){const o=this.streamId++,c=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:h,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:c,targetName:h,stream:Xe.PULL,streamId:o,desiredSize:f.desiredSize}),m.promise},cancel:f=>{Gt(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:c,targetName:h,stream:Xe.CANCEL,streamId:o,reason:Ji(f)}),m.promise}},n)}destroy(){var t;(t=l(this,vh))==null||t.abort(),A(this,vh,null)}}vh=new WeakMap,ps=new WeakSet,bx=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){_(this,ps,Ax).call(this,t);return}if(t.callback){const n=t.callbackId,a=this.callbackCapabilities[n];if(!a)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===hy.DATA)a.resolve(t.data);else if(t.callback===hy.ERROR)a.reject(Ji(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(c){o.postMessage({sourceName:n,targetName:a,callback:hy.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:n,targetName:a,callback:hy.ERROR,callbackId:t.callbackId,reason:Ji(c)})});return}if(t.streamId){_(this,ps,vx).call(this,t);return}e(t.data)},vx=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this,h=this.actionHandler[t.action],d={enqueue(f,m=1,b){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=m,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:a,stream:Xe.ENQUEUE,streamId:e,chunk:f},b)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Xe.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){Gt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:a,stream:Xe.ERROR,streamId:e,reason:Ji(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Xe.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:a,stream:Xe.START_COMPLETE,streamId:e,reason:Ji(f)})})},Ax=function(t){const e=t.streamId,n=this.sourceName,a=t.sourceName,o=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case Xe.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(Ji(t.reason));break;case Xe.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(Ji(t.reason));break;case Xe.PULL:if(!h){o.postMessage({sourceName:n,targetName:a,stream:Xe.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||VT).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Xe.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:a,stream:Xe.PULL_COMPLETE,streamId:e,reason:Ji(f)})});break;case Xe.ENQUEUE:if(Gt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Xe.CLOSE:if(Gt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),_(this,ps,Ry).call(this,c,e);break;case Xe.ERROR:Gt(c,"error should have stream controller"),c.controller.error(Ji(t.reason)),_(this,ps,Ry).call(this,c,e);break;case Xe.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(Ji(t.reason)),_(this,ps,Ry).call(this,c,e);break;case Xe.CANCEL:if(!h)break;const d=Ji(t.reason);Promise.try(h.onCancel||VT,d).then(function(){o.postMessage({sourceName:n,targetName:a,stream:Xe.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:a,stream:Xe.CANCEL_COMPLETE,streamId:e,reason:Ji(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Ry=async function(t,e){var n,a,o;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(a=t.pullCall)==null?void 0:a.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var Dg;class Sx{constructor({enableHWA:t=!1}){E(this,Dg,!1);A(this,Dg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,Dg)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ge("Abstract method `_createCanvas` called.")}}Dg=new WeakMap;class BO extends Sx{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class wx{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class XT extends wx{async _fetch(t){const e=await Up(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Fp(e)}}class Ex{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,a,o){return"none"}destroy(t=!1){}}var Yo,Ah,Ja,tr,Ni,$o,Ko,ot,Ri,Mf,Lu,Dy,Ou,_x,WA,Nu,Rf,Df,ZA,Lf;class zO extends Ex{constructor({docId:e,ownerDocument:n=globalThis.document}){super();E(this,ot);E(this,Yo);E(this,Ah);E(this,Ja);E(this,tr);E(this,Ni);E(this,$o);E(this,Ko,0);A(this,tr,e),A(this,Ni,n)}addFilter(e){if(!e)return"none";let n=l(this,ot,Ri).get(e);if(n)return n;const[a,o,c]=_(this,ot,Dy).call(this,e),h=e.length===1?a:`${a}${o}${c}`;if(n=l(this,ot,Ri).get(h),n)return l(this,ot,Ri).set(e,n),n;const d=`g_${l(this,tr)}_transfer_map_${Ze(this,Ko)._++}`,f=_(this,ot,Ou).call(this,d);l(this,ot,Ri).set(e,f),l(this,ot,Ri).set(h,f);const m=_(this,ot,Nu).call(this,d);return _(this,ot,Df).call(this,a,o,c,m),f}addHCMFilter(e,n){var C;const a=`${e}-${n}`,o="base";let c=l(this,ot,Mf).get(o);if((c==null?void 0:c.key)===a||(c?((C=c.filter)==null||C.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,ot,Mf).set(o,c)),!e||!n))return c.url;const h=_(this,ot,Lf).call(this,e);e=ut.makeHexColor(...h);const d=_(this,ot,Lf).call(this,n);if(n=ut.makeHexColor(...d),l(this,ot,Lu).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const f=new Array(256);for(let T=0;T<=255;T++){const M=T/255;f[T]=M<=.03928?M/12.92:((M+.055)/1.055)**2.4}const m=f.join(","),b=`g_${l(this,tr)}_hcm_filter`,v=c.filter=_(this,ot,Nu).call(this,b);_(this,ot,Df).call(this,m,m,m,v),_(this,ot,WA).call(this,v);const S=(T,M)=>{const x=h[T]/255,L=d[T]/255,R=new Array(M+1);for(let O=0;O<=M;O++)R[O]=x+O/M*(L-x);return R.join(",")};return _(this,ot,Df).call(this,S(0,5),S(1,5),S(2,5),v),c.url=_(this,ot,Ou).call(this,b),c.url}addAlphaFilter(e){let n=l(this,ot,Ri).get(e);if(n)return n;const[a]=_(this,ot,Dy).call(this,[e]),o=`alpha_${a}`;if(n=l(this,ot,Ri).get(o),n)return l(this,ot,Ri).set(e,n),n;const c=`g_${l(this,tr)}_alpha_map_${Ze(this,Ko)._++}`,h=_(this,ot,Ou).call(this,c);l(this,ot,Ri).set(e,h),l(this,ot,Ri).set(o,h);const d=_(this,ot,Nu).call(this,c);return _(this,ot,ZA).call(this,a,d),h}addLuminosityFilter(e){let n=l(this,ot,Ri).get(e||"luminosity");if(n)return n;let a,o;if(e?([a]=_(this,ot,Dy).call(this,[e]),o=`luminosity_${a}`):o="luminosity",n=l(this,ot,Ri).get(o),n)return l(this,ot,Ri).set(e,n),n;const c=`g_${l(this,tr)}_luminosity_map_${Ze(this,Ko)._++}`,h=_(this,ot,Ou).call(this,c);l(this,ot,Ri).set(e,h),l(this,ot,Ri).set(o,h);const d=_(this,ot,Nu).call(this,c);return _(this,ot,_x).call(this,d),e&&_(this,ot,ZA).call(this,a,d),h}addHighlightHCMFilter(e,n,a,o,c){var L;const h=`${n}-${a}-${o}-${c}`;let d=l(this,ot,Mf).get(e);if((d==null?void 0:d.key)===h||(d?((L=d.filter)==null||L.remove(),d.key=h,d.url="none",d.filter=null):(d={key:h,url:"none",filter:null},l(this,ot,Mf).set(e,d)),!n||!a))return d.url;const[f,m]=[n,a].map(_(this,ot,Lf).bind(this));let b=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[S,C]=[o,c].map(_(this,ot,Lf).bind(this));v<b&&([b,v,S,C]=[v,b,C,S]),l(this,ot,Lu).style.color="";const T=(R,O,N)=>{const B=new Array(256),F=(v-b)/N,W=R/255,Z=(O-R)/(255*N);let it=0;for(let et=0;et<=N;et++){const rt=Math.round(b+et*F),yt=W+et*Z;for(let gt=it;gt<=rt;gt++)B[gt]=yt;it=rt+1}for(let et=it;et<256;et++)B[et]=B[it-1];return B.join(",")},M=`g_${l(this,tr)}_hcm_${e}_filter`,x=d.filter=_(this,ot,Nu).call(this,M);return _(this,ot,WA).call(this,x),_(this,ot,Df).call(this,T(S[0],C[0],5),T(S[1],C[1],5),T(S[2],C[2],5),x),d.url=_(this,ot,Ou).call(this,M),d.url}destroy(e=!1){var n,a,o,c;e&&((n=l(this,$o))!=null&&n.size)||((a=l(this,Ja))==null||a.parentNode.parentNode.remove(),A(this,Ja,null),(o=l(this,Ah))==null||o.clear(),A(this,Ah,null),(c=l(this,$o))==null||c.clear(),A(this,$o,null),A(this,Ko,0))}}Yo=new WeakMap,Ah=new WeakMap,Ja=new WeakMap,tr=new WeakMap,Ni=new WeakMap,$o=new WeakMap,Ko=new WeakMap,ot=new WeakSet,Ri=function(){return l(this,Ah)||A(this,Ah,new Map)},Mf=function(){return l(this,$o)||A(this,$o,new Map)},Lu=function(){if(!l(this,Ja)){const e=l(this,Ni).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const a=l(this,Ni).createElementNS(za,"svg");a.setAttribute("width",0),a.setAttribute("height",0),A(this,Ja,l(this,Ni).createElementNS(za,"defs")),e.append(a),a.append(l(this,Ja)),l(this,Ni).body.append(e)}return l(this,Ja)},Dy=function(e){if(e.length===1){const f=e[0],m=new Array(256);for(let v=0;v<256;v++)m[v]=f[v]/255;const b=m.join(",");return[b,b,b]}const[n,a,o]=e,c=new Array(256),h=new Array(256),d=new Array(256);for(let f=0;f<256;f++)c[f]=n[f]/255,h[f]=a[f]/255,d[f]=o[f]/255;return[c.join(","),h.join(","),d.join(",")]},Ou=function(e){if(l(this,Yo)===void 0){A(this,Yo,"");const n=l(this,Ni).URL;n!==l(this,Ni).baseURI&&(Fb(n)?Tt('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,Yo,LC(n,"")))}return`url(${l(this,Yo)}#${e})`},_x=function(e){const n=l(this,Ni).createElementNS(za,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},WA=function(e){const n=l(this,Ni).createElementNS(za,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},Nu=function(e){const n=l(this,Ni).createElementNS(za,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),l(this,ot,Lu).append(n),n},Rf=function(e,n,a){const o=l(this,Ni).createElementNS(za,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",a),e.append(o)},Df=function(e,n,a,o){const c=l(this,Ni).createElementNS(za,"feComponentTransfer");o.append(c),_(this,ot,Rf).call(this,c,"feFuncR",e),_(this,ot,Rf).call(this,c,"feFuncG",n),_(this,ot,Rf).call(this,c,"feFuncB",a)},ZA=function(e,n){const a=l(this,Ni).createElementNS(za,"feComponentTransfer");n.append(a),_(this,ot,Rf).call(this,a,"feFuncA",e)},Lf=function(e){return l(this,ot,Lu).style.color=e,Ip(getComputedStyle(l(this,ot,Lu)).getPropertyValue("color"))};class Tx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class YT extends Tx{async _fetch(t){const e=await Up(t,"arraybuffer");return new Uint8Array(e)}}class Cx{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class $T extends Cx{async _fetch(t){const e=await Up(t,"arraybuffer");return new Uint8Array(e)}}ji&&Tt("Please use the `legacy` build in Node.js environments.");async function ow(g){const e=await process.getBuiltinModule("fs").promises.readFile(g);return new Uint8Array(e)}class PO extends Ex{}class FO extends Sx{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class UO extends wx{async _fetch(t){return ow(t)}}class HO extends Tx{async _fetch(t){return ow(t)}}class IO extends Cx{async _fetch(t){return ow(t)}}const Mu="__forcedDependency",{floor:KT,ceil:QT}=Math;function dy(g,t,e,n,a,o){g[t*4+0]=Math.min(g[t*4+0],e),g[t*4+1]=Math.min(g[t*4+1],n),g[t*4+2]=Math.max(g[t*4+2],a),g[t*4+3]=Math.max(g[t*4+3],o)}const JA=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Sh,wl;class jO{constructor(t,e){E(this,Sh);E(this,wl);A(this,Sh,t),A(this,wl,e)}get length(){return l(this,Sh).length}isEmpty(t){return l(this,Sh)[t]===JA}minX(t){return l(this,wl)[t*4+0]/256}minY(t){return l(this,wl)[t*4+1]/256}maxX(t){return(l(this,wl)[t*4+2]+1)/256}maxY(t){return(l(this,wl)[t*4+3]+1)/256}}Sh=new WeakMap,wl=new WeakMap;const fy=(g,t)=>{if(!g)return;let e=g.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},g.set(t,e)),e};var nn,sn,Qo,Cs,Wo,er,te,le,ir,an,Lg,wh,Zo,Jo,nr,ki,ia,Og,tS;class GO{constructor(t,e,n=!1){E(this,Og);E(this,nn,{__proto__:null});E(this,sn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Mu]:[]});E(this,Qo,new Map);E(this,Cs,[]);E(this,Wo,[]);E(this,er,[[1,0,0,1,0,0]]);E(this,te,[-1/0,-1/0,1/0,1/0]);E(this,le,new Float64Array([1/0,1/0,-1/0,-1/0]));E(this,ir,-1);E(this,an,new Set);E(this,Lg,new Map);E(this,wh,new Map);E(this,Zo);E(this,Jo);E(this,nr);E(this,ki);E(this,ia);A(this,Zo,t.width),A(this,Jo,t.height),_(this,Og,tS).call(this,e),n&&A(this,ia,new Map)}growOperationsCount(t){t>=l(this,ki).length&&_(this,Og,tS).call(this,t,l(this,ki))}save(t){return A(this,nn,{__proto__:l(this,nn)}),A(this,sn,{__proto__:l(this,sn),transform:{__proto__:l(this,sn).transform},moveText:{__proto__:l(this,sn).moveText},sameLineText:{__proto__:l(this,sn).sameLineText},[Mu]:{__proto__:l(this,sn)[Mu]}}),A(this,te,{__proto__:l(this,te)}),l(this,Cs).push(t),this}restore(t){var a;const e=Object.getPrototypeOf(l(this,nn));if(e===null)return this;A(this,nn,e),A(this,sn,Object.getPrototypeOf(l(this,sn))),A(this,te,Object.getPrototypeOf(l(this,te)));const n=l(this,Cs).pop();return n!==void 0&&((a=fy(l(this,ia),t))==null||a.dependencies.add(n),l(this,ki)[t]=l(this,ki)[n]),this}recordOpenMarker(t){return l(this,Cs).push(t),this}getOpenMarker(){return l(this,Cs).length===0?null:l(this,Cs).at(-1)}recordCloseMarker(t){var n;const e=l(this,Cs).pop();return e!==void 0&&((n=fy(l(this,ia),t))==null||n.dependencies.add(e),l(this,ki)[t]=l(this,ki)[e]),this}beginMarkedContent(t){return l(this,Wo).push(t),this}endMarkedContent(t){var n;const e=l(this,Wo).pop();return e!==void 0&&((n=fy(l(this,ia),t))==null||n.dependencies.add(e),l(this,ki)[t]=l(this,ki)[e]),this}pushBaseTransform(t){return l(this,er).push(ut.multiplyByDOMMatrix(l(this,er).at(-1),t.getTransform())),this}popBaseTransform(){return l(this,er).length>1&&l(this,er).pop(),this}recordSimpleData(t,e){return l(this,nn)[t]=e,this}recordIncrementalData(t,e){return l(this,sn)[t].push(e),this}resetIncrementalData(t,e){return l(this,sn)[t].length=0,this}recordNamedData(t,e){return l(this,Qo).set(t,e),this}recordSimpleDataFromNamed(t,e,n){l(this,nn)[t]=l(this,Qo).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Mu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in l(this,nn)&&this.recordFutureForcedDependency(e,l(this,nn)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of l(this,an))this.recordFutureForcedDependency(Mu,t);return this}resetBBox(t){return l(this,ir)!==t&&(A(this,ir,t),l(this,le)[0]=1/0,l(this,le)[1]=1/0,l(this,le)[2]=-1/0,l(this,le)[3]=-1/0),this}recordClipBox(t,e,n,a,o,c){const h=ut.multiplyByDOMMatrix(l(this,er).at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];ut.axialAlignedBoundingBox([n,o,a,c],h,d);const f=ut.intersect(l(this,te),d);return f?(l(this,te)[0]=f[0],l(this,te)[1]=f[1],l(this,te)[2]=f[2],l(this,te)[3]=f[3]):(l(this,te)[0]=l(this,te)[1]=1/0,l(this,te)[2]=l(this,te)[3]=-1/0),this}recordBBox(t,e,n,a,o,c){const h=l(this,te);if(h[0]===1/0)return this;const d=ut.multiplyByDOMMatrix(l(this,er).at(-1),e.getTransform());if(h[0]===-1/0)return ut.axialAlignedBoundingBox([n,o,a,c],d,l(this,le)),this;const f=[1/0,1/0,-1/0,-1/0];return ut.axialAlignedBoundingBox([n,o,a,c],d,f),l(this,le)[0]=Math.min(l(this,le)[0],Math.max(f[0],h[0])),l(this,le)[1]=Math.min(l(this,le)[1],Math.max(f[1],h[1])),l(this,le)[2]=Math.max(l(this,le)[2],Math.min(f[2],h[2])),l(this,le)[3]=Math.max(l(this,le)[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,n,a=1,o=0,c=0,h){const d=n.bbox;let f,m;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&l(this,wh).get(n),f!==!1&&(m=[0,0,0,0],ut.axialAlignedBoundingBox(d,n.fontMatrix,m),(a!==1||o!==0||c!==0)&&ut.scaleMinMax([a,0,0,-a,o,c],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!h)return this.recordFullPageBBox(t);const b=h();return d&&m&&f===void 0&&(f=m[0]<=o-b.actualBoundingBoxLeft&&m[2]>=o+b.actualBoundingBoxRight&&m[1]<=c-b.actualBoundingBoxAscent&&m[3]>=c+b.actualBoundingBoxDescent,l(this,wh).set(n,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,o-b.actualBoundingBoxLeft,o+b.actualBoundingBoxRight,c-b.actualBoundingBoxAscent,c+b.actualBoundingBoxDescent)}recordFullPageBBox(t){return l(this,le)[0]=Math.max(0,l(this,te)[0]),l(this,le)[1]=Math.max(0,l(this,te)[1]),l(this,le)[2]=Math.min(l(this,Zo),l(this,te)[2]),l(this,le)[3]=Math.min(l(this,Jo),l(this,te)[3]),this}getSimpleIndex(t){return l(this,nn)[t]}recordDependencies(t,e){const n=l(this,an),a=l(this,nn),o=l(this,sn);for(const c of e)c in l(this,nn)?n.add(a[c]):c in o&&o[c].forEach(n.add,n);return this}recordNamedDependency(t,e){return l(this,Qo).has(e)&&l(this,an).add(l(this,Qo).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Mu]),l(this,ia)){const n=fy(l(this,ia),t),{dependencies:a}=n;l(this,an).forEach(a.add,a),l(this,Cs).forEach(a.add,a),l(this,Wo).forEach(a.add,a),a.delete(t),n.isRenderingOperation=!0}if(l(this,ir)===t){const n=KT(l(this,le)[0]*256/l(this,Zo)),a=KT(l(this,le)[1]*256/l(this,Jo)),o=QT(l(this,le)[2]*256/l(this,Zo)),c=QT(l(this,le)[3]*256/l(this,Jo));dy(l(this,nr),t,n,a,o,c);for(const h of l(this,an))h!==t&&dy(l(this,nr),h,n,a,o,c);for(const h of l(this,Cs))h!==t&&dy(l(this,nr),h,n,a,o,c);for(const h of l(this,Wo))h!==t&&dy(l(this,nr),h,n,a,o,c);e||(l(this,an).clear(),A(this,ir,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(l(this,an));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of n)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return l(this,ir)===t&&(A(this,ir,-1),l(this,te)[0]=Math.max(l(this,te)[0],l(this,le)[0]),l(this,te)[1]=Math.max(l(this,te)[1],l(this,le)[1]),l(this,te)[2]=Math.min(l(this,te)[2],l(this,le)[2]),l(this,te)[3]=Math.min(l(this,te)[3],l(this,le)[3]),e||l(this,an).clear()),this}_takePendingDependencies(){const t=l(this,an);return A(this,an,new Set),t}_extractOperation(t){const e=l(this,Lg).get(t);return l(this,Lg).delete(t),e}_pushPendingDependencies(t){for(const e of t)l(this,an).add(e)}take(){return l(this,wh).clear(),new jO(l(this,ki),l(this,nr))}takeDebugMetadata(){return l(this,ia)}}nn=new WeakMap,sn=new WeakMap,Qo=new WeakMap,Cs=new WeakMap,Wo=new WeakMap,er=new WeakMap,te=new WeakMap,le=new WeakMap,ir=new WeakMap,an=new WeakMap,Lg=new WeakMap,wh=new WeakMap,Zo=new WeakMap,Jo=new WeakMap,nr=new WeakMap,ki=new WeakMap,ia=new WeakMap,Og=new WeakSet,tS=function(t,e){const n=new ArrayBuffer(t*4);A(this,nr,new Uint8ClampedArray(n)),A(this,ki,new Uint32Array(n)),e&&e.length>0?(l(this,ki).set(e),l(this,ki).fill(JA,e.length)):l(this,ki).fill(JA)};var de,Ne,xs,Eh,_h;const mw=class mw{constructor(t,e,n){E(this,de);E(this,Ne);E(this,xs);E(this,Eh,0);E(this,_h,0);if(t instanceof mw&&l(t,xs)===!!n)return t;A(this,de,t),A(this,Ne,e),A(this,xs,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return Ze(this,_h)._++,l(this,de).save(l(this,Ne)),this}restore(t){return l(this,_h)>0&&(l(this,de).restore(l(this,Ne)),Ze(this,_h)._--),this}recordOpenMarker(t){return Ze(this,Eh)._++,this}getOpenMarker(){return l(this,Eh)>0?l(this,Ne):l(this,de).getOpenMarker()}recordCloseMarker(t){return Ze(this,Eh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return l(this,de).pushBaseTransform(t),this}popBaseTransform(){return l(this,de).popBaseTransform(),this}recordSimpleData(t,e){return l(this,de).recordSimpleData(t,l(this,Ne)),this}recordIncrementalData(t,e){return l(this,de).recordIncrementalData(t,l(this,Ne)),this}resetIncrementalData(t,e){return l(this,de).resetIncrementalData(t,l(this,Ne)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return l(this,de).recordSimpleDataFromNamed(t,e,l(this,Ne)),this}recordFutureForcedDependency(t,e){return l(this,de).recordFutureForcedDependency(t,l(this,Ne)),this}inheritSimpleDataAsFutureForcedDependencies(t){return l(this,de).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,de).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return l(this,xs)||l(this,de).resetBBox(l(this,Ne)),this}recordClipBox(t,e,n,a,o,c){return l(this,xs)||l(this,de).recordClipBox(l(this,Ne),e,n,a,o,c),this}recordBBox(t,e,n,a,o,c){return l(this,xs)||l(this,de).recordBBox(l(this,Ne),e,n,a,o,c),this}recordCharacterBBox(t,e,n,a,o,c,h){return l(this,xs)||l(this,de).recordCharacterBBox(l(this,Ne),e,n,a,o,c,h),this}recordFullPageBBox(t){return l(this,xs)||l(this,de).recordFullPageBBox(l(this,Ne)),this}getSimpleIndex(t){return l(this,de).getSimpleIndex(t)}recordDependencies(t,e){return l(this,de).recordDependencies(l(this,Ne),e),this}recordNamedDependency(t,e){return l(this,de).recordNamedDependency(l(this,Ne),e),this}recordOperation(t){return l(this,de).recordOperation(l(this,Ne),!0),this}recordShowTextOperation(t){return l(this,de).recordShowTextOperation(l(this,Ne),!0),this}bboxToClipBoxDropOperation(t){return l(this,xs)||l(this,de).bboxToClipBoxDropOperation(l(this,Ne),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};de=new WeakMap,Ne=new WeakMap,xs=new WeakMap,Eh=new WeakMap,_h=new WeakMap;let lb=mw;const es={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},_i={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function eS(g,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,n),g.clip(a)}class cw{isModifyingCurrentTransform(){return!1}getPattern(){ge("Abstract method `getPattern` called.")}}class qO extends cw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,a){let o;if(a===_i.STROKE||a===_i.FILL){const c=e.current.getClippedPathBoundingBox(a,xe(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),n=ut.transform(n,[1,0,0,1,c[0],c[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),eS(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(f.canvas,"no-repeat");const b=new DOMMatrix(n);o.setTransform(b)}else eS(t,this._bbox),o=this._createGradient(t);return o}}function yA(g,t,e,n,a,o,c,h){const d=t.coords,f=t.colors,m=g.data,b=g.width*4;let v;d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=c,c=v),d[n+1]>d[a+1]&&(v=n,n=a,a=v,v=c,c=h,h=v),d[e+1]>d[n+1]&&(v=e,e=n,n=v,v=o,o=c,c=v);const S=(d[e]+t.offsetX)*t.scaleX,C=(d[e+1]+t.offsetY)*t.scaleY,T=(d[n]+t.offsetX)*t.scaleX,M=(d[n+1]+t.offsetY)*t.scaleY,x=(d[a]+t.offsetX)*t.scaleX,L=(d[a+1]+t.offsetY)*t.scaleY;if(C>=L)return;const R=f[o],O=f[o+1],N=f[o+2],B=f[c],F=f[c+1],W=f[c+2],Z=f[h],it=f[h+1],et=f[h+2],rt=Math.round(C),yt=Math.round(L);let gt,wt,H,X,at,St,kt,z;for(let q=rt;q<=yt;q++){if(q<M){const bt=q<C?0:(C-q)/(C-M);gt=S-(S-T)*bt,wt=R-(R-B)*bt,H=O-(O-F)*bt,X=N-(N-W)*bt}else{let bt;q>L?bt=1:M===L?bt=0:bt=(M-q)/(M-L),gt=T-(T-x)*bt,wt=B-(B-Z)*bt,H=F-(F-it)*bt,X=W-(W-et)*bt}let J;q<C?J=0:q>L?J=1:J=(C-q)/(C-L),at=S-(S-x)*J,St=R-(R-Z)*J,kt=O-(O-it)*J,z=N-(N-et)*J;const lt=Math.round(Math.min(gt,at)),mt=Math.round(Math.max(gt,at));let Et=b*q+lt*4;for(let bt=lt;bt<=mt;bt++)J=(gt-bt)/(gt-at),J<0?J=0:J>1&&(J=1),m[Et++]=wt-(wt-St)*J|0,m[Et++]=H-(H-kt)*J|0,m[Et++]=X-(X-z)*J|0,m[Et++]=255}}function VO(g,t,e){const n=t.coords,a=t.colors;let o,c;switch(t.type){case CA.LATTICE:const h=t.verticesPerRow,d=Math.floor(n.length/h)-1,f=h-1;for(o=0;o<d;o++){let m=o*h;for(let b=0;b<f;b++,m++)yA(g,e,n[m],n[m+1],n[m+h],a[m],a[m+1],a[m+h]),yA(g,e,n[m+h+1],n[m+1],n[m+h],a[m+h+1],a[m+1],a[m+h])}break;case CA.TRIANGLES:for(o=0,c=n.length;o<c;o+=3)yA(g,e,n[o],n[o+1],n[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class XO extends cw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-d,b=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),S=f/b,C=m/v,T={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/S,scaleY:1/C},M=b+4,x=v+4,L=n.getCanvas("mesh",M,x),R=L.context,O=R.createImageData(b,v);if(e){const B=O.data;for(let F=0,W=B.length;F<W;F+=4)B[F]=e[0],B[F+1]=e[1],B[F+2]=e[2],B[F+3]=255}for(const B of this._figures)VO(O,B,T);return R.putImageData(O,2,2),{canvas:L.canvas,offsetX:h-2*S,offsetY:d-2*C,scaleX:S,scaleY:C}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,a){eS(t,this._bbox);const o=new Float32Array(2);if(a===_i.SHADING)ut.singularValueDecompose2dScale(xe(t),o);else if(this.matrix){ut.singularValueDecompose2dScale(this.matrix,o);const[h,d]=o;ut.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=h,o[1]*=d}else ut.singularValueDecompose2dScale(e.baseTransform,o);const c=this._createMeshCanvas(o,a===_i.SHADING?null:this._background,e.cachedCanvases);return a!==_i.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class YO extends cw{getPattern(){return"hotpink"}}function $O(g){switch(g[0]){case"RadialAxial":return new qO(g);case"Mesh":return new XO(g);case"Dummy":return new YO}throw new Error(`Unknown IR type: ${g[0]}`)}const WT={COLORED:1,UNCOLORED:2},wb=class wb{constructor(t,e,n,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=a}createPatternCanvas(t,e){var St,kt;const{bbox:n,operatorList:a,paintType:o,tilingType:c,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),Pb("TilingType: "+c);const b=n[0],v=n[1],S=n[2],C=n[3],T=S-b,M=C-v,x=new Float32Array(2);ut.singularValueDecompose2dScale(this.matrix,x);const[L,R]=x;ut.singularValueDecompose2dScale(this.baseTransform,x);const O=L*x[0],N=R*x[1];let B=T,F=M,W=!1,Z=!1;const it=Math.ceil(f*O),et=Math.ceil(m*N),rt=Math.ceil(T*O),yt=Math.ceil(M*N);it>=rt?B=f:W=!0,et>=yt?F=m:Z=!0;const gt=this.getSizeAndScale(B,this.ctx.canvas.width,O),wt=this.getSizeAndScale(F,this.ctx.canvas.height,N),H=t.cachedCanvases.getCanvas("pattern",gt.size,wt.size),X=H.context,at=d.createCanvasGraphics(X,e);if(at.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(at,o,h),X.translate(-gt.scale*b,-wt.scale*v),at.transform(0,gt.scale,0,0,wt.scale,0,0),X.save(),(St=at.dependencyTracker)==null||St.save(),this.clipBbox(at,b,v,S,C),at.baseTransform=xe(at.ctx),at.executeOperatorList(a),at.endDrawing(),(kt=at.dependencyTracker)==null||kt.restore(),X.restore(),W||Z){const z=H.canvas;W&&(B=f),Z&&(F=m);const q=this.getSizeAndScale(B,this.ctx.canvas.width,O),J=this.getSizeAndScale(F,this.ctx.canvas.height,N),lt=q.size,mt=J.size,Et=t.cachedCanvases.getCanvas("pattern-workaround",lt,mt),bt=Et.context,Qe=W?Math.floor(T/f):0,be=Z?Math.floor(M/m):0;for(let ys=0;ys<=Qe;ys++)for(let Gn=0;Gn<=be;Gn++)bt.drawImage(z,lt*ys,mt*Gn,lt,mt,0,0,lt,mt);return{canvas:Et.canvas,scaleX:q.scale,scaleY:J.scale,offsetX:b,offsetY:v}}return{canvas:H.canvas,scaleX:gt.scale,scaleY:wt.scale,offsetX:b,offsetY:v}}getSizeAndScale(t,e,n){const a=Math.max(wb.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=a?o=a:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,a,o){const c=a-e,h=o-n;t.ctx.rect(e,n,c,h),ut.axialAlignedBoundingBox([e,n,a,o],xe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const a=t.ctx,o=t.current;switch(e){case WT.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;a.fillStyle=o.fillColor=c,a.strokeStyle=o.strokeColor=h;break;case WT.UNCOLORED:a.fillStyle=a.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new lO(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,a,o){let c=n;a!==_i.SHADING&&(c=ut.transform(c,e.baseTransform),this.matrix&&(c=ut.transform(c,this.matrix)));const h=this.createPatternCanvas(e,o);let d=new DOMMatrix(c);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}};tt(wb,"MAX_PATTERN_SIZE",3e3);let iS=wb;function KO({src:g,srcPos:t=0,dest:e,width:n,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const h=xi.isLittleEndian?4278190080:255,[d,f]=c?[o,h]:[h,o],m=n>>3,b=n&7,v=g.length;e=new Uint32Array(e.buffer);let S=0;for(let C=0;C<a;C++){for(const M=t+m;t<M;t++){const x=t<v?g[t]:255;e[S++]=x&128?f:d,e[S++]=x&64?f:d,e[S++]=x&32?f:d,e[S++]=x&16?f:d,e[S++]=x&8?f:d,e[S++]=x&4?f:d,e[S++]=x&2?f:d,e[S++]=x&1?f:d}if(b===0)continue;const T=t<v?g[t++]:255;for(let M=0;M<b;M++)e[S++]=T&1<<7-M?f:d}return{srcPos:t,destPos:S}}const ZT=16,JT=100,QO=15,tC=10,cn=16,bA=new DOMMatrix,Hn=new Float32Array(2),Fu=new Float32Array([1/0,1/0,-1/0,-1/0]);function WO(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},g.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},g.transform=function(e,n,a,o,c,h){t.transform(e,n,a,o,c,h),this.__originalTransform(e,n,a,o,c,h)},g.setTransform=function(e,n,a,o,c,h){t.setTransform(e,n,a,o,c,h),this.__originalSetTransform(e,n,a,o,c,h)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(e){t.rotate(e),this.__originalRotate(e)},g.clip=function(e){t.clip(e),this.__originalClip(e)},g.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},g.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},g.bezierCurveTo=function(e,n,a,o,c,h){t.bezierCurveTo(e,n,a,o,c,h),this.__originalBezierCurveTo(e,n,a,o,c,h)},g.rect=function(e,n,a,o){t.rect(e,n,a,o),this.__originalRect(e,n,a,o)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class ZO{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,n)):(a=this.canvasFactory.create(e,n),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function gy(g,t,e,n,a,o,c,h,d,f){const[m,b,v,S,C,T]=xe(g);if(b===0&&v===0){const L=c*m+C,R=Math.round(L),O=h*S+T,N=Math.round(O),B=(c+d)*m+C,F=Math.abs(Math.round(B)-R)||1,W=(h+f)*S+T,Z=Math.abs(Math.round(W)-N)||1;return g.setTransform(Math.sign(m),0,0,Math.sign(S),R,N),g.drawImage(t,e,n,a,o,0,0,F,Z),g.setTransform(m,b,v,S,C,T),[F,Z]}if(m===0&&S===0){const L=h*v+C,R=Math.round(L),O=c*b+T,N=Math.round(O),B=(h+f)*v+C,F=Math.abs(Math.round(B)-R)||1,W=(c+d)*b+T,Z=Math.abs(Math.round(W)-N)||1;return g.setTransform(0,Math.sign(b),Math.sign(v),0,R,N),g.drawImage(t,e,n,a,o,0,0,Z,F),g.setTransform(m,b,v,S,C,T),[Z,F]}g.drawImage(t,e,n,a,o,c,h,d,f);const M=Math.hypot(m,b),x=Math.hypot(v,S);return[M*d,x*f]}class eC{constructor(t,e,n){tt(this,"alphaIsShape",!1);tt(this,"fontSize",0);tt(this,"fontSizeScale",1);tt(this,"textMatrix",null);tt(this,"textMatrixScale",1);tt(this,"fontMatrix",TA);tt(this,"leading",0);tt(this,"x",0);tt(this,"y",0);tt(this,"lineX",0);tt(this,"lineY",0);tt(this,"charSpacing",0);tt(this,"wordSpacing",0);tt(this,"textHScale",1);tt(this,"textRenderingMode",bi.FILL);tt(this,"textRise",0);tt(this,"fillColor","#000000");tt(this,"strokeColor","#000000");tt(this,"patternFill",!1);tt(this,"patternStroke",!1);tt(this,"fillAlpha",1);tt(this,"strokeAlpha",1);tt(this,"lineWidth",1);tt(this,"activeSMask",null);tt(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Fu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=_i.FILL,e=null){const n=this.minMax.slice();if(t===_i.STROKE){e||ge("Stroke bounding box must include transform."),ut.singularValueDecompose2dScale(e,Hn);const a=Hn[0]*this.lineWidth/2,o=Hn[1]*this.lineWidth/2;n[0]-=a,n[1]-=o,n[2]+=a,n[3]+=o}return n}updateClipFromPath(){const t=ut.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Fu,0)}getClippedPathBoundingBox(t=_i.FILL,e=null){return ut.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function iC(g,t){if(t instanceof ImageData){g.putImageData(t,0,0);return}const e=t.height,n=t.width,a=e%cn,o=(e-a)/cn,c=a===0?o:o+1,h=g.createImageData(n,cn);let d=0,f;const m=t.data,b=h.data;let v,S,C,T;if(t.kind===Ay.GRAYSCALE_1BPP){const M=m.byteLength,x=new Uint32Array(b.buffer,0,b.byteLength>>2),L=x.length,R=n+7>>3,O=4294967295,N=xi.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(C=v<o?cn:a,f=0,S=0;S<C;S++){const B=M-d;let F=0;const W=B>R?n:B*8-7,Z=W&-8;let it=0,et=0;for(;F<Z;F+=8)et=m[d++],x[f++]=et&128?O:N,x[f++]=et&64?O:N,x[f++]=et&32?O:N,x[f++]=et&16?O:N,x[f++]=et&8?O:N,x[f++]=et&4?O:N,x[f++]=et&2?O:N,x[f++]=et&1?O:N;for(;F<W;F++)it===0&&(et=m[d++],it=128),x[f++]=et&it?O:N,it>>=1}for(;f<L;)x[f++]=0;g.putImageData(h,0,v*cn)}}else if(t.kind===Ay.RGBA_32BPP){for(S=0,T=n*cn*4,v=0;v<o;v++)b.set(m.subarray(d,d+T)),d+=T,g.putImageData(h,0,S),S+=cn;v<c&&(T=n*a*4,b.set(m.subarray(d,d+T)),g.putImageData(h,0,S))}else if(t.kind===Ay.RGB_24BPP)for(C=cn,T=n*C,v=0;v<c;v++){for(v>=o&&(C=a,T=n*C),f=0,S=T;S--;)b[f++]=m[d++],b[f++]=m[d++],b[f++]=m[d++],b[f++]=255;g.putImageData(h,0,v*cn)}else throw new Error(`bad image kind: ${t.kind}`)}function nC(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,a=e%cn,o=(e-a)/cn,c=a===0?o:o+1,h=g.createImageData(n,cn);let d=0;const f=t.data,m=h.data;for(let b=0;b<c;b++){const v=b<o?cn:a;({srcPos:d}=KO({src:f,srcPos:d,dest:m,width:n,height:v,nonBlackColor:0})),g.putImageData(h,0,b*cn)}}function pf(g,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)g[n]!==void 0&&(t[n]=g[n]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function py(g){g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0);const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}function sC(g,t){if(t)return!0;ut.singularValueDecompose2dScale(g,Hn);const e=Math.fround(ga.pixelRatio*Kl.PDF_TO_CSS_UNITS);return Hn[0]<=e&&Hn[1]<=e}const JO=["butt","round","square"],tN=["miter","round","bevel"],eN={},aC={};var Ps,nS,sS,aS;const yw=class yw{constructor(t,e,n,a,o,{optionalContentConfig:c,markedContentStack:h=null},d,f,m){E(this,Ps);this.ctx=t,this.current=new eC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new ZO(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,n=null){var a;return typeof e=="string"?((a=this.dependencyTracker)==null||a.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=h,n){const d=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...xe(this.compositeCtx))}this.ctx.save(),py(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=xe(this.ctx)}executeOperatorList(t,e,n,a,o){var x;const c=t.argsArray,h=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const m=f-d>tC&&typeof n=="function",b=m?Date.now()+QO:0;let v=0;const S=this.commonObjs,C=this.objs;let T,M;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,n),d;if(!o||o(d))if(T=h[d],M=c[d]??null,T!==jf.dependency)M===null?this[T](d):this[T](d,...M);else for(const L of M){(x=this.dependencyTracker)==null||x.recordNamedData(L,d);const R=L.startsWith("g_")?S:C;if(!R.has(L))return R.get(L,n),d}if(d++,d===f)return d;if(m&&++v>tC){if(Date.now()>b)return n(),d;v=0}}}endDrawing(){_(this,Ps,nS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),_(this,Ps,sS).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=n,d=a,f="prescale1",m,b;for(;o>2&&h>1||c>2&&d>1;){let v=h,S=d;o>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/v),c>2&&d>1&&(S=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/S),m=this.cachedCanvases.getCanvas(f,v,S),b=m.context,b.clearRect(0,0,v,S),b.drawImage(t,0,0,h,d,0,0,v,S),t=m.canvas,h=v,d=S,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){var it,et;const n=this.ctx,{width:a,height:o}=e,c=this.current.fillColor,h=this.current.patternFill,d=xe(n);let f,m,b,v;if((e.bitmap||e.data)&&e.count>1){const rt=e.bitmap||e.data.buffer;m=JSON.stringify(h?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(rt),f||(f=new Map,this._cachedBitmapsMap.set(rt,f));const yt=f.get(m);if(yt&&!h){const gt=Math.round(Math.min(d[0],d[2])+d[4]),wt=Math.round(Math.min(d[1],d[3])+d[5]);return(it=this.dependencyTracker)==null||it.recordDependencies(t,es.transformAndFill),{canvas:yt,offsetX:gt,offsetY:wt}}b=yt}b||(v=this.cachedCanvases.getCanvas("maskCanvas",a,o),nC(v.context,e));let S=ut.transform(d,[1/a,0,0,-1/o,0,0]);S=ut.transform(S,[1,0,0,1,0,-o]);const C=Fu.slice();ut.axialAlignedBoundingBox([0,0,a,o],S,C);const[T,M,x,L]=C,R=Math.round(x-T)||1,O=Math.round(L-M)||1,N=this.cachedCanvases.getCanvas("fillCanvas",R,O),B=N.context,F=T,W=M;B.translate(-F,-W),B.transform(...S),b||(b=this._scaleImage(v.canvas,js(B)),b=b.img,f&&h&&f.set(m,b)),B.imageSmoothingEnabled=sC(xe(B),e.interpolate),gy(B,b,0,0,b.width,b.height,0,0,a,o),B.globalCompositeOperation="source-in";const Z=ut.transform(js(B),[1,0,0,1,-F,-W]);return B.fillStyle=h?c.getPattern(n,this,Z,_i.FILL,t):c,B.fillRect(0,0,a,o),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,N.canvas)),(et=this.dependencyTracker)==null||et.recordDependencies(t,es.transformAndFill),{canvas:N.canvas,offsetX:Math.round(F),offsetY:Math.round(W)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=JO[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=tN[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var o;(o=this.dependencyTracker)==null||o.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,a,o,c,h;for(const[d,f]of e)switch(d){case"LW":this.setLineWidth(t,f);break;case"LC":this.setLineCap(t,f);break;case"LJ":this.setLineJoin(t,f);break;case"ML":this.setMiterLimit(t,f);break;case"D":this.setDash(t,f[0],f[1]);break;case"RI":this.setRenderingIntent(t,f);break;case"FL":this.setFlatness(t,f);break;case"Font":this.setFont(t,f[0],f[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=f;break;case"ca":(a=this.dependencyTracker)==null||a.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=f;break;case"BM":(o=this.dependencyTracker)==null||o.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=f;break;case"SMask":(c=this.dependencyTracker)==null||c.recordSimpleData("SMask",t),this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(h=this.dependencyTracker)==null||h.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(f);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,n);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),pf(this.suspendedCtx,c),WO(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),pf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,a){const o=a[0],c=a[1],h=a[2]-o,d=a[3]-c;h===0||d===0||(this.genericComposeSMask(e.context,n,h,d,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,a,o,c,h,d,f,m,b){let v=t.canvas,S=d-m,C=f-b;if(c)if(S<0||C<0||S+n>v.width||C+a>v.height){const M=this.cachedCanvases.getCanvas("maskExtension",n,a),x=M.context;x.drawImage(v,-S,-C),x.globalCompositeOperation="destination-atop",x.fillStyle=c,x.fillRect(0,0,n,a),x.globalCompositeOperation="source-over",v=M.canvas,S=C=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const M=new Path2D;M.rect(S,C,n,a),t.clip(M),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(S,C,n,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const T=new Path2D;T.rect(d,f,n,a),e.clip(T),e.globalCompositeOperation="destination-in",e.drawImage(v,S,C,n,a,d,f,n,a),e.restore()}save(t){var n;this.inSMaskMode&&pf(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&pf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,a,o,c,h){var d;(d=this.dependencyTracker)==null||d.recordIncrementalData("transform",t),this.ctx.transform(e,n,a,o,c,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,a){let[o]=n;if(!a){o||(o=n[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const c=e===jf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=PC(o)),ut.axialAlignedBoundingBox(a,xe(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var c;const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&(o!=null&&o.getPattern)){const h=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,js(a),_i.STROKE,t),h){const d=new Path2D;d.addPath(e,a.getTransform().invertSelf().multiplySelf(h)),e=d}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);(c=this.dependencyTracker)==null||c.recordDependencies(t,es.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(_i.STROKE,xe(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var f,m,b;const a=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let h=!1;if(c){const v=o.isModifyingCurrentTransform()?a.getTransform():null;if((f=this.dependencyTracker)==null||f.save(t),a.save(),a.fillStyle=o.getPattern(a,this,js(a),_i.FILL,t),v){const S=new Path2D;S.addPath(e,a.getTransform().invertSelf().multiplySelf(v)),e=S}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),(m=this.dependencyTracker)==null||m.recordDependencies(t,es.fill),h&&(a.restore(),(b=this.dependencyTracker)==null||b.restore(t)),n&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,es.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=eN}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=aC}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=n.getTransform().invertSelf();for(const{transform:c,x:h,y:d,fontSize:f,path:m}of e)m&&a.addPath(m,new DOMMatrix(c).preMultiplySelf(o).translate(h,d).scale(f,-f));n.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var b,v;(b=this.dependencyTracker)==null||b.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||TA,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Tt("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=n,a.isType3Font)return;const c=a.loadedName||"sans-serif",h=((v=a.systemFontInfo)==null?void 0:v.css)||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let m=n;n<ZT?m=ZT:n>JT&&(m=JT),this.current.fontSizeScale=n/m,this.ctx.font=`${f} ${d} ${m}px ${h}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var a;(a=this.dependencyTracker)==null||a.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var a;(a=this.dependencyTracker)==null||a.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,a,o,c){var x,L,R,O;const h=this.ctx,d=this.current,f=d.font,m=d.textRenderingMode,b=d.fontSize/d.fontSizeScale,v=m&bi.FILL_STROKE_MASK,S=!!(m&bi.ADD_TO_PATH_FLAG),C=d.patternFill&&!f.missingFile,T=d.patternStroke&&!f.missingFile;let M;if((f.disableFontFace||S||C||T)&&!f.missingFile&&(M=f.getPathGenerator(this.commonObjs,e)),M&&(f.disableFontFace||C||T)){h.save(),h.translate(n,a),h.scale(b,-b),(x=this.dependencyTracker)==null||x.recordCharacterBBox(t,h,f);let N;if(v===bi.FILL||v===bi.FILL_STROKE)if(o){N=h.getTransform(),h.setTransform(...o);const B=_(this,Ps,aS).call(this,M,N,o);h.fill(B)}else h.fill(M);if(v===bi.STROKE||v===bi.FILL_STROKE)if(c){N||(N=h.getTransform()),h.setTransform(...c);const{a:B,b:F,c:W,d:Z}=N,it=ut.inverseTransform(c),et=ut.transform([B,F,W,Z,0,0],it);ut.singularValueDecompose2dScale(et,Hn),h.lineWidth*=Math.max(Hn[0],Hn[1])/b,h.stroke(_(this,Ps,aS).call(this,M,N,c))}else h.lineWidth/=b,h.stroke(M);h.restore()}else(v===bi.FILL||v===bi.FILL_STROKE)&&(h.fillText(e,n,a),(L=this.dependencyTracker)==null||L.recordCharacterBBox(t,h,f,b,n,a,()=>h.measureText(e))),(v===bi.STROKE||v===bi.FILL_STROKE)&&(this.dependencyTracker&&((R=this.dependencyTracker)==null||R.recordCharacterBBox(t,h,f,b,n,a,()=>h.measureText(e)).recordDependencies(t,es.stroke)),h.strokeText(e,n,a));S&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:xe(h),x:n,y:a,fontSize:b,path:M}),(O=this.dependencyTracker)==null||O.recordCharacterBBox(t,h,f,b,n,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){n=!0;break}return Ct(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var W,Z,it,et;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,es.showText).resetBBox(t),this.current.textRenderingMode&bi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,a=n.font;if(a.isType3Font){this.showType3Text(t,e),(W=this.dependencyTracker)==null||W.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){(Z=this.dependencyTracker)==null||Z.recordOperation(t);return}const c=this.ctx,h=n.fontSizeScale,d=n.charSpacing,f=n.wordSpacing,m=n.fontDirection,b=n.textHScale*m,v=e.length,S=a.vertical,C=S?1:-1,T=a.defaultVMetrics,M=o*n.fontMatrix[0],x=n.textRenderingMode===bi.FILL&&!a.disableFontFace&&!n.patternFill;c.save(),n.textMatrix&&c.transform(...n.textMatrix),c.translate(n.x,n.y+n.textRise),m>0?c.scale(b,-1):c.scale(b,1);let L,R;if(n.patternFill){c.save();const rt=n.fillColor.getPattern(c,this,js(c),_i.FILL,t);L=xe(c),c.restore(),c.fillStyle=rt}if(n.patternStroke){c.save();const rt=n.strokeColor.getPattern(c,this,js(c),_i.STROKE,t);R=xe(c),c.restore(),c.strokeStyle=rt}let O=n.lineWidth;const N=n.textMatrixScale;if(N===0||O===0){const rt=n.textRenderingMode&bi.FILL_STROKE_MASK;(rt===bi.STROKE||rt===bi.FILL_STROKE)&&(O=this.getSinglePixelWidth())}else O/=N;if(h!==1&&(c.scale(h,h),O/=h),c.lineWidth=O,a.isInvalidPDFjsFont){const rt=[];let yt=0;for(const wt of e)rt.push(wt.unicode),yt+=wt.width;const gt=rt.join("");if(c.fillText(gt,0,0),this.dependencyTracker!==null){const wt=c.measureText(gt);this.dependencyTracker.recordBBox(t,this.ctx,-wt.actualBoundingBoxLeft,wt.actualBoundingBoxRight,-wt.actualBoundingBoxAscent,wt.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=yt*M*b,c.restore(),this.compose();return}let B=0,F;for(F=0;F<v;++F){const rt=e[F];if(typeof rt=="number"){B+=C*rt*o/1e3;continue}let yt=!1;const gt=(rt.isSpace?f:0)+d,wt=rt.fontChar,H=rt.accent;let X,at,St=rt.width;if(S){const q=rt.vmetric||T,J=-(rt.vmetric?q[1]:St*.5)*M,lt=q[2]*M;St=q?-q[0]:St,X=J/h,at=(B+lt)/h}else X=B/h,at=0;let kt;if(a.remeasure&&St>0){kt=c.measureText(wt);const q=kt.width*1e3/o*h;if(St<q&&this.isFontSubpixelAAEnabled){const J=St/q;yt=!0,c.save(),c.scale(J,1),X/=J}else St!==q&&(X+=(St-q)/2e3*o/h)}if(this.contentVisible&&(rt.isInFont||a.missingFile)){if(x&&!H)c.fillText(wt,X,at),(it=this.dependencyTracker)==null||it.recordCharacterBBox(t,c,kt?{bbox:null}:a,o/h,X,at,()=>kt??c.measureText(wt));else if(this.paintChar(t,wt,X,at,L,R),H){const q=X+o*H.offset.x/h,J=at-o*H.offset.y/h;this.paintChar(t,H.fontChar,q,J,L,R)}}const z=S?St*M-gt*m:St*M+gt*m;B+=z,yt&&c.restore()}S?n.y-=B:n.x+=B*b,c.restore(),this.compose(),(et=this.dependencyTracker)==null||et.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,a=this.current,o=a.font,c=a.fontSize,h=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,m=a.wordSpacing,b=a.textHScale*h,v=a.fontMatrix||TA,S=e.length,C=a.textRenderingMode===bi.INVISIBLE;let T,M,x,L;if(C||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),a.textMatrix&&n.transform(...a.textMatrix),n.translate(a.x,a.y+a.textRise),n.scale(b,h);const R=this.dependencyTracker;for(this.dependencyTracker=R?new lb(R,t):null,T=0;T<S;++T){if(M=e[T],typeof M=="number"){L=d*M*c/1e3,this.ctx.translate(L,0),a.x+=L*b;continue}const O=(M.isSpace?m:0)+f,N=o.charProcOperatorList[M.operatorListId];N?this.contentVisible&&(this.save(),n.scale(c,c),n.transform(...v),this.executeOperatorList(N),this.restore()):Tt(`Type3 character "${M.operatorListId}" is not available.`);const B=[M.width,0];ut.applyTransform(B,v),x=B[0]*c+O,n.translate(x,0),a.x+=x*b}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,a,o,c,h){var f;const d=new Path2D;d.rect(a,o,c-a,h-o),this.ctx.clip(d),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,a,c,o,h).recordClipBox(t,this.ctx,a,c,o,h),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const a=this.baseTransform||xe(this.ctx),o={createCanvasGraphics:(c,h)=>new yw(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new lb(this.dependencyTracker,h,!0):null)};n=new iS(e,this.ctx,o,a)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=$O(this.getObject(t,e)),this.cachedPatterns.set(e,a)),n&&(a.matrix=n),a}shadingFill(t,e){var c;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const a=this._getPattern(t,e);n.fillStyle=a.getPattern(n,this,js(n),_i.SHADING,t);const o=js(n);if(o){const{width:h,height:d}=n.canvas,f=Fu.slice();ut.axialAlignedBoundingBox([0,0,h,d],o,f);const[m,b,v,S]=f;this.ctx.fillRect(m,b,v-m,S-b)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(c=this.dependencyTracker)==null||c.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,es.transform).recordDependencies(t,es.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ge("Should not call beginInlineImage")}beginImageData(){ge("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var a;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=xe(this.ctx),n)){ut.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[o,c,h,d]=n,f=new Path2D;f.rect(o,c,h-o,d-c),this.ctx.clip(f),(a=this.dependencyTracker)==null||a.recordClipBox(t,this.ctx,o,h,c,d),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var R;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Pb("TODO: Support non-isolated groups."),e.knockout&&Tt("Knockout groups not supported.");const a=xe(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Fu.slice();ut.axialAlignedBoundingBox(e.bbox,xe(n),o);const c=[0,0,n.canvas.width,n.canvas.height];o=ut.intersect(o,c)||[0,0,0,0];const h=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-h,1),m=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,m]);let b="groupAt"+this.groupLevel;e.smask&&(b+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(b,f,m),S=v.context;S.translate(-h,-d),S.transform(...a);let C=new Path2D;const[T,M,x,L]=e.bbox;if(C.rect(T,M,x-T,L-M),e.matrix){const O=new Path2D;O.addPath(C,new DOMMatrix(e.matrix)),C=O}S.clip(C),e.smask&&this.smaskStack.push({canvas:v.canvas,context:S,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(h,d),n.save()),pf(n,S),this.ctx=S,(R=this.dependencyTracker)==null||R.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var o;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,(o=this.dependencyTracker)==null||o.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const c=xe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...c);const h=Fu.slice();ut.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],c,h),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotation(t,e,n,a,o,c){if(_(this,Ps,nS).call(this),py(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const h=n[2]-n[0],d=n[3]-n[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=n[0],a[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=h,n[3]=d,ut.singularValueDecompose2dScale(xe(this.ctx),Hn);const{viewportScale:f}=this,m=Math.ceil(h*this.outputScaleX*f),b=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,b);const{canvas:v,context:S}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=S,this.ctx.save(),this.ctx.setTransform(Hn[0],0,0,-Hn[1],0,d*Hn[1]),py(this.ctx)}else{py(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],h,d),this.ctx.clip(f)}}this.current=new eC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),_(this,Ps,sS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var h;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const a=this.ctx,o=this._createMaskCanvas(t,e),c=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,o.offsetX,o.offsetY),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,a=0,o=0,c,h){var b,v,S;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=xe(d);d.transform(n,a,o,c,0,0);const m=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),(b=this.dependencyTracker)==null||b.resetBBox(t);for(let C=0,T=h.length;C<T;C+=2){const M=ut.transform(f,[n,a,o,c,h[C],h[C+1]]);d.drawImage(m.canvas,M[4],M[5]),(v=this.dependencyTracker)==null||v.recordBBox(t,this.ctx,M[4],M[4]+m.canvas.width,M[5],M[5]+m.canvas.height)}d.restore(),this.compose(),(S=this.dependencyTracker)==null||S.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var c,h,d;if(!this.contentVisible)return;const n=this.ctx,a=this.current.fillColor,o=this.current.patternFill;(c=this.dependencyTracker)==null||c.resetBBox(t).recordDependencies(t,es.transformAndFill);for(const f of e){const{data:m,width:b,height:v,transform:S}=f,C=this.cachedCanvases.getCanvas("maskCanvas",b,v),T=C.context;T.save();const M=this.getObject(t,m,f);nC(T,M),T.globalCompositeOperation="source-in",T.fillStyle=o?a.getPattern(T,this,js(n),_i.FILL,t):a,T.fillRect(0,0,b,v),T.restore(),n.save(),n.transform(...S),n.scale(1,-1),gy(n,C.canvas,0,0,b,v,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,n,0,b,0,v),n.restore()}this.compose(),(d=this.dependencyTracker)==null||d.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Tt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,a,o){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){Tt("Dependent image isn't ready yet");return}const h=c.width,d=c.height,f=[];for(let m=0,b=o.length;m<b;m+=2)f.push({transform:[n,0,0,a,o[m],o[m+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,e){var f;if(!this.contentVisible)return;const n=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/n,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const b=this.cachedCanvases.getCanvas("inlineImage",n,a).context;iC(b,e),h=this.applyTransferMapsToCanvas(b)}const d=this._scaleImage(h,js(o));o.imageSmoothingEnabled=sC(xe(o),e.interpolate),(f=this.dependencyTracker)==null||f.resetBBox(t).recordBBox(t,o,0,n,-a,0).recordDependencies(t,es.imageXObject).recordOperation(t),gy(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,n,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var c,h,d;if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const f=e.width,m=e.height,v=this.cachedCanvases.getCanvas("inlineImage",f,m).context;iC(v,e),o=this.applyTransferMapsToCanvas(v)}(c=this.dependencyTracker)==null||c.resetBBox(t);for(const f of n)a.save(),a.transform(...f.transform),a.scale(1,-1),gy(a,o,f.x,f.y,f.w,f.h,0,-1,1,1),(h=this.dependencyTracker)==null||h.recordBBox(t,a,0,1,-1,0),a.restore();(d=this.dependencyTracker)==null||d.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,es.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var a;(a=this.dependencyTracker)==null||a.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var c,h;const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===aC?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,(c=this.dependencyTracker)==null||c.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(h=this.dependencyTracker)==null||h.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=xe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:a,d:o}=this.ctx.getTransform();let c,h;if(n===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)c=h=1/d;else{const m=d*t;c=h=m<1?1/m:1}else if(t===0)c=1/d,h=1/f;else{const m=d*t,b=f*t;c=m<1?1/m:1,h=b<1?1/b:1}}else{const d=Math.abs(e*o-n*a),f=Math.hypot(e,n),m=Math.hypot(a,o);if(t===0)c=m/d,h=f/d;else{const b=t*d;c=m>b?m/b:1,h=f>b?f/b:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:a}}=this,[o,c]=this.getScaleForStroking();if(o===c){n.lineWidth=(a||1)*o,n.stroke(t);return}const h=n.getLineDash();e&&n.save(),n.scale(o,c),bA.a=1/o,bA.d=1/c;const d=new Path2D;if(d.addPath(t,bA),h.length>0){const f=Math.max(o,c);n.setLineDash(h.map(m=>m/f)),n.lineDashOffset/=f}n.lineWidth=a||1,n.stroke(d),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Ps=new WeakSet,nS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},sS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},aS=function(t,e,n){const a=new Path2D;return a.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),a};let Gu=yw;for(const g in jf)Gu.prototype[g]!==void 0&&(Gu.prototype[jf[g]]=Gu.prototype[g]);var Ng,kg;class fa{static get workerPort(){return l(this,Ng)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,Ng,t)}static get workerSrc(){return l(this,kg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,kg,t)}}Ng=new WeakMap,kg=new WeakMap,E(fa,Ng,null),E(fa,kg,"");var Th,Bg;class iN{constructor({parsedData:t,rawData:e}){E(this,Th);E(this,Bg);A(this,Th,t),A(this,Bg,e)}getRaw(){return l(this,Bg)}get(t){return l(this,Th).get(t)??null}[Symbol.iterator](){return l(this,Th).entries()}}Th=new WeakMap,Bg=new WeakMap;const ku=Symbol("INTERNAL");var zg,Pg,Fg,Ch;class nN{constructor(t,{name:e,intent:n,usage:a,rbGroups:o}){E(this,zg,!1);E(this,Pg,!1);E(this,Fg,!1);E(this,Ch,!0);A(this,zg,!!(t&Un.DISPLAY)),A(this,Pg,!!(t&Un.PRINT)),this.name=e,this.intent=n,this.usage=a,this.rbGroups=o}get visible(){if(l(this,Fg))return l(this,Ch);if(!l(this,Ch))return!1;const{print:t,view:e}=this.usage;return l(this,zg)?(e==null?void 0:e.viewState)!=="OFF":l(this,Pg)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==ku&&ge("Internal method `_setVisible` called."),A(this,Fg,n),A(this,Ch,e)}}zg=new WeakMap,Pg=new WeakMap,Fg=new WeakMap,Ch=new WeakMap;var El,oe,xh,Mh,Ug,rS;class sN{constructor(t,e=Un.DISPLAY){E(this,Ug);E(this,El,null);E(this,oe,new Map);E(this,xh,null);E(this,Mh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,Mh,t.order);for(const n of t.groups)l(this,oe).set(n.id,new nN(e,n));if(t.baseState==="OFF")for(const n of l(this,oe).values())n._setVisible(ku,!1);for(const n of t.on)l(this,oe).get(n)._setVisible(ku,!0);for(const n of t.off)l(this,oe).get(n)._setVisible(ku,!1);A(this,xh,this.getHash())}}isVisible(t){if(l(this,oe).size===0)return!0;if(!t)return Pb("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,oe).has(t.id)?l(this,oe).get(t.id).visible:(Tt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return _(this,Ug,rS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,oe).has(e))return Tt(`Optional content group not found: ${e}`),!0;if(l(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,oe).has(e))return Tt(`Optional content group not found: ${e}`),!0;if(!l(this,oe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,oe).has(e))return Tt(`Optional content group not found: ${e}`),!0;if(!l(this,oe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,oe).has(e))return Tt(`Optional content group not found: ${e}`),!0;if(l(this,oe).get(e).visible)return!1}return!0}return Tt(`Unknown optional content policy ${t.policy}.`),!0}return Tt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var o;const a=l(this,oe).get(t);if(!a){Tt(`Optional content group not found: ${t}`);return}if(n&&e&&a.rbGroups.length)for(const c of a.rbGroups)for(const h of c)h!==t&&((o=l(this,oe).get(h))==null||o._setVisible(ku,!1,!0));a._setVisible(ku,!!e,!0),A(this,El,null)}setOCGState({state:t,preserveRB:e}){let n;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":n=a;continue}const o=l(this,oe).get(a);if(o)switch(n){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}A(this,El,null)}get hasInitialVisibility(){return l(this,xh)===null||this.getHash()===l(this,xh)}getOrder(){return l(this,oe).size?l(this,Mh)?l(this,Mh).slice():[...l(this,oe).keys()]:null}getGroup(t){return l(this,oe).get(t)||null}getHash(){if(l(this,El)!==null)return l(this,El);const t=new px;for(const[e,n]of l(this,oe))t.update(`${e}:${n.visible}`);return A(this,El,t.hexdigest())}[Symbol.iterator](){return l(this,oe).entries()}}El=new WeakMap,oe=new WeakMap,xh=new WeakMap,Mh=new WeakMap,Ug=new WeakSet,rS=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let a=1;a<e;a++){const o=t[a];let c;if(Array.isArray(o))c=_(this,Ug,rS).call(this,o);else if(l(this,oe).has(o))c=l(this,oe).get(o).visible;else return Tt(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class aN{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Gt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,(o==null?void 0:o.length)>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});Gt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,a,o;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(o=(a=this._fullRequestReader)==null?void 0:a.onProgress)==null||o.call(a,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Gt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new rN(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new lN(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class rN{constructor(t,e,n=!1,a=null){this._stream=t,this._done=n||!1,this._filename=rw(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class lN{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function oN(g){let t=!0,e=n("filename\\*","i").exec(g);if(e){e=e[1];let m=h(e);return m=unescape(m),m=d(m),m=f(m),o(m)}if(e=c(g),e){const m=f(e);return o(m)}if(e=n("filename","i").exec(g),e){e=e[1];let m=h(e);return m=f(m),o(m)}function n(m,b){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function a(m,b){if(m){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const v=new TextDecoder(m,{fatal:!0}),S=Fp(b);b=v.decode(S),t=!1}catch{}}return b}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function c(m){const b=[];let v;const S=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=S.exec(m))!==null;){let[,T,M,x]=v;if(T=parseInt(T,10),T in b){if(T===0)break;continue}b[T]=[M,x]}const C=[];for(let T=0;T<b.length&&T in b;++T){let[M,x]=b[T];x=h(x),M&&(x=unescape(x),T===0&&(x=d(x))),C.push(x)}return C.join("")}function h(m){if(m.startsWith('"')){const b=m.slice(1).split('\\"');for(let v=0;v<b.length;++v){const S=b[v].indexOf('"');S!==-1&&(b[v]=b[v].slice(0,S),b.length=v+1),b[v]=b[v].replaceAll(/\\(.)/g,"$1")}m=b.join('"')}return m}function d(m){const b=m.indexOf("'");if(b===-1)return m;const v=m.slice(0,b),C=m.slice(b+1).replace(/^[^']*'/,"");return a(v,C)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,v,S,C){if(S==="q"||S==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(T,M){return String.fromCharCode(parseInt(M,16))}),a(v,C);try{C=atob(C)}catch{}return a(v,C)})}return""}function xx(g,t){const e=new Headers;if(!g||!t||typeof t!="object")return e;for(const n in t){const a=t[n];a!==void 0&&e.append(n,a)}return e}function Ub(g){var t;return((t=URL.parse(g))==null?void 0:t.origin)??null}function Mx({responseHeaders:g,isHttp:t,rangeChunkSize:e,disableRange:n}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(g.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||n||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Rx(g){const t=g.get("Content-Disposition");if(t){let e=oN(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(rw(e))return e}return null}function Gp(g,t){return new eb(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g,g===404||g===0&&t.startsWith("file:"))}function Dx(g){return g===200||g===206}function Lx(g,t,e){return{method:"GET",headers:g,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Ox(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(Tt(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class cN{constructor(t){tt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=xx(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new uN(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new hN(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class uN{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),a=e.url;fetch(a,Lx(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=Ub(o.url),!Dx(o.status))throw Gp(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:h,suggestedLength:d}=Mx({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=Rx(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new $l("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Ox(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class hN{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const c=a.url;fetch(c,Lx(o,this._withCredentials,this._abortController)).then(h=>{const d=Ub(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Dx(h.status))throw Gp(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:Ox(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const vA=200,AA=206;function dN(g){const t=g.response;return typeof t!="string"?t:Fp(t).buffer}class fN{constructor({url:t,httpHeaders:e,withCredentials:n}){tt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=xx(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,c]of this.headers)e.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=AA):a.expectedStatus=vA,e.responseType="arraybuffer",Gt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var a;const n=this.pendingRequests[t];n&&((a=n.onProgress)==null||a.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const a=n.xhr;if(a.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){n.onError(a.status);return}const o=a.status||vA;if(!(o===vA&&n.expectedStatus===AA)&&o!==n.expectedStatus){n.onError(a.status);return}const h=dN(a);if(o===AA){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?n.onDone({begin:parseInt(f[1],10),chunk:h}):(Tt('Missing or invalid "Content-Range" header.'),n.onError(0))}else h?n.onDone({begin:0,chunk:h}):n.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class gN{constructor(t){this._source=t,this._manager=new fN(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Gt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new pN(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new mN(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class pN{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Ub(e.responseURL);const n=e.getAllResponseHeaders(),a=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=Mx({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Rx(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Gp(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mN{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Ub((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Gp(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const yN=/^[a-z][a-z0-9\-+.]+:/i;function bN(g){if(yN.test(g))return new URL(g);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(g))}class vN{constructor(t){this.source=t,this.url=bN(t.url),Gt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new AN(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new SN(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class AN{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Gp(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new $l("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class SN{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const mf=Symbol("INITIAL_DATA");var Tn,Hg,lS;class Nx{constructor(){E(this,Hg);E(this,Tn,Object.create(null))}get(t,e=null){if(e){const a=_(this,Hg,lS).call(this,t);return a.promise.then(()=>e(a.data)),null}const n=l(this,Tn)[t];if(!n||n.data===mf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=l(this,Tn)[t];return!!e&&e.data!==mf}delete(t){const e=l(this,Tn)[t];return!e||e.data===mf?!1:(delete l(this,Tn)[t],!0)}resolve(t,e=null){const n=_(this,Hg,lS).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in l(this,Tn)){const{data:n}=l(this,Tn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}A(this,Tn,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,Tn)){const{data:e}=l(this,Tn)[t];e!==mf&&(yield[t,e])}}}Tn=new WeakMap,Hg=new WeakSet,lS=function(t){var e;return(e=l(this,Tn))[t]||(e[t]={...Promise.withResolvers(),data:mf})};const wN=1e5,rC=30;var cC,_l,rn,Ig,jg,tc,sr,Gg,qg,ec,Rh,Dh,Tl,Lh,Vg,Oh,ic,Xg,Yg,Nh,nc,$g,Cl,kh,Mr,kx,Bx,oS,jn,Ly,cS,zx,Px;const Je=class Je{constructor({textContentSource:t,container:e,viewport:n}){E(this,Mr);E(this,_l,Promise.withResolvers());E(this,rn,null);E(this,Ig,!1);E(this,jg,!!((cC=globalThis.FontInspector)!=null&&cC.enabled));E(this,tc,null);E(this,sr,null);E(this,Gg,0);E(this,qg,0);E(this,ec,null);E(this,Rh,null);E(this,Dh,0);E(this,Tl,0);E(this,Lh,Object.create(null));E(this,Vg,[]);E(this,Oh,null);E(this,ic,[]);E(this,Xg,new WeakMap);E(this,Yg,null);var d;if(t instanceof ReadableStream)A(this,Oh,t);else if(typeof t=="object")A(this,Oh,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,rn,A(this,Rh,e)),A(this,Tl,n.scale*ga.pixelRatio),A(this,Dh,n.rotation),A(this,sr,{div:null,properties:null,ctx:null});const{pageWidth:a,pageHeight:o,pageX:c,pageY:h}=n.rawDims;A(this,Yg,[1,0,0,-1,-c,h+o]),A(this,qg,a),A(this,Gg,o),_(d=Je,jn,zx).call(d),Fc(e,n),l(this,_l).promise.finally(()=>{l(Je,kh).delete(this),A(this,sr,null),A(this,Lh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=xi.platform;return Ct(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,ec).read().then(({value:e,done:n})=>{if(n){l(this,_l).resolve();return}l(this,tc)??A(this,tc,e.lang),Object.assign(l(this,Lh),e.styles),_(this,Mr,kx).call(this,e.items),t()},l(this,_l).reject)};return A(this,ec,l(this,Oh).getReader()),l(Je,kh).add(this),t(),l(this,_l).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*ga.pixelRatio,a=t.rotation;if(a!==l(this,Dh)&&(e==null||e(),A(this,Dh,a),Fc(l(this,Rh),{rotation:a})),n!==l(this,Tl)){e==null||e(),A(this,Tl,n);const c={div:null,properties:null,ctx:_(o=Je,jn,Ly).call(o,l(this,tc))};for(const h of l(this,ic))c.properties=l(this,Xg).get(h),c.div=h,_(this,Mr,oS).call(this,c)}}cancel(){var e;const t=new $l("TextLayer task cancelled.");(e=l(this,ec))==null||e.cancel(t).catch(()=>{}),A(this,ec,null),l(this,_l).reject(t)}get textDivs(){return l(this,ic)}get textContentItemsStr(){return l(this,Vg)}static cleanup(){if(!(l(this,kh).size>0)){l(this,Nh).clear();for(const{canvas:t}of l(this,nc).values())t.remove();l(this,nc).clear()}}};_l=new WeakMap,rn=new WeakMap,Ig=new WeakMap,jg=new WeakMap,tc=new WeakMap,sr=new WeakMap,Gg=new WeakMap,qg=new WeakMap,ec=new WeakMap,Rh=new WeakMap,Dh=new WeakMap,Tl=new WeakMap,Lh=new WeakMap,Vg=new WeakMap,Oh=new WeakMap,ic=new WeakMap,Xg=new WeakMap,Yg=new WeakMap,Nh=new WeakMap,nc=new WeakMap,$g=new WeakMap,Cl=new WeakMap,kh=new WeakMap,Mr=new WeakSet,kx=function(t){var a,o;if(l(this,Ig))return;(o=l(this,sr)).ctx??(o.ctx=_(a=Je,jn,Ly).call(a,l(this,tc)));const e=l(this,ic),n=l(this,Vg);for(const c of t){if(e.length>wN){Tt("Ignoring additional textDivs for performance reasons."),A(this,Ig,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const h=l(this,rn);A(this,rn,document.createElement("span")),l(this,rn).classList.add("markedContent"),c.id&&l(this,rn).setAttribute("id",`${c.id}`),h.append(l(this,rn))}else c.type==="endMarkedContent"&&A(this,rn,l(this,rn).parentNode);continue}n.push(c.str),_(this,Mr,Bx).call(this,c)}},Bx=function(t){var T;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,ic).push(e);const a=ut.transform(l(this,Yg),t.transform);let o=Math.atan2(a[1],a[0]);const c=l(this,Lh)[t.fontName];c.vertical&&(o+=Math.PI/2);let h=l(this,jg)&&c.fontSubstitution||c.fontFamily;h=Je.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*_(T=Je,jn,Px).call(T,h,c,l(this,tc));let m,b;o===0?(m=a[4],b=a[5]-f):(m=a[4]+f*Math.sin(o),b=a[5]-f*Math.cos(o));const v="calc(var(--total-scale-factor) *",S=e.style;l(this,rn)===l(this,Rh)?(S.left=`${(100*m/l(this,qg)).toFixed(2)}%`,S.top=`${(100*b/l(this,Gg)).toFixed(2)}%`):(S.left=`${v}${m.toFixed(2)}px)`,S.top=`${v}${b.toFixed(2)}px)`),S.fontSize=`${v}${(l(Je,Cl)*d).toFixed(2)}px)`,S.fontFamily=h,n.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,jg)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let C=!1;if(t.str.length>1)C=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const M=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);M!==x&&Math.max(M,x)/Math.min(M,x)>1.5&&(C=!0)}if(C&&(n.canvasWidth=c.vertical?t.height:t.width),l(this,Xg).set(e,n),l(this,sr).div=e,l(this,sr).properties=n,_(this,Mr,oS).call(this,l(this,sr)),n.hasText&&l(this,rn).append(e),n.hasEOL){const M=document.createElement("br");M.setAttribute("role","presentation"),l(this,rn).append(M)}},oS=function(t){var h;const{div:e,properties:n,ctx:a}=t,{style:o}=e;let c="";if(l(Je,Cl)>1&&(c=`scale(${1/l(Je,Cl)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:d}=o,{canvasWidth:f,fontSize:m}=n;_(h=Je,jn,cS).call(h,a,m*l(this,Tl),d);const{width:b}=a.measureText(e.textContent);b>0&&(c=`scaleX(${f*l(this,Tl)/b}) ${c}`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(o.transform=c)},jn=new WeakSet,Ly=function(t=null){let e=l(this,nc).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,nc).set(t,e),l(this,$g).set(e,{size:0,family:""})}return e},cS=function(t,e,n){const a=l(this,$g).get(t);e===a.size&&n===a.family||(t.font=`${e}px ${n}`,a.size=e,a.family=n)},zx=function(){if(l(this,Cl)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,Cl,t.getBoundingClientRect().height),t.remove()},Px=function(t,e,n){const a=l(this,Nh).get(t);if(a)return a;const o=_(this,jn,Ly).call(this,n);o.canvas.width=o.canvas.height=rC,_(this,jn,cS).call(this,o,rC,t);const c=o.measureText(""),h=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return h?f=h/(h+d):(xi.platform.isFirefox&&Tt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),l(this,Nh).set(t,f),f},E(Je,jn),E(Je,Nh,new Map),E(Je,nc,new Map),E(Je,$g,new WeakMap),E(Je,Cl,null),E(Je,kh,new Set);let qf=Je;const EN=100;function Fx(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new uS,{docId:e}=t,n=g.url?DO(g.url):null,a=g.data?LO(g.data):null,o=g.httpHeaders||null,c=g.withCredentials===!0,h=g.password??null,d=g.range instanceof Ux?g.range:null,f=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:2**16;let m=g.worker instanceof Vf?g.worker:null;const b=g.verbosity,v=typeof g.docBaseUrl=="string"&&!Fb(g.docBaseUrl)?g.docBaseUrl:null,S=uy(g.cMapUrl),C=g.cMapPacked!==!1,T=g.CMapReaderFactory||(ji?UO:XT),M=uy(g.iccUrl),x=uy(g.standardFontDataUrl),L=g.StandardFontDataFactory||(ji?HO:YT),R=uy(g.wasmUrl),O=g.WasmFactory||(ji?IO:$T),N=g.stopAtErrors!==!0,B=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,F=g.isEvalSupported!==!1,W=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!ji,Z=typeof g.isImageDecoderSupported=="boolean"?g.isImageDecoderSupported:!ji&&(xi.platform.isFirefox||!globalThis.chrome),it=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,et=typeof g.disableFontFace=="boolean"?g.disableFontFace:ji,rt=g.fontExtraProperties===!0,yt=g.enableXfa===!0,gt=g.ownerDocument||globalThis.document,wt=g.disableRange===!0,H=g.disableStream===!0,X=g.disableAutoFetch===!0,at=g.pdfBug===!0,St=g.CanvasFactory||(ji?FO:BO),kt=g.FilterFactory||(ji?PO:zO),z=g.enableHWA===!0,q=g.useWasm!==!1,J=d?d.length:g.length??NaN,lt=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!ji&&!et,mt=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:!!(T===XT&&L===YT&&O===$T&&S&&x&&R&&vf(S,document.baseURI)&&vf(x,document.baseURI)&&vf(R,document.baseURI)),Et=null;sO(b);const bt={canvasFactory:new St({ownerDocument:gt,enableHWA:z}),filterFactory:new kt({docId:e,ownerDocument:gt}),cMapReaderFactory:mt?null:new T({baseUrl:S,isCompressed:C}),standardFontDataFactory:mt?null:new L({baseUrl:x}),wasmFactory:mt?null:new O({baseUrl:R})};m||(m=Vf.create({verbosity:b,port:fa.workerPort}),t._worker=m);const Qe={docId:e,apiVersion:"5.4.449",data:a,password:h,disableAutoFetch:X,rangeChunkSize:f,length:J,docBaseUrl:v,enableXfa:yt,evaluatorOptions:{maxImageSize:B,disableFontFace:et,ignoreErrors:N,isEvalSupported:F,isOffscreenCanvasSupported:W,isImageDecoderSupported:Z,canvasMaxAreaInBytes:it,fontExtraProperties:rt,useSystemFonts:lt,useWasm:q,useWorkerFetch:mt,cMapUrl:S,iccUrl:M,standardFontDataUrl:x,wasmUrl:R}},be={ownerDocument:gt,pdfBug:at,styleElement:Et,loadingParams:{disableAutoFetch:X,enableXfa:yt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ys=m.messageHandler.sendWithPromise("GetDocRequest",Qe,a?[a.buffer]:null);let Gn;if(d)Gn=new aN(d,{disableRange:wt,disableStream:H});else if(!a){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Wl=vf(n)?cN:ji?vN:gN;Gn=new Wl({url:n,length:J,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:wt,disableStream:H})}return ys.then(Wl=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const yd=new xf(e,Wl,m.port),ya=new CN(yd,t,Gn,be,bt,z);t._transport=ya,yd.send("Ready",null)})}).catch(t._capability.reject),t}var Eb;const _b=class _b{constructor(){tt(this,"_capability",Promise.withResolvers());tt(this,"_transport",null);tt(this,"_worker",null);tt(this,"docId",`d${Ze(_b,Eb)._++}`);tt(this,"destroyed",!1);tt(this,"onPassword",null);tt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,a;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,o}this._transport=null,(a=this._worker)==null||a.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Eb=new WeakMap,E(_b,Eb,0);let uS=_b;var sc,Kg,Qg,Wg,Zg;class Ux{constructor(t,e,n=!1,a=null){E(this,sc,Promise.withResolvers());E(this,Kg,[]);E(this,Qg,[]);E(this,Wg,[]);E(this,Zg,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=a}addRangeListener(t){l(this,Zg).push(t)}addProgressListener(t){l(this,Wg).push(t)}addProgressiveReadListener(t){l(this,Qg).push(t)}addProgressiveDoneListener(t){l(this,Kg).push(t)}onDataRange(t,e){for(const n of l(this,Zg))n(t,e)}onDataProgress(t,e){l(this,sc).promise.then(()=>{for(const n of l(this,Wg))n(t,e)})}onDataProgressiveRead(t){l(this,sc).promise.then(()=>{for(const e of l(this,Qg))e(t)})}onDataProgressiveDone(){l(this,sc).promise.then(()=>{for(const t of l(this,Kg))t()})}transportReady(){l(this,sc).resolve()}requestDataRange(t,e){ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}sc=new WeakMap,Kg=new WeakMap,Qg=new WeakMap,Wg=new WeakMap,Zg=new WeakMap;class _N{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ar,ac,Of;class TN{constructor(t,e,n,a=!1){E(this,ac);E(this,ar,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=a?new UT:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new Nx,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:o=!1}={}){return new Hp({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ct(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:a="display",annotationMode:o=il.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:b=null,isEditing:v=!1,recordOperations:S=!1,operationsFilter:C=null}){var Z,it,et;(Z=this._stats)==null||Z.time("Overall");const T=this._transport.getRenderingIntent(a,o,b,v),{renderingIntent:M,cacheKey:x}=T;A(this,ar,!1),d||(d=this._transport.getOptionalContentConfig(M));let L=this._intentStates.get(x);L||(L=Object.create(null),this._intentStates.set(x,L)),L.streamReaderCancelTimeout&&(clearTimeout(L.streamReaderCancelTimeout),L.streamReaderCancelTimeout=null);const R=!!(M&Un.PRINT);L.displayReadyCapability||(L.displayReadyCapability=Promise.withResolvers(),L.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(it=this._stats)==null||it.time("Page Request"),this._pumpOperatorList(T));const O=!!(this._pdfBug&&((et=globalThis.StepperManager)!=null&&et.enabled)),N=!this.recordedBBoxes&&(S||O),B=rt=>{var yt,gt;if(L.renderTasks.delete(F),N){const wt=(yt=F.gfx)==null?void 0:yt.dependencyTracker.take();wt&&(F.stepper&&F.stepper.setOperatorBBoxes(wt,F.gfx.dependencyTracker.takeDebugMetadata()),S&&(this.recordedBBoxes=wt))}R&&A(this,ar,!0),_(this,ac,Of).call(this),rt?(F.capability.reject(rt),this._abortOperatorList({intentState:L,reason:rt instanceof Error?rt:new Error(rt)})):F.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(gt=globalThis.Stats)!=null&&gt.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},F=new hS({callback:B,params:{canvas:e,canvasContext:t,dependencyTracker:N?new GO(e,L.operatorList.length,O):null,viewport:n,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:L.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:C});(L.renderTasks||(L.renderTasks=new Set)).add(F);const W=F.task;return Promise.all([L.displayReadyCapability.promise,d]).then(([rt,yt])=>{var gt;if(this.destroyed){B();return}if((gt=this._stats)==null||gt.time("Rendering"),!(yt.renderingIntent&M))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");F.initializeGraphics({transparency:rt,optionalContentConfig:yt}),F.operatorListChanged()}).catch(B),W}getOperatorList({intent:t="display",annotationMode:e=il.ENABLE,printAnnotationStorage:n=null,isEditing:a=!1}={}){var f;function o(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,n,a,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||(h.renderTasks=new Set)).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(f=this._stats)==null||f.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Gf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,a){function o(){c.read().then(function({value:d,done:f}){if(f){n(h);return}h.lang??(h.lang=d.lang),Object.assign(h.styles,d.styles),h.items.push(...d.items),o()},a)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),A(this,ar,!1),Promise.all(t)}cleanup(t=!1){A(this,ar,!0);const e=_(this,ac,Of).call(this);return t&&e&&this._stats&&(this._stats=new UT),e}_startRenderPage(t,e){var a,o;const n=this._intentStates.get(e);n&&((a=this._stats)==null||a.timeEnd("Page Request"),(o=n.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let n=0,a=t.length;n<a;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&_(this,ac,Of).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:a}){const{map:o,transfer:c}=n,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const m=()=>{d.read().then(({value:b,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,f),m())},b=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();_(this,ac,Of).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(b);else if(f.opListReadCapability)f.opListReadCapability.reject(b);else throw b}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof aw){let a=EN;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new $l(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}ar=new WeakMap,ac=new WeakSet,Of=function(){if(!l(this,ar)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,ar,!1),!0};var xl,Ms,rr,rc,Tb,lc,oc,qi,Oy,Hx,Ix,Nf,Bh,Ny;const Ee=class Ee{constructor({name:t=null,port:e=null,verbosity:n=aO()}={}){E(this,qi);E(this,xl,Promise.withResolvers());E(this,Ms,null);E(this,rr,null);E(this,rc,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(l(Ee,oc).has(e))throw new Error("Cannot use more than one PDFWorker per port.");l(Ee,oc).set(e,this),_(this,qi,Hx).call(this,e)}else _(this,qi,Ix).call(this)}get promise(){return l(this,xl).promise}get port(){return l(this,rr)}get messageHandler(){return l(this,Ms)}destroy(){var t,e;this.destroyed=!0,(t=l(this,rc))==null||t.terminate(),A(this,rc,null),l(Ee,oc).delete(l(this,rr)),A(this,rr,null),(e=l(this,Ms))==null||e.destroy(),A(this,Ms,null)}static create(t){const e=l(this,oc).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Ee(t)}static get workerSrc(){if(fa.workerSrc)return fa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ct(this,"_setupFakeWorkerGlobal",(async()=>l(this,Bh,Ny)?l(this,Bh,Ny):(await import(this.workerSrc)).WorkerMessageHandler)())}};xl=new WeakMap,Ms=new WeakMap,rr=new WeakMap,rc=new WeakMap,Tb=new WeakMap,lc=new WeakMap,oc=new WeakMap,qi=new WeakSet,Oy=function(){l(this,xl).resolve(),l(this,Ms).send("configure",{verbosity:this.verbosity})},Hx=function(t){A(this,rr,t),A(this,Ms,new xf("main","worker",t)),l(this,Ms).on("ready",()=>{}),_(this,qi,Oy).call(this)},Ix=function(){if(l(Ee,lc)||l(Ee,Bh,Ny)){_(this,qi,Nf).call(this);return}let{workerSrc:t}=Ee;try{Ee._isSameOrigin(window.location,t)||(t=Ee._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new xf("main","worker",e),a=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?l(this,xl).reject(new Error("Worker was destroyed")):_(this,qi,Nf).call(this)},o=new AbortController;e.addEventListener("error",()=>{l(this,rc)||a()},{signal:o.signal}),n.on("test",h=>{if(o.abort(),this.destroyed||!h){a();return}A(this,Ms,n),A(this,rr,e),A(this,rc,e),_(this,qi,Oy).call(this)}),n.on("ready",h=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{_(this,qi,Nf).call(this)}});const c=()=>{const h=new Uint8Array;n.send("test",h,[h.buffer])};c();return}catch{Pb("The worker has been disabled.")}_(this,qi,Nf).call(this)},Nf=function(){l(Ee,lc)||(Tt("Setting up fake worker."),A(Ee,lc,!0)),Ee._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){l(this,xl).reject(new Error("Worker was destroyed"));return}const e=new kO;A(this,rr,e);const n=`fake${Ze(Ee,Tb)._++}`,a=new xf(n+"_worker",n,e);t.setup(a,e),A(this,Ms,new xf(n,n+"_worker",e)),_(this,qi,Oy).call(this)}).catch(t=>{l(this,xl).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Bh=new WeakSet,Ny=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},E(Ee,Bh),E(Ee,Tb,0),E(Ee,lc,!1),E(Ee,oc,new WeakMap),ji&&(A(Ee,lc,!0),fa.workerSrc||(fa.workerSrc="./pdf.worker.mjs")),Ee._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const a=new URL(e,n);return n.origin===a.origin},Ee._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Ee.fromPort=t=>{if(yO("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ee.create(t)};let Vf=Ee;var lr,na,zh,Ph,or,cc,kf;class CN{constructor(t,e,n,a,o,c){E(this,cc);E(this,lr,new Map);E(this,na,new Map);E(this,zh,new Map);E(this,Ph,new Map);E(this,or,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Nx,this.fontLoader=new MO({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}get annotationStorage(){return Ct(this,"annotationStorage",new lw)}getRenderingIntent(t,e=il.ENABLE,n=null,a=!1,o=!1){let c=Un.DISPLAY,h=YA;switch(t){case"any":c=Un.ANY;break;case"display":break;case"print":c=Un.PRINT;break;default:Tt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&Un.PRINT&&n instanceof yx?n:this.annotationStorage;switch(e){case il.DISABLE:c+=Un.ANNOTATIONS_DISABLE;break;case il.ENABLE:break;case il.ENABLE_FORMS:c+=Un.ANNOTATIONS_FORMS;break;case il.ENABLE_STORAGE:c+=Un.ANNOTATIONS_STORAGE,h=d.serializable;break;default:Tt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=Un.IS_EDITING),o&&(c+=Un.OPLIST);const{ids:f,hash:m}=d.modifiedIds,b=[c,h.hash,m];return{renderingIntent:c,cacheKey:b.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,or))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const a of l(this,na).values())t.push(a._destroy());l(this,na).clear(),l(this,zh).clear(),l(this,Ph).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var a,o;this.commonObjs.clear(),this.fontLoader.clear(),l(this,lr).clear(),this.filterFactory.destroy(),qf.cleanup(),(a=this._networkStream)==null||a.cancelAllRequests(new $l("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,a)=>{Gt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){a.close();return}Gt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{var h;await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:c}=this._fullReader;return(!a||!o)&&(this._lastProgress&&((h=e.onProgress)==null||h.call(e,this._lastProgress)),this._fullReader.onProgress=d=>{var f;(f=e.onProgress)==null||f.call(e,{loaded:d.loaded,total:d.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(n,a)=>{Gt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:h}){if(h){a.close();return}Gt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new _N(n,this))}),t.on("DocException",n=>{e._capability.reject(Ji(n))}),t.on("PasswordRequest",n=>{A(this,or,Promise.withResolvers());try{if(!e.onPassword)throw Ji(n);const a=o=>{o instanceof Error?l(this,or).reject(o):l(this,or).resolve({password:o})};e.onPassword(a,n.code)}catch(a){l(this,or).reject(a)}return l(this,or).promise}),t.on("DataLoaded",n=>{var a;(a=e.onProgress)==null||a.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,na).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,a,o])=>{var c;if(this.destroyed||this.commonObjs.has(n))return null;switch(a){case"Font":if("error"in o){const v=o.error;Tt(`Error during font loading: ${v}`),this.commonObjs.resolve(n,v);break}const h=new $A(o),d=this._params.pdfBug&&((c=globalThis.FontInspector)!=null&&c.enabled)?(v,S)=>globalThis.FontInspector.fontAdded(v,S):null,f=new RO(h,d,o.extra,o.charProcOperatorList);this.fontLoader.bind(f).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!f.fontExtraProperties&&f.data&&f.clearData(),this.commonObjs.resolve(n,f)});break;case"CopyLocalImage":const{imageRef:m}=o;Gt(m,"The imageRef must be defined.");for(const v of l(this,na).values())for(const[,S]of v.objs)if((S==null?void 0:S.ref)===m)return S.dataLen?(this.commonObjs.resolve(n,structuredClone(S)),S.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const b=new KA(o);this.commonObjs.resolve(n,b.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([n,a,o,c])=>{var d;if(this.destroyed)return;const h=l(this,na).get(a);if(!h.objs.has(n)){if(h._intentStates.size===0){(d=c==null?void 0:c.bitmap)==null||d.close();return}switch(o){case"Image":case"Pattern":h.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{var a;this.destroyed||(a=e.onProgress)==null||a.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[n.type];if(!a)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Tt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=l(this,zh).get(e);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Ph).set(o.refStr,t);const c=new TN(e,o,this,this._params.pdfBug);return l(this,na).set(e,c),c});return l(this,zh).set(e,a),a}getPageIndex(t){return QA(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return _(this,cc,kf).call(this,"GetFieldObjects")}hasJSActions(){return _(this,cc,kf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return _(this,cc,kf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return _(this,cc,kf).call(this,"GetOptionalContentConfig").then(e=>new sN(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,lr).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(a=>{var o,c;return{info:a[0],metadata:a[1]?new iN(a[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((c=this._fullReader)==null?void 0:c.contentLength)??null,hasStructTree:a[2]}});return l(this,lr).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,na).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,lr).clear(),this.filterFactory.destroy(!0),qf.cleanup()}}cachedPageNumber(t){if(!QA(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Ph).get(e)??null}}lr=new WeakMap,na=new WeakMap,zh=new WeakMap,Ph=new WeakMap,or=new WeakMap,cc=new WeakSet,kf=function(t,e=null){const n=l(this,lr).get(t);if(n)return n;const a=this.messageHandler.sendWithPromise(t,e);return l(this,lr).set(t,a),a};var Ml;class xN{constructor(t){E(this,Ml,null);tt(this,"onContinue",null);tt(this,"onError",null);A(this,Ml,t)}get promise(){return l(this,Ml).capability.promise}cancel(t=0){l(this,Ml).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,Ml).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,Ml);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ml=new WeakMap;var Rl,uc;const So=class So{constructor({callback:t,params:e,objs:n,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:b=!1,pageColors:v=null,enableHWA:S=!1,operationsFilter:C=null}){E(this,Rl,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=b,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xN(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=S,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=C}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var d,f;if(this.cancelled)return;if(this._canvas){if(l(So,uc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(So,uc).add(this._canvas)}this._pdfBug&&((d=globalThis.StepperManager)!=null&&d.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:a,background:o,dependencyTracker:c}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Gu(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(f=this.graphicsReadyCallback)==null||f.call(this)}cancel(t=null,e=0){var n,a,o;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,Rl)&&(window.cancelAnimationFrame(l(this,Rl)),A(this,Rl,null)),l(So,uc).delete(this._canvas),t||(t=new aw(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(a=this.task).onError)==null||o.call(a,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Rl,window.requestAnimationFrame(()=>{A(this,Rl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(So,uc).delete(this._canvas),this.callback())))}};Rl=new WeakMap,uc=new WeakMap,E(So,uc,new WeakSet);let hS=So;const MN="5.4.449",RN="f44e5f0e6";var Cn,hc,Fh,ii,Jg,Uh,cr,tp,Dl,Rs,ep,ce,dS,fS,gS,yo,jx,el;const tn=class tn{constructor({editor:t=null,uiManager:e=null}){E(this,ce);E(this,Cn,null);E(this,hc,null);E(this,Fh);E(this,ii,null);E(this,Jg,!1);E(this,Uh,!1);E(this,cr,null);E(this,tp);E(this,Dl,null);E(this,Rs,null);var n,a;t?(A(this,Uh,!1),A(this,cr,t)):A(this,Uh,!0),A(this,Rs,(t==null?void 0:t._uiManager)||e),A(this,tp,l(this,Rs)._eventBus),A(this,Fh,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((a=l(this,Rs))==null?void 0:a.highlightColors.values().next().value)||"#FFFF98"),l(tn,ep)||A(tn,ep,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ct(this,"_keyboardManager",new jp([[["Escape","mac+Escape"],tn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],tn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],tn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],tn.prototype._moveToPrevious],[["Home","mac+Home"],tn.prototype._moveToBeginning],[["End","mac+End"],tn.prototype._moveToEnd]]))}renderButton(){const t=A(this,Cn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",l(this,cr)&&(t.ariaControls=`${l(this,cr).id}_colorpicker_dropdown`);const e=l(this,Rs)._signal;t.addEventListener("click",_(this,ce,yo).bind(this),{signal:e}),t.addEventListener("keydown",_(this,ce,gS).bind(this),{signal:e});const n=A(this,hc,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,Fh),t.append(n),t}renderMainDropdown(){const t=A(this,ii,_(this,ce,dS).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===l(this,Cn)){_(this,ce,yo).call(this,t);return}const e=t.target.getAttribute("data-color");e&&_(this,ce,fS).call(this,e,t)}_moveToNext(t){var e,n;if(!l(this,ce,el)){_(this,ce,yo).call(this,t);return}if(t.target===l(this,Cn)){(e=l(this,ii).firstElementChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=l(this,ii))==null?void 0:e.firstElementChild)||t.target===l(this,Cn)){l(this,ce,el)&&this._hideDropdownFromKeyboard();return}l(this,ce,el)||_(this,ce,yo).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!l(this,ce,el)){_(this,ce,yo).call(this,t);return}(e=l(this,ii).firstElementChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,ce,el)){_(this,ce,yo).call(this,t);return}(e=l(this,ii).lastElementChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,ii))==null||t.classList.add("hidden"),l(this,Cn).ariaExpanded="false",(e=l(this,Dl))==null||e.abort(),A(this,Dl,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,Uh)){if(!l(this,ce,el)){(t=l(this,cr))==null||t.unselect();return}this.hideDropdown(),l(this,Cn).focus({preventScroll:!0,focusVisible:l(this,Jg)})}}updateColor(t){if(l(this,hc)&&(l(this,hc).style.backgroundColor=t),!l(this,ii))return;const e=l(this,Rs).highlightColors.values();for(const n of l(this,ii).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=l(this,Cn))==null||t.remove(),A(this,Cn,null),A(this,hc,null),(e=l(this,ii))==null||e.remove(),A(this,ii,null)}};Cn=new WeakMap,hc=new WeakMap,Fh=new WeakMap,ii=new WeakMap,Jg=new WeakMap,Uh=new WeakMap,cr=new WeakMap,tp=new WeakMap,Dl=new WeakMap,Rs=new WeakMap,ep=new WeakMap,ce=new WeakSet,dS=function(){const t=document.createElement("div"),e=l(this,Rs)._signal;t.addEventListener("contextmenu",ms,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,cr)&&(t.id=`${l(this,cr).id}_colorpicker_dropdown`);for(const[n,a]of l(this,Rs).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=n,o.setAttribute("data-l10n-id",l(tn,ep)[n]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.ariaSelected=a===l(this,Fh),o.addEventListener("click",_(this,ce,fS).bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",_(this,ce,gS).bind(this),{signal:e}),t},fS=function(t,e){e.stopPropagation(),l(this,tp).dispatch("switchannotationeditorparams",{source:this,type:jt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},gS=function(t){tn._keyboardManager.exec(this,t)},yo=function(t){if(l(this,ce,el)){this.hideDropdown();return}if(A(this,Jg,t.detail===0),l(this,Dl)||(A(this,Dl,new AbortController),window.addEventListener("pointerdown",_(this,ce,jx).bind(this),{signal:l(this,Rs).combinedSignal(l(this,Dl))})),l(this,Cn).ariaExpanded="true",l(this,ii)){l(this,ii).classList.remove("hidden");return}const e=A(this,ii,_(this,ce,dS).call(this));l(this,Cn).append(e)},jx=function(t){var e;(e=l(this,ii))!=null&&e.contains(t.target)||this.hideDropdown()},el=function(){return l(this,ii)&&!l(this,ii).classList.contains("hidden")},E(tn,ep,null);let ob=tn;var sa,ip,Hh,np;const wo=class wo{constructor(t){E(this,sa,null);E(this,ip,null);E(this,Hh,null);A(this,ip,t),A(this,Hh,t._uiManager),l(wo,np)||A(wo,np,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,sa))return l(this,sa);const{editorType:t,colorType:e,color:n}=l(this,ip),a=A(this,sa,document.createElement("input"));return a.type="color",a.value=n||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",l(wo,np)[t]),a.addEventListener("input",()=>{l(this,Hh).updateParams(e,a.value)},{signal:l(this,Hh)._signal}),a}update(t){l(this,sa)&&(l(this,sa).value=t)}destroy(){var t;(t=l(this,sa))==null||t.remove(),A(this,sa,null)}hideDropdown(){}};sa=new WeakMap,ip=new WeakMap,Hh=new WeakMap,np=new WeakMap,E(wo,np,null);let cb=wo;function lC(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function yf(g){return Math.max(0,Math.min(255,255*g))}class oC{static CMYK_G([t,e,n,a]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=yf(t),[t,t,t]}static G_HTML([t]){const e=lC(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(yf)}static RGB_HTML(t){return`#${t.map(lC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,n+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,n,a]){return[yf(1-Math.min(1,t+a)),yf(1-Math.min(1,n+a)),yf(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const a=1-t,o=1-e,c=1-n,h=Math.min(a,o,c);return["CMYK",a,o,c,h]}}class DN{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ge("Abstract method `_createSVG` called.")}}class ub extends DN{_createSVG(t){return document.createElementNS(za,t)}}const LN=9,Hc=new WeakSet,ON=new Date().getTimezoneOffset()*60*1e3;class SA{static create(t){switch(t.data.annotationType){case Ye.LINK:return new uw(t);case Ye.TEXT:return new kN(t);case Ye.WIDGET:switch(t.data.fieldType){case"Tx":return new BN(t);case"Btn":return t.data.radioButton?new Vx(t):t.data.checkBox?new PN(t):new FN(t);case"Ch":return new UN(t);case"Sig":return new zN(t)}return new Gc(t);case Ye.POPUP:return new mS(t);case Ye.FREETEXT:return new Qx(t);case Ye.LINE:return new IN(t);case Ye.SQUARE:return new jN(t);case Ye.CIRCLE:return new GN(t);case Ye.POLYLINE:return new Wx(t);case Ye.CARET:return new VN(t);case Ye.INK:return new hw(t);case Ye.POLYGON:return new qN(t);case Ye.HIGHLIGHT:return new Zx(t);case Ye.UNDERLINE:return new XN(t);case Ye.SQUIGGLY:return new YN(t);case Ye.STRIKEOUT:return new $N(t);case Ye.STAMP:return new Jx(t);case Ye.FILEATTACHMENT:return new KN(t);default:return new Re(t)}}}var dc,Ih,hs,sp,pS;const bw=class bw{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}={}){E(this,sp);E(this,dc,null);E(this,Ih,!1);E(this,hs,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return bw._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var h;const t=(h=this.annotationStorage)==null?void 0:h.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:a}=this.data;let o=-1/0,c=-1/0;if((e==null?void 0:e.length)>=8){for(let d=0;d<e.length;d+=8)e[d+1]>c?(c=e[d+1],o=e[d+2]):e[d+1]===c&&(o=Math.max(o,e[d+2]));return[o,c]}if((n==null?void 0:n.length)>=1){for(const d of n)for(let f=0,m=d.length;f<m;f+=2)d[f+1]>c?(c=d[f+1],o=d[f]):d[f+1]===c&&(o=Math.max(o,d[f]));if(o!==1/0)return[o,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:a,pageX:o,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-c)/a,t}get commentText(){var e,n,a;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${If}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((a=t.contentsObj)==null?void 0:a.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${If}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=l(this,hs))==null?void 0:t.popup)||this.popup)==null||e.remove(),A(this,hs,this.popup=null)}updateEdited(t){var o;if(!this.container)return;t.rect&&(l(this,dc)||A(this,dc,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&_(this,sp,pS).call(this,e);let a=((o=l(this,hs))==null?void 0:o.popup)||this.popup;!a&&(n!=null&&n.text)&&(this._createPopup(n),a=l(this,hs).popup),a&&(a.updateEdited(t),n!=null&&n.deleted&&(a.remove(),A(this,hs,null),this.popup=null))}resetEdited(){var t;l(this,dc)&&(_(this,sp,pS).call(this,l(this,dc).rect),(t=l(this,hs))==null||t.popup.resetEdited(),A(this,dc,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Gc)&&!(this instanceof uw)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof mS){const{rotation:T}=e;return!e.hasOwnCanvas&&T!==0&&this.setRotation(T,o),o}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const T=e.borderStyle.horizontalCornerRadius,M=e.borderStyle.verticalCornerRadius;if(T>0||M>0){const L=`calc(${T}px * var(--total-scale-factor)) / calc(${M}px * var(--total-scale-factor))`;c.borderRadius=L}else if(this instanceof Vx){const L=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=L}switch(e.borderStyle.style){case Ru.SOLID:c.borderStyle="solid";break;case Ru.DASHED:c.borderStyle="dashed";break;case Ru.BEVELED:Tt("Unimplemented border style: beveled");break;case Ru.INSET:Tt("Unimplemented border style: inset");break;case Ru.UNDERLINE:c.borderBottomStyle="solid";break}const x=e.borderColor||null;x?(A(this,Ih,!0),c.borderColor=ut.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):c.borderWidth=0}const f=ut.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:b,pageX:v,pageY:S}=a.rawDims;c.left=`${100*(f[0]-v)/m}%`,c.top=`${100*(f[1]-S)/b}%`;const{rotation:C}=e;return e.hasOwnCanvas||C===0?(c.width=`${100*h/m}%`,c.height=`${100*d/b}%`):this.setRotation(C,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,a)=>{const o=a.detail[e],c=o[0],h=o.slice(1);a.target.style[n]=oC[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[n]:oC[`${c}_rgb`](h)})};return Ct(this,"_commonActions",{display:e=>{const{display:n}=e.detail,a=n%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const a of Object.keys(e.detail)){const o=t[a]||n[a];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[a,o]of Object.entries(e)){const c=n[a];if(c){const h={detail:{[a]:o},target:t};c(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,a,o]=this.data.rect.map(T=>Math.fround(T));if(t.length===8){const[T,M,x,L]=t.subarray(2,6);if(a===T&&o===M&&e===x&&n===L)return}const{style:c}=this.container;let h;if(l(this,Ih)){const{borderColor:T,borderWidth:M}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${T}" stroke-width="${M}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-n,{svgFactory:m}=this,b=m.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const v=m.createElement("defs");b.append(v);const S=m.createElement("clipPath"),C=`clippath_${this.data.id}`;S.setAttribute("id",C),S.setAttribute("clipPathUnits","objectBoundingBox"),v.append(S);for(let T=2,M=t.length;T<M;T+=8){const x=t[T],L=t[T+1],R=t[T+2],O=t[T+3],N=m.createElement("rect"),B=(R-e)/d,F=(o-L)/f,W=(x-R)/d,Z=(L-O)/f;N.setAttribute("x",B),N.setAttribute("y",F),N.setAttribute("width",W),N.setAttribute("height",Z),S.append(N),h==null||h.push(`<rect vector-effect="non-scaling-stroke" x="${B}" y="${F}" width="${W}" height="${Z}"/>`)}l(this,Ih)&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(b),this.container.style.clipPath=`url(#${C})`}_createPopup(t=null){const{data:e}=this;let n,a;t?(n={str:t.text},a=t.date):(n=e.contentsObj,a=e.modificationDate),A(this,hs,new mS({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,hs)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,hs)}render(){ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:c,exportValues:h}of a){if(o===-1||c===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!Hc.has(f)){Tt(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:d,domElement:f})}return n}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==e&&Hc.has(a)&&n.push({id:c,exportValue:o,domElement:a})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};dc=new WeakMap,Ih=new WeakMap,hs=new WeakMap,sp=new WeakSet,pS=function(t){const{container:{style:e},data:{rect:n,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:h,pageY:d}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-h)/o}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)};let Re=bw;class NN extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var In,bo,Gx,qx;class uw extends Re{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});E(this,In);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,a=document.createElement("a");a.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(a,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(a,e.action,e.overlaidText),o=!0):e.attachment?(_(this,In,Gx).call(this,a,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(_(this,In,qx).call(this,a,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(a,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(a,e),o=!0),e.resetForm?(this._bindResetFormAction(a,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(a,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=a,this.container.append(a)),this.container}_bindLink(e,n,a=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&_(this,In,bo).call(this),a&&(e.title=a)}_bindNamedAction(e,n,a=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),a&&(e.title=a),_(this,In,bo).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=a.get(o);c&&(e[c]=()=>{var h;return(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),_(this,In,bo).call(this)}_bindResetFormAction(e,n){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),_(this,In,bo).call(this),!this._fieldObjects){Tt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),a||(e.onclick=()=>!1);return}e.onclick=()=>{var b;a==null||a();const{fields:o,refs:c,include:h}=n,d=[];if(o.length!==0||c.length!==0){const v=new Set(c);for(const S of o){const C=this._fieldObjects[S]||[];for(const{id:T}of C)v.add(T)}for(const S of Object.values(this._fieldObjects))for(const C of S)v.has(C.id)===h&&d.push(C)}else for(const v of Object.values(this._fieldObjects))d.push(...v);const f=this.annotationStorage,m=[];for(const v of d){const{id:S}=v;switch(m.push(S),v.type){case"text":{const T=v.defaultValue||"";f.setValue(S,{value:T});break}case"checkbox":case"radiobutton":{const T=v.defaultValue===v.exportValues;f.setValue(S,{value:T});break}case"combobox":case"listbox":{const T=v.defaultValue||"";f.setValue(S,{value:T});break}default:continue}const C=document.querySelector(`[data-element-id="${S}"]`);if(C){if(!Hc.has(C)){Tt(`_bindResetFormAction - element not allowed: ${S}`);continue}}else continue;C.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}In=new WeakSet,bo=function(){this.container.setAttribute("data-internal-link","")},Gx=function(e,n,a="",o=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:a&&(e.title=a),e.onclick=()=>{var c;return(c=this.downloadManager)==null||c.openOrDownloadData(n.content,n.filename,o),!1},_(this,In,bo).call(this)},qx=function(e,n,a=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),a&&(e.title=a),_(this,In,bo).call(this)};class kN extends Re{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Gc extends Re{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return xi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,a,o){n.includes("mouse")?t.addEventListener(n,c=>{var h;(h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{var h;if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}}))})}_setEventListeners(t,e,n,a){var o,c,h;for(const[d,f]of n)(f==="Action"||(o=this.data.actions)!=null&&o[f])&&((f==="Focus"||f==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,d,f,a),f==="Focus"&&!((c=this.data.actions)!=null&&c.Blur)?this._setEventListener(t,e,"blur","Blur",null):f==="Blur"&&!((h=this.data.actions)!=null&&h.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ut.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||LN,o=t.style;let c;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(f/(fA*a))||1,b=f/m;c=Math.min(a,d(b/fA))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(a,d(f/fA))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=ut.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class BN extends Gc{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,a){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[a]:n})}render(){var a,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const c=t.getValue(e,{value:this.data.fieldValue});let h=c.value||"";const d=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;d&&h.length>d&&(h=h.slice(0,d));let f=c.formattedValue||((a=this.data.textContent)==null?void 0:a.join(`
`))||null;f&&this.data.comb&&(f=f.replaceAll(/\s+/g,""));const m={userValue:h,formattedValue:f,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=f??h,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",f??h),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Hc.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:b,datetimeType:v,timeStep:S}=this.data,C=!!v&&this.enableScripting;b&&(n.title=b),this._setRequired(n,this.data.required),d&&(n.maxLength=d),n.addEventListener("input",M=>{t.setValue(e,{value:M.target.value}),this.setPropertyOnSiblings(n,"value",M.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",M=>{const x=this.data.defaultFieldValue??"";n.value=m.userValue=x,m.formattedValue=null});let T=M=>{const{formattedValue:x}=m;x!=null&&(M.target.value=x),M.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",x=>{var R;if(m.focused)return;const{target:L}=x;if(C&&(L.type=v,S&&(L.step=S)),m.userValue){const O=m.userValue;if(C)if(v==="time"){const N=new Date(O),B=[N.getHours(),N.getMinutes(),N.getSeconds()];L.value=B.map(F=>F.toString().padStart(2,"0")).join(":")}else L.value=new Date(O-ON).toISOString().split(v==="date"?"T":".",1)[0];else L.value=O}m.lastCommittedValue=L.value,m.commitKey=1,(R=this.data.actions)!=null&&R.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const L={value(R){m.userValue=R.detail.value??"",C||t.setValue(e,{value:m.userValue.toString()}),R.target.value=m.userValue},formattedValue(R){const{formattedValue:O}=R.detail;m.formattedValue=O,O!=null&&R.target!==document.activeElement&&(R.target.value=O);const N={formattedValue:O};C&&(N.value=O),t.setValue(e,N)},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{var F;const{charLimit:O}=R.detail,{target:N}=R;if(O===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",O);let B=m.userValue;!B||B.length<=O||(B=B.slice(0,O),N.value=m.userValue=B,t.setValue(e,{value:B}),(F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:B,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(L,x)}),n.addEventListener("keydown",x=>{var O;m.commitKey=1;let L=-1;if(x.key==="Escape"?L=0:x.key==="Enter"&&!this.data.multiLine?L=2:x.key==="Tab"&&(m.commitKey=3),L===-1)return;const{value:R}=x.target;m.lastCommittedValue!==R&&(m.lastCommittedValue=R,m.userValue=R,(O=this.linkService.eventBus)==null||O.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:L,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const M=T;T=null,n.addEventListener("blur",x=>{var O,N;if(!m.focused||!x.relatedTarget)return;(O=this.data.actions)!=null&&O.Blur||(m.focused=!1);const{target:L}=x;let{value:R}=L;if(C){if(R&&v==="time"){const B=R.split(":").map(F=>parseInt(F,10));R=new Date(2e3,0,1,B[0],B[1],B[2]||0).valueOf(),L.step=""}else R.includes("T")||(R=`${R}T00:00`),R=new Date(R).valueOf();L.type="text"}m.userValue=R,m.lastCommittedValue!==R&&((N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:m.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}})),M(x)}),(o=this.data.actions)!=null&&o.Keystroke&&n.addEventListener("beforeinput",x=>{var Z;m.lastCommittedValue=null;const{data:L,target:R}=x,{value:O,selectionStart:N,selectionEnd:B}=R;let F=N,W=B;switch(x.inputType){case"deleteWordBackward":{const it=O.substring(0,N).match(/\w*[^\w]*$/);it&&(F-=it[0].length);break}case"deleteWordForward":{const it=O.substring(N).match(/^[^\w]*\w*/);it&&(W+=it[0].length);break}case"deleteContentBackward":N===B&&(F-=1);break;case"deleteContentForward":N===B&&(W+=1);break}x.preventDefault(),(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,change:L||"",willCommit:!1,selStart:F,selEnd:W}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(T&&n.addEventListener("blur",T),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/d;n.classList.add("comb"),n.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class zN extends Gc{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class PN extends Gc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Hc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,n)){const m=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(n,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Vx extends Gc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let a=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(n,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(Hc.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:d})}),o.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const m=c===f.detail.value;for(const b of this._getElementsByName(f.target.name)){const v=m&&b.id===n;b.domElement&&(b.domElement.checked=v),t.setValue(b.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class FN extends uw{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class UN extends Gc{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Hc.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const b=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===b});for(const m of this.data.options){const b=document.createElement("option");b.textContent=m.displayValue,b.value=m.exportValue,n.value.includes(m.exportValue)&&(b.setAttribute("selected",!0),o=!1),a.append(b)}let c=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),c=()=>{m.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const h=m=>{const b=m?"value":"textContent",{options:v,multiple:S}=a;return S?Array.prototype.filter.call(v,C=>C.selected).map(C=>C[b]):v.selectedIndex===-1?null:v[v.selectedIndex][b]};let d=h(!1);const f=m=>{const b=m.target.options;return Array.prototype.map.call(b,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const b={value(v){c==null||c();const S=v.detail.value,C=new Set(Array.isArray(S)?S:[S]);for(const T of a.options)T.selected=C.has(T.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(v){a.multiple=!0},remove(v){const S=a.options,C=v.detail.remove;S[C].selected=!1,a.remove(C),S.length>0&&Array.prototype.findIndex.call(S,M=>M.selected)===-1&&(S[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(v){const{index:S,displayValue:C,exportValue:T}=v.detail.insert,M=a.children[S],x=document.createElement("option");x.textContent=C,x.value=T,M?M.before(x):a.append(x),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},items(v){const{items:S}=v.detail;for(;a.length!==0;)a.remove(0);for(const C of S){const{displayValue:T,exportValue:M}=C,x=document.createElement("option");x.textContent=T,x.value=M,a.append(x)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},indices(v){const S=new Set(v.detail.indices);for(const C of v.target.options)C.selected=S.has(C.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(b,m)}),a.addEventListener("input",m=>{var S;const b=h(!0),v=h(!1);t.setValue(e,{value:b}),m.preventDefault(),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}var ap,yS;class mS extends Re{constructor(e){const{data:n,elements:a,parent:o}=e,c=!!o._commentManager;super(e,{isRenderable:!c&&Re._hasPopupData(n)});E(this,ap);if(this.elements=a,c&&Re._hasPopupData(n)){const h=this.popup=_(this,ap,yS).call(this);for(const d of a)d.popup=h}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=_(this,ap,yS).call(this),a=[];for(const o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",a.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",a.map(o=>`${Pu}${o}`).join(",")),this.container}}ap=new WeakSet,yS=function(){return new HN({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var xn,Ll,Cb,xb,jh,Gh,ke,aa,Ol,fc,qh,Vh,ra,Mn,ur,hr,Be,dr,Nl,rp,fr,Xh,gc,kl,li,Bl,Nt,ky,bS,vS,AS,By,SS,Xx,Yx,$x,Kx,zy,Py,wS;class HN{constructor({container:t,color:e,elements:n,titleObj:a,modificationDate:o,contentsObj:c,richText:h,parent:d,rect:f,parentRect:m,open:b,commentManager:v=null}){E(this,Nt);E(this,xn,null);E(this,Ll,_(this,Nt,$x).bind(this));E(this,Cb,_(this,Nt,wS).bind(this));E(this,xb,_(this,Nt,Py).bind(this));E(this,jh,_(this,Nt,zy).bind(this));E(this,Gh,null);E(this,ke,null);E(this,aa,null);E(this,Ol,null);E(this,fc,null);E(this,qh,null);E(this,Vh,null);E(this,ra,!1);E(this,Mn,null);E(this,ur,null);E(this,hr,null);E(this,Be,null);E(this,dr,null);E(this,Nl,null);E(this,rp,null);E(this,fr,null);E(this,Xh,null);E(this,gc,null);E(this,kl,!1);E(this,li,null);E(this,Bl,null);A(this,ke,t),A(this,Xh,a),A(this,aa,c),A(this,fr,h),A(this,qh,d),A(this,Gh,e),A(this,rp,f),A(this,Vh,m),A(this,fc,n),A(this,xn,v),A(this,li,n[0]),A(this,Ol,ib.toDateObject(o)),this.trigger=n.flatMap(S=>S.getElementsToTriggerPopup()),v||(_(this,Nt,ky).call(this),l(this,ke).hidden=!0,b&&_(this,Nt,zy).call(this))}renderCommentButton(){if(l(this,Be)){l(this,Be).parentNode||l(this,li).container.after(l(this,Be));return}if(l(this,dr)||_(this,Nt,bS).call(this),!l(this,dr))return;const{signal:t}=A(this,ur,new AbortController),e=l(this,li).hasOwnCommentButton,n=()=>{l(this,xn).toggleCommentPopup(this,!0,void 0,!e)},a=()=>{l(this,xn).toggleCommentPopup(this,!1,!0,!e)},o=()=>{l(this,xn).toggleCommentPopup(this,!1,!1)};if(e){A(this,Be,l(this,li).container);for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",l(this,Ll),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=A(this,Be,document.createElement("button"));c.className="annotationCommentButton";const h=l(this,li).container;c.style.zIndex=h.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),_(this,Nt,AS).call(this),_(this,Nt,vS).call(this),c.addEventListener("keydown",l(this,Ll),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),h.after(c)}}get commentButtonColor(){const{color:t,opacity:e}=l(this,li).commentData;return t?l(this,qh)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=l(this,Be))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:a,modificationDate:o}=l(this,li).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:a,modificationDate:o}}get elementBeforePopup(){return l(this,Be)}get comment(){return l(this,Bl)||A(this,Bl,l(this,li).commentText),l(this,Bl)}set comment(t){t!==this.comment&&(l(this,li).commentText=A(this,Bl,t))}focus(){var t;(t=l(this,li).container)==null||t.focus()}get parentBoundingClientRect(){return l(this,li).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){l(this,Be)&&(l(this,Be).classList.toggle("selected",t),l(this,Be).ariaExpanded=e)}setSelectedCommentButton(t){l(this,Be).classList.toggle("selected",t)}get commentPopupPosition(){if(l(this,Nl))return l(this,Nl);const{x:t,y:e,height:n}=l(this,Be).getBoundingClientRect(),{x:a,y:o,width:c,height:h}=l(this,li).layer.getBoundingClientRect();return[(t-a)/c,(e+n-o)/h]}set commentPopupPosition(t){A(this,Nl,t)}hasDefaultPopupPosition(){return l(this,Nl)===null}get commentButtonPosition(){return l(this,dr)}get commentButtonWidth(){return l(this,Be).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=l(this,Nl)||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:c,width:h,height:d}=a;l(this,xn).showDialog(null,this,o+e*h,c+n*d,{...t,parentDimensions:a})}render(){var n,a;if(l(this,Mn))return;const t=A(this,Mn,document.createElement("div"));if(t.className="popup",l(this,Gh)){const o=t.style.outlineColor=ut.makeHexColor(...l(this,Gh));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=l(this,Xh))!=null&&n.str){const o=document.createElement("span");o.className="title",e.append(o),{dir:o.dir,str:o.textContent}=l(this,Xh)}if(t.append(e),l(this,Ol)){const o=document.createElement("time");o.className="popupDate",o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Ol).valueOf()})),o.dateTime=l(this,Ol).toISOString(),e.append(o)}zC({html:l(this,Nt,By)||l(this,aa).str,dir:(a=l(this,aa))==null?void 0:a.dir,className:"popupContent"},t),l(this,ke).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var a;if(l(this,xn)){n?(this.remove(),A(this,Bl,null)):e&&(e.deleted?this.remove():(_(this,Nt,AS).call(this),A(this,Bl,e.text))),t&&(A(this,dr,null),_(this,Nt,bS).call(this),_(this,Nt,vS).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}_(this,Nt,ky).call(this),l(this,gc)||A(this,gc,{contentsObj:l(this,aa),richText:l(this,fr)}),t&&A(this,hr,null),e&&e.text&&(A(this,fr,_(this,Nt,Yx).call(this,e.text)),A(this,Ol,ib.toDateObject(e.date)),A(this,aa,null)),(a=l(this,Mn))==null||a.remove(),A(this,Mn,null)}resetEdited(){var t;l(this,gc)&&({contentsObj:Ze(this,aa)._,richText:Ze(this,fr)._}=l(this,gc),A(this,gc,null),(t=l(this,Mn))==null||t.remove(),A(this,Mn,null),A(this,hr,null))}remove(){var t,e,n;if((t=l(this,ur))==null||t.abort(),A(this,ur,null),(e=l(this,Mn))==null||e.remove(),A(this,Mn,null),A(this,kl,!1),A(this,ra,!1),(n=l(this,Be))==null||n.remove(),A(this,Be,null),this.trigger)for(const a of this.trigger)a.classList.remove("popupTriggerArea")}forceHide(){A(this,kl,this.isVisible),l(this,kl)&&(l(this,ke).hidden=!0)}maybeShow(){l(this,xn)||(_(this,Nt,ky).call(this),l(this,kl)&&(l(this,Mn)||_(this,Nt,Py).call(this),A(this,kl,!1),l(this,ke).hidden=!1))}get isVisible(){return l(this,xn)?!1:l(this,ke).hidden===!1}}xn=new WeakMap,Ll=new WeakMap,Cb=new WeakMap,xb=new WeakMap,jh=new WeakMap,Gh=new WeakMap,ke=new WeakMap,aa=new WeakMap,Ol=new WeakMap,fc=new WeakMap,qh=new WeakMap,Vh=new WeakMap,ra=new WeakMap,Mn=new WeakMap,ur=new WeakMap,hr=new WeakMap,Be=new WeakMap,dr=new WeakMap,Nl=new WeakMap,rp=new WeakMap,fr=new WeakMap,Xh=new WeakMap,gc=new WeakMap,kl=new WeakMap,li=new WeakMap,Bl=new WeakMap,Nt=new WeakSet,ky=function(){var e;if(l(this,ur))return;A(this,ur,new AbortController);const{signal:t}=l(this,ur);for(const n of this.trigger)n.addEventListener("click",l(this,jh),{signal:t}),n.addEventListener("pointerenter",l(this,xb),{signal:t}),n.addEventListener("pointerleave",l(this,Cb),{signal:t}),n.classList.add("popupTriggerArea");for(const n of l(this,fc))(e=n.container)==null||e.addEventListener("keydown",l(this,Ll),{signal:t})},bS=function(){const t=l(this,fc).find(e=>e.hasCommentButton);t&&A(this,dr,t._normalizePoint(t.commentButtonPosition))},vS=function(){if(l(this,li).extraPopupElement&&!l(this,li).editor)return;l(this,Be)||this.renderCommentButton();const[t,e]=l(this,dr),{style:n}=l(this,Be);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},AS=function(){l(this,li).extraPopupElement||(l(this,Be)||this.renderCommentButton(),l(this,Be).style.backgroundColor=this.commentButtonColor||"")},By=function(){const t=l(this,fr),e=l(this,aa);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,fr).html||null},SS=function(){var t,e,n;return((n=(e=(t=l(this,Nt,By))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},Xx=function(){var t,e,n;return((n=(e=(t=l(this,Nt,By))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},Yx=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:l(this,Nt,Xx),fontSize:l(this,Nt,SS)?`calc(${l(this,Nt,SS)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return n},$x=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,ra))&&_(this,Nt,zy).call(this)},Kx=function(){if(l(this,hr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:a,pageY:o}}}=l(this,qh);let c=!!l(this,Vh),h=c?l(this,Vh):l(this,rp);for(const C of l(this,fc))if(!h||ut.intersect(C.data.rect,h)!==null){h=C.data.rect,c=!0;break}const d=ut.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=c?h[2]-h[0]+5:0,b=d[0]+m,v=d[1];A(this,hr,[100*(b-a)/e,100*(v-o)/n]);const{style:S}=l(this,ke);S.left=`${l(this,hr)[0]}%`,S.top=`${l(this,hr)[1]}%`},zy=function(){if(l(this,xn)){l(this,xn).toggleCommentPopup(this,!1);return}A(this,ra,!l(this,ra)),l(this,ra)?(_(this,Nt,Py).call(this),l(this,ke).addEventListener("click",l(this,jh)),l(this,ke).addEventListener("keydown",l(this,Ll))):(_(this,Nt,wS).call(this),l(this,ke).removeEventListener("click",l(this,jh)),l(this,ke).removeEventListener("keydown",l(this,Ll)))},Py=function(){l(this,Mn)||this.render(),this.isVisible?l(this,ra)&&l(this,ke).classList.add("focused"):(_(this,Nt,Kx).call(this),l(this,ke).hidden=!1,l(this,ke).style.zIndex=parseInt(l(this,ke).style.zIndex)+1e3)},wS=function(){l(this,ke).classList.remove("focused"),!(l(this,ra)||!this.isVisible)&&(l(this,ke).hidden=!0,l(this,ke).style.zIndex=parseInt(l(this,ke).style.zIndex)-1e3)};class Qx extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Mt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var lp;class IN extends Re{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,lp,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:a}=this,o=this.svgFactory.create(n,a,!0),c=A(this,lp,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}lp=new WeakMap;var op;class jN extends Re{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,op,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:a}=this,o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,h=A(this,op,this.svgFactory.createElement("svg:rect"));return h.setAttribute("x",c/2),h.setAttribute("y",c/2),h.setAttribute("width",n-c),h.setAttribute("height",a-c),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,op)}addHighlightArea(){this.container.classList.add("highlightArea")}}op=new WeakMap;var cp;class GN extends Re{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,cp,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:a}=this,o=this.svgFactory.create(n,a,!0),c=e.borderStyle.width,h=A(this,cp,this.svgFactory.createElement("svg:ellipse"));return h.setAttribute("cx",n/2),h.setAttribute("cy",a/2),h.setAttribute("rx",n/2-c/2),h.setAttribute("ry",a/2-c/2),h.setAttribute("stroke-width",c||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),o.append(h),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,cp)}addHighlightArea(){this.container.classList.add("highlightArea")}}cp=new WeakMap;var up;class Wx extends Re{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,up,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:a,popupRef:o},width:c,height:h}=this;if(!n)return this.container;const d=this.svgFactory.create(c,h,!0);let f=[];for(let b=0,v=n.length;b<v;b+=2){const S=n[b]-e[0],C=e[3]-n[b+1];f.push(`${S},${C}`)}f=f.join(" ");const m=A(this,up,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",f),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),d.append(m),this.container.append(d),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,up)}addHighlightArea(){this.container.classList.add("highlightArea")}}up=new WeakMap;class qN extends Wx{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class VN extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var hp,pc,dp,ES;class hw extends Re{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});E(this,dp);E(this,hp,null);E(this,pc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Mt.HIGHLIGHT:Mt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:a,borderStyle:o,popupRef:c}}=this,{transform:h,width:d,height:f}=_(this,dp,ES).call(this,n,e),m=this.svgFactory.create(d,f,!0),b=A(this,hp,this.svgFactory.createElement("svg:g"));m.append(b),b.setAttribute("stroke-width",o.width||1),b.setAttribute("stroke-linecap","round"),b.setAttribute("stroke-linejoin","round"),b.setAttribute("stroke-miterlimit",10),b.setAttribute("stroke","transparent"),b.setAttribute("fill","transparent"),b.setAttribute("transform",h);for(let v=0,S=a.length;v<S;v++){const C=this.svgFactory.createElement(this.svgElementName);l(this,pc).push(C),C.setAttribute("points",a[v].join(",")),b.append(C)}return!c&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:a,rect:o}=e,c=l(this,hp);if(n>=0&&c.setAttribute("stroke-width",n||1),a)for(let h=0,d=l(this,pc).length;h<d;h++)l(this,pc)[h].setAttribute("points",a[h].join(","));if(o){const{transform:h,width:d,height:f}=_(this,dp,ES).call(this,this.data.rotation,o);c.parentElement.setAttribute("viewBox",`0 0 ${d} ${f}`),c.setAttribute("transform",h)}}getElementsToTriggerPopup(){return l(this,pc)}addHighlightArea(){this.container.classList.add("highlightArea")}}hp=new WeakMap,pc=new WeakMap,dp=new WeakSet,ES=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class Zx extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Mt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class XN extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class YN extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class $N extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class Jx extends Re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Mt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var fp,gp,_S;class KN extends Re{constructor(e){var a;super(e,{isRenderable:!0});E(this,gp);E(this,fp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(a=this.linkService.eventBus)==null||a.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let a;n.hasAppearance||n.fillAlpha===0?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(a.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),a.addEventListener("dblclick",_(this,gp,_S).bind(this)),A(this,fp,a);const{isMac:o}=xi.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&_(this,gp,_S).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):a.classList.add("popupTriggerArea"),e.append(a),e}getElementsToTriggerPopup(){return l(this,fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}fp=new WeakMap,gp=new WeakSet,_S=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var mc,yc,Yh,zl,pp,bc,Rn,mp,_r,Fy,CS;const vw=class vw{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:a,page:o,viewport:c,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:m}){E(this,_r);E(this,mc,null);E(this,yc,null);E(this,Yh,null);E(this,zl,new Map);E(this,pp,null);E(this,bc,null);E(this,Rn,[]);E(this,mp,!1);this.div=t,A(this,mc,e),A(this,yc,n),A(this,pp,h||null),A(this,bc,f||null),A(this,Yh,m||new lw),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return l(this,zl).size>0}async render(t){var h;const{annotations:e}=t,n=this.div;Fc(n,this.viewport);const a=new Map,o=[],c={data:null,layer:n,linkService:l(this,bc),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ub,annotationStorage:l(this,Yh),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const d of e){if(d.noHTML)continue;const f=d.annotationType===Ye.POPUP;if(f){const v=a.get(d.id);if(!v)continue;if(!this._commentManager){o.push(d);continue}c.elements=v}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;c.data=d;const m=SA.create(c);if(!m.isRenderable)continue;if(!f&&(l(this,Rn).push(m),d.popupRef)){const v=a.get(d.popupRef);v?v.push(m):a.set(d.popupRef,[m])}const b=m.render();d.hidden&&(b.style.visibility="hidden"),m._isEditable&&(l(this,zl).set(m.data.id,m),(h=this._annotationEditorUIManager)==null||h.renderAnnotationElement(m))}await _(this,_r,Fy).call(this);for(const d of o){const f=c.elements=a.get(d.id);c.data=d;const m=SA.create(c);if(!m.isRenderable)continue;const b=m.render();m.contentElement.id=`${Pu}${d.id}`,d.hidden&&(b.style.visibility="hidden"),f.at(-1).container.after(b)}_(this,_r,CS).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:l(this,bc),svgFactory:new ub,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=vw._defaultBorderStyle),e.data=n;const a=SA.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${Pu}${n.id}`,l(this,Rn).push(a))}await _(this,_r,Fy).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Fc(e,{rotation:t.rotation}),_(this,_r,CS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,zl).values())}getEditableAnnotation(t){return l(this,zl).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:a}=t,o=new NN({data:{id:n,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:l(this,bc),annotationStorage:l(this,Yh)});return o.render(),o.contentElement.id=`${Pu}${n}`,o.createOrUpdatePopup(),l(this,Rn).push(o),o}removeAnnotation(t){var a;const e=l(this,Rn).findIndex(o=>o.data.id===t);if(e<0)return;const[n]=l(this,Rn).splice(e,1);(a=l(this,mc))==null||a.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);_(this,_r,Fy).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Ct(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ru.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};mc=new WeakMap,yc=new WeakMap,Yh=new WeakMap,zl=new WeakMap,pp=new WeakMap,bc=new WeakMap,Rn=new WeakMap,mp=new WeakMap,_r=new WeakSet,Fy=async function(){var n,a,o;if(l(this,Rn).length===0)return;this.div.replaceChildren();const t=[];if(!l(this,mp)){A(this,mp,!0);for(const{contentElement:c,data:{id:h}}of l(this,Rn)){const d=c.id=`${Pu}${h}`;t.push((n=l(this,pp))==null?void 0:n.getAriaAttributes(d).then(f=>{if(f)for(const[m,b]of f)c.setAttribute(m,b)}))}}l(this,Rn).sort(({data:{rect:[c,h,d,f]}},{data:{rect:[m,b,v,S]}})=>{if(c===d&&h===f)return 1;if(m===v&&b===S)return-1;const C=f,T=h,M=(h+f)/2,x=S,L=b,R=(b+S)/2;if(M>=x&&R<=T)return-1;if(R>=C&&M<=L)return 1;const O=(c+d)/2,N=(m+v)/2;return O-N});const e=document.createDocumentFragment();for(const c of l(this,Rn))e.append(c.container),this._commentManager?(o=((a=c.extraPopupElement)==null?void 0:a.popup)||c.popup)==null||o.renderCommentButton():c.extraPopupElement&&e.append(c.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),l(this,mc))for(const c of l(this,Rn))l(this,mc).addPointerInTextLayer(c.contentElement,!1)},CS=function(){var e;if(!l(this,yc))return;const t=this.div;for(const[n,a]of l(this,yc)){const o=t.querySelector(`[data-annotation-id="${n}"]`);if(!o)continue;a.className="annotationContent";const{firstChild:c}=o;c?c.nodeName==="CANVAS"?c.replaceWith(a):c.classList.contains("annotationContent")?c.after(a):c.before(a):o.append(a);const h=l(this,zl).get(n);h&&(h._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,o.id,a),h._hasNoCanvas=!1):h.canvas=a)}l(this,yc).clear()};let TS=vw;const my=/\r\n?|\n/g;var Dn,yp,vc,Ln,Ke,t2,e2,i2,Uy,Tr,Hy,Iy,n2,MS,s2;const Se=class Se extends ye{constructor(e){super({...e,name:"freeTextEditor"});E(this,Ke);E(this,Dn,"");E(this,yp,`${this.id}-editor`);E(this,vc,null);E(this,Ln);tt(this,"_colorPicker",null);this.color=e.color||Se._defaultColor||ye._defaultLineColor,A(this,Ln,e.fontSize||Se._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Se.prototype,n=c=>c.isEmpty(),a=Uc.TRANSLATE_SMALL,o=Uc.TRANSLATE_BIG;return Ct(this,"_keyboardManager",new jp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){ye.initialize(e,n);const a=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(a.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case jt.FREETEXT_SIZE:Se._defaultFontSize=n;break;case jt.FREETEXT_COLOR:Se._defaultColor=n;break}}updateParams(e,n){switch(e){case jt.FREETEXT_SIZE:_(this,Ke,t2).call(this,n);break;case jt.FREETEXT_COLOR:_(this,Ke,e2).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.FREETEXT_SIZE,Se._defaultFontSize],[jt.FREETEXT_COLOR,Se._defaultColor||ye._defaultLineColor]]}get propertiesToUpdate(){return[[jt.FREETEXT_SIZE,l(this,Ln)],[jt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new cb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Se._internalPadding*e,-(Se._internalPadding+l(this,Ln))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,vc,new AbortController);const e=this._uiManager.combinedSignal(l(this,vc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,yp)),this._isDraggable=!0,(e=l(this,vc))==null||e.abort(),A(this,vc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,Dn),n=A(this,Dn,_(this,Ke,i2).call(this).trimEnd());if(e===n)return;const a=o=>{if(A(this,Dn,o),!o){this.remove();return}_(this,Ke,Iy).call(this),this._uiManager.rebuild(this),_(this,Ke,Uy).call(this)};this.addCommands({cmd:()=>{a(n)},undo:()=>{a(e)},mustExec:!1}),_(this,Ke,Uy).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Se._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,yp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:a}=this.editorDiv;if(a.fontSize=`calc(${l(this,Ln)}px * var(--total-scale-factor))`,a.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:h}=this._initialData;let[d,f]=this.getInitialTranslation();[d,f]=this.pageTranslationToScreen(d,f);const[m,b]=this.pageDimensions,[v,S]=this.pageTranslation;let C,T;switch(this.rotation){case 0:C=e+(h[0]-v)/m,T=n+this.height-(h[1]-S)/b;break;case 90:C=e+(h[0]-v)/m,T=n-(h[1]-S)/b,[d,f]=[f,-d];break;case 180:C=e-this.width+(h[0]-v)/m,T=n-(h[1]-S)/b,[d,f]=[-d,-f];break;case 270:C=e+(h[0]-v-this.height*b)/m,T=n+(h[1]-S-this.width*m)/b,[d,f]=[-f,d];break}this.setAt(C*o,T*c,d,f)}else this._moveAfterPaste(e,n);_(this,Ke,Iy).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var C,T,M;const n=e.clipboardData||window.clipboardData,{types:a}=n;if(a.length===1&&a[0]==="text/plain")return;e.preventDefault();const o=_(C=Se,Tr,MS).call(C,n.getData("text")||"").replaceAll(my,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const h=c.getRangeAt(0);if(!o.includes(`
`)){h.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:d,startOffset:f}=h,m=[],b=[];if(d.nodeType===Node.TEXT_NODE){const x=d.parentElement;if(b.push(d.nodeValue.slice(f).replaceAll(my,"")),x!==this.editorDiv){let L=m;for(const R of this.editorDiv.childNodes){if(R===x){L=b;continue}L.push(_(T=Se,Tr,Hy).call(T,R))}}m.push(d.nodeValue.slice(0,f).replaceAll(my,""))}else if(d===this.editorDiv){let x=m,L=0;for(const R of this.editorDiv.childNodes)L++===f&&(x=b),x.push(_(M=Se,Tr,Hy).call(M,R))}A(this,Dn,`${m.join(`
`)}${o}${b.join(`
`)}`),_(this,Ke,Iy).call(this);const v=new Range;let S=Math.sumPrecise(m.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const L=x.nodeValue.length;if(S<=L){v.setStart(x,S),v.setEnd(x,S);break}S-=L}c.removeAllRanges(),c.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Se._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,a){var h;let o=null;if(e instanceof Qx){const{data:{defaultAppearanceData:{fontSize:d,fontColor:f},rect:m,rotation:b,id:v,popupRef:S,richText:C,contentsObj:T,creationDate:M,modificationDate:x},textContent:L,textPosition:R,parent:{page:{pageNumber:O}}}=e;if(!L||L.length===0)return null;o=e={annotationType:Mt.FREETEXT,color:Array.from(f),fontSize:d,value:L.join(`
`),position:R,pageIndex:O-1,rect:m.slice(0),rotation:b,annotationElementId:v,id:v,deleted:!1,popupRef:S,comment:(T==null?void 0:T.str)||null,richText:C,creationDate:M,modificationDate:x}}const c=await super.deserialize(e,n,a);return A(c,Ln,e.fontSize),c.color=ut.makeHexColor(...e.color),A(c,Dn,_(h=Se,Tr,MS).call(h,e.value)),c._initialData=o,e.comment&&c.setCommentData(e),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),a=Object.assign(super.serialize(e),{color:n,fontSize:l(this,Ln),value:_(this,Ke,n2).call(this)});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!_(this,Ke,s2).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:a}=n;a.fontSize=`calc(${l(this,Ln)}px * var(--total-scale-factor))`,a.color=this.color,n.replaceChildren();for(const o of l(this,Dn).split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),n.append(c)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Dn)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Dn=new WeakMap,yp=new WeakMap,vc=new WeakMap,Ln=new WeakMap,Ke=new WeakSet,t2=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-l(this,Ln))*this.parentScale),A(this,Ln,o),_(this,Ke,Uy).call(this)},a=l(this,Ln);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},e2=function(e){const n=o=>{this.color=o,this.onUpdatedColor()},a=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},i2=function(){var a;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(_(a=Se,Tr,Hy).call(a,o)),n=o);return e.join(`
`)},Uy=function(){const[e,n]=this.parentDimensions;let a;if(this.isAttachedToDOM)a=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,h=c.style.display,d=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),a=c.getBoundingClientRect(),c.remove(),c.style.display=h,c.classList.toggle("hidden",d)}this.rotation%180===this.parentRotation%180?(this.width=a.width/e,this.height=a.height/n):(this.width=a.height/e,this.height=a.width/n),this.fixAndSetPosition()},Tr=new WeakSet,Hy=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(my,"")},Iy=function(){if(this.editorDiv.replaceChildren(),!!l(this,Dn))for(const e of l(this,Dn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},n2=function(){return l(this,Dn).replaceAll(""," ")},MS=function(e){return e.replaceAll(" ","")},s2=function(e){const{value:n,fontSize:a,color:o,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==a||e.color.some((h,d)=>h!==o[d])||e.pageIndex!==c},E(Se,Tr),tt(Se,"_freeTextDefaultContent",""),tt(Se,"_internalPadding",0),tt(Se,"_defaultColor",null),tt(Se,"_defaultFontSize",10),tt(Se,"_type","freetext"),tt(Se,"_editorType",Mt.FREETEXT);let xS=Se;class ct{toSVGPath(){ge("Abstract method `toSVGPath` must be implemented.")}get box(){ge("Abstract getter `box` must be implemented.")}serialize(t,e){ge("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,a,o,c){c||(c=new Float32Array(t.length));for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h]*a,c[h+1]=n+t[h+1]*o;return c}static _rescaleAndSwap(t,e,n,a,o,c){c||(c=new Float32Array(t.length));for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h+1]*a,c[h+1]=n+t[h]*o;return c}static _translate(t,e,n,a){a||(a=new Float32Array(t.length));for(let o=0,c=t.length;o<c;o+=2)a[o]=e+t[o],a[o+1]=n+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,a,o){switch(o){case 90:return[1-e/n,t/a];case 180:return[1-t/n,1-e/a];case 270:return[e/n,1-t/a];default:return[t/n,e/a]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,a,o,c){return[(t+5*n)/6,(e+5*a)/6,(5*n+o)/6,(5*a+c)/6,(n+o)/2,(a+c)/2]}}tt(ct,"PRECISION",1e-4);var On,Ds,$h,Kh,la,Bt,Ac,Sc,bp,vp,Qh,Wh,Pl,Ap,Mb,Rb,ni,Bf,a2,r2,l2,o2,c2,u2;const Ha=class Ha{constructor({x:t,y:e},n,a,o,c,h=0){E(this,ni);E(this,On);E(this,Ds,[]);E(this,$h);E(this,Kh);E(this,la,[]);E(this,Bt,new Float32Array(18));E(this,Ac);E(this,Sc);E(this,bp);E(this,vp);E(this,Qh);E(this,Wh);E(this,Pl,[]);A(this,On,n),A(this,Wh,o*a),A(this,Kh,c),l(this,Bt).set([NaN,NaN,NaN,NaN,t,e],6),A(this,$h,h),A(this,vp,l(Ha,Ap)*a),A(this,bp,l(Ha,Rb)*a),A(this,Qh,a),l(this,Pl).push(t,e)}isEmpty(){return isNaN(l(this,Bt)[8])}add({x:t,y:e}){var Z;A(this,Ac,t),A(this,Sc,e);const[n,a,o,c]=l(this,On);let[h,d,f,m]=l(this,Bt).subarray(8,12);const b=t-f,v=e-m,S=Math.hypot(b,v);if(S<l(this,bp))return!1;const C=S-l(this,vp),T=C/S,M=T*b,x=T*v;let L=h,R=d;h=f,d=m,f+=M,m+=x,(Z=l(this,Pl))==null||Z.push(t,e);const O=-x/C,N=M/C,B=O*l(this,Wh),F=N*l(this,Wh);return l(this,Bt).set(l(this,Bt).subarray(2,8),0),l(this,Bt).set([f+B,m+F],4),l(this,Bt).set(l(this,Bt).subarray(14,18),12),l(this,Bt).set([f-B,m-F],16),isNaN(l(this,Bt)[6])?(l(this,la).length===0&&(l(this,Bt).set([h+B,d+F],2),l(this,la).push(NaN,NaN,NaN,NaN,(h+B-n)/o,(d+F-a)/c),l(this,Bt).set([h-B,d-F],14),l(this,Ds).push(NaN,NaN,NaN,NaN,(h-B-n)/o,(d-F-a)/c)),l(this,Bt).set([L,R,h,d,f,m],6),!this.isEmpty()):(l(this,Bt).set([L,R,h,d,f,m],6),Math.abs(Math.atan2(R-d,L-h)-Math.atan2(x,M))<Math.PI/2?([h,d,f,m]=l(this,Bt).subarray(2,6),l(this,la).push(NaN,NaN,NaN,NaN,((h+f)/2-n)/o,((d+m)/2-a)/c),[h,d,L,R]=l(this,Bt).subarray(14,18),l(this,Ds).push(NaN,NaN,NaN,NaN,((L+h)/2-n)/o,((R+d)/2-a)/c),!0):([L,R,h,d,f,m]=l(this,Bt).subarray(0,6),l(this,la).push(((L+5*h)/6-n)/o,((R+5*d)/6-a)/c,((5*h+f)/6-n)/o,((5*d+m)/6-a)/c,((h+f)/2-n)/o,((d+m)/2-a)/c),[f,m,h,d,L,R]=l(this,Bt).subarray(12,18),l(this,Ds).push(((L+5*h)/6-n)/o,((R+5*d)/6-a)/c,((5*h+f)/6-n)/o,((5*d+m)/6-a)/c,((h+f)/2-n)/o,((d+m)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,la),e=l(this,Ds);if(isNaN(l(this,Bt)[6])&&!this.isEmpty())return _(this,ni,a2).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?n.push(`L${t[a+4]} ${t[a+5]}`):n.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);_(this,ni,l2).call(this,n);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?n.push(`L${e[a+4]} ${e[a+5]}`):n.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return _(this,ni,r2).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,a,o,c){return new h2(t,e,n,a,o,c)}getOutlines(){var b;const t=l(this,la),e=l(this,Ds),n=l(this,Bt),[a,o,c,h]=l(this,On),d=new Float32Array((((b=l(this,Pl))==null?void 0:b.length)??0)+2);for(let v=0,S=d.length-2;v<S;v+=2)d[v]=(l(this,Pl)[v]-a)/c,d[v+1]=(l(this,Pl)[v+1]-o)/h;if(d[d.length-2]=(l(this,Ac)-a)/c,d[d.length-1]=(l(this,Sc)-o)/h,isNaN(n[6])&&!this.isEmpty())return _(this,ni,o2).call(this,d);const f=new Float32Array(l(this,la).length+24+l(this,Ds).length);let m=t.length;for(let v=0;v<m;v+=2){if(isNaN(t[v])){f[v]=f[v+1]=NaN;continue}f[v]=t[v],f[v+1]=t[v+1]}m=_(this,ni,u2).call(this,f,m);for(let v=e.length-6;v>=6;v-=6)for(let S=0;S<6;S+=2){if(isNaN(e[v+S])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[v+S],f[m+1]=e[v+S+1],m+=2}return _(this,ni,c2).call(this,f,m),this.newFreeDrawOutline(f,d,l(this,On),l(this,Qh),l(this,$h),l(this,Kh))}};On=new WeakMap,Ds=new WeakMap,$h=new WeakMap,Kh=new WeakMap,la=new WeakMap,Bt=new WeakMap,Ac=new WeakMap,Sc=new WeakMap,bp=new WeakMap,vp=new WeakMap,Qh=new WeakMap,Wh=new WeakMap,Pl=new WeakMap,Ap=new WeakMap,Mb=new WeakMap,Rb=new WeakMap,ni=new WeakSet,Bf=function(){const t=l(this,Bt).subarray(4,6),e=l(this,Bt).subarray(16,18),[n,a,o,c]=l(this,On);return[(l(this,Ac)+(t[0]-e[0])/2-n)/o,(l(this,Sc)+(t[1]-e[1])/2-a)/c,(l(this,Ac)+(e[0]-t[0])/2-n)/o,(l(this,Sc)+(e[1]-t[1])/2-a)/c]},a2=function(){const[t,e,n,a]=l(this,On),[o,c,h,d]=_(this,ni,Bf).call(this);return`M${(l(this,Bt)[2]-t)/n} ${(l(this,Bt)[3]-e)/a} L${(l(this,Bt)[4]-t)/n} ${(l(this,Bt)[5]-e)/a} L${o} ${c} L${h} ${d} L${(l(this,Bt)[16]-t)/n} ${(l(this,Bt)[17]-e)/a} L${(l(this,Bt)[14]-t)/n} ${(l(this,Bt)[15]-e)/a} Z`},r2=function(t){const e=l(this,Ds);t.push(`L${e[4]} ${e[5]} Z`)},l2=function(t){const[e,n,a,o]=l(this,On),c=l(this,Bt).subarray(4,6),h=l(this,Bt).subarray(16,18),[d,f,m,b]=_(this,ni,Bf).call(this);t.push(`L${(c[0]-e)/a} ${(c[1]-n)/o} L${d} ${f} L${m} ${b} L${(h[0]-e)/a} ${(h[1]-n)/o}`)},o2=function(t){const e=l(this,Bt),[n,a,o,c]=l(this,On),[h,d,f,m]=_(this,ni,Bf).call(this),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-a)/c],0),this.newFreeDrawOutline(b,t,l(this,On),l(this,Qh),l(this,$h),l(this,Kh))},c2=function(t,e){const n=l(this,Ds);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},u2=function(t,e){const n=l(this,Bt).subarray(4,6),a=l(this,Bt).subarray(16,18),[o,c,h,d]=l(this,On),[f,m,b,v]=_(this,ni,Bf).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/h,(n[1]-c)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,b,v,NaN,NaN,NaN,NaN,(a[0]-o)/h,(a[1]-c)/d],e),e+=24},E(Ha,Ap,8),E(Ha,Mb,2),E(Ha,Rb,l(Ha,Ap)+l(Ha,Mb));let hb=Ha;var Zh,wc,gr,Sp,Nn,wp,Ie,Db,d2;class h2 extends ct{constructor(e,n,a,o,c,h){super();E(this,Db);E(this,Zh);E(this,wc,new Float32Array(4));E(this,gr);E(this,Sp);E(this,Nn);E(this,wp);E(this,Ie);A(this,Ie,e),A(this,Nn,n),A(this,Zh,a),A(this,wp,o),A(this,gr,c),A(this,Sp,h),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],_(this,Db,d2).call(this,h);const[d,f,m,b]=l(this,wc);for(let v=0,S=e.length;v<S;v+=2)e[v]=(e[v]-d)/m,e[v+1]=(e[v+1]-f)/b;for(let v=0,S=n.length;v<S;v+=2)n[v]=(n[v]-d)/m,n[v+1]=(n[v+1]-f)/b}toSVGPath(){const e=[`M${l(this,Ie)[4]} ${l(this,Ie)[5]}`];for(let n=6,a=l(this,Ie).length;n<a;n+=6){if(isNaN(l(this,Ie)[n])){e.push(`L${l(this,Ie)[n+4]} ${l(this,Ie)[n+5]}`);continue}e.push(`C${l(this,Ie)[n]} ${l(this,Ie)[n+1]} ${l(this,Ie)[n+2]} ${l(this,Ie)[n+3]} ${l(this,Ie)[n+4]} ${l(this,Ie)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,a,o],c){const h=a-e,d=o-n;let f,m;switch(c){case 0:f=ct._rescale(l(this,Ie),e,o,h,-d),m=ct._rescale(l(this,Nn),e,o,h,-d);break;case 90:f=ct._rescaleAndSwap(l(this,Ie),e,n,h,d),m=ct._rescaleAndSwap(l(this,Nn),e,n,h,d);break;case 180:f=ct._rescale(l(this,Ie),a,n,-h,d),m=ct._rescale(l(this,Nn),a,n,-h,d);break;case 270:f=ct._rescaleAndSwap(l(this,Ie),a,o,-h,-d),m=ct._rescaleAndSwap(l(this,Nn),a,o,-h,-d);break}return{outline:Array.from(f),points:[Array.from(m)]}}get box(){return l(this,wc)}newOutliner(e,n,a,o,c,h=0){return new hb(e,n,a,o,c,h)}getNewOutline(e,n){const[a,o,c,h]=l(this,wc),[d,f,m,b]=l(this,Zh),v=c*m,S=h*b,C=a*m+d,T=o*b+f,M=this.newOutliner({x:l(this,Nn)[0]*v+C,y:l(this,Nn)[1]*S+T},l(this,Zh),l(this,wp),e,l(this,Sp),n??l(this,gr));for(let x=2;x<l(this,Nn).length;x+=2)M.add({x:l(this,Nn)[x]*v+C,y:l(this,Nn)[x+1]*S+T});return M.getOutlines()}}Zh=new WeakMap,wc=new WeakMap,gr=new WeakMap,Sp=new WeakMap,Nn=new WeakMap,wp=new WeakMap,Ie=new WeakMap,Db=new WeakSet,d2=function(e){const n=l(this,Ie);let a=n[4],o=n[5];const c=[a,o,a,o];let h=a,d=o,f=a,m=o;const b=e?Math.max:Math.min,v=new Float32Array(4);for(let C=6,T=n.length;C<T;C+=6){const M=n[C+4],x=n[C+5];isNaN(n[C])?(ut.pointBoundingBox(M,x,c),d>x?(h=M,d=x):d===x&&(h=b(h,M)),m<x?(f=M,m=x):m===x&&(f=b(f,M))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,ut.bezierBoundingBox(a,o,...n.slice(C,C+6),v),ut.rectBoundingBox(v[0],v[1],v[2],v[3],c),d>v[1]?(h=v[0],d=v[1]):d===v[1]&&(h=b(h,v[0])),m<v[3]?(f=v[2],m=v[3]):m===v[3]&&(f=b(f,v[2]))),a=M,o=x}const S=l(this,wc);S[0]=c[0]-l(this,gr),S[1]=c[1]-l(this,gr),S[2]=c[2]-c[0]+2*l(this,gr),S[3]=c[3]-c[1]+2*l(this,gr),this.firstPoint=[h,d],this.lastPoint=[f,m]};var Ep,_p,Tp,Fl,Ls,Vi,f2,jy,g2,p2,DS;class RS{constructor(t,e=0,n=0,a=!0){E(this,Vi);E(this,Ep);E(this,_p);E(this,Tp);E(this,Fl,[]);E(this,Ls,[]);const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:T,y:M,width:x,height:L}of t){const R=Math.floor((T-e)/c)*c,O=Math.ceil((T+x+e)/c)*c,N=Math.floor((M-e)/c)*c,B=Math.ceil((M+L+e)/c)*c,F=[R,N,B,!0],W=[O,N,B,!1];l(this,Fl).push(F,W),ut.rectBoundingBox(R,N,O,B,o)}const h=o[2]-o[0]+2*n,d=o[3]-o[1]+2*n,f=o[0]-n,m=o[1]-n;let b=a?-1/0:1/0,v=1/0;const S=l(this,Fl).at(a?-1:-2),C=[S[0],S[2]];for(const T of l(this,Fl)){const[M,x,L,R]=T;!R&&a?x<v?(v=x,b=M):x===v&&(b=Math.max(b,M)):R&&!a&&(x<v?(v=x,b=M):x===v&&(b=Math.min(b,M))),T[0]=(M-f)/h,T[1]=(x-m)/d,T[2]=(L-m)/d}A(this,Ep,new Float32Array([f,m,h,d])),A(this,_p,[b,v]),A(this,Tp,C)}getOutlines(){l(this,Fl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of l(this,Fl))e[3]?(t.push(..._(this,Vi,DS).call(this,e)),_(this,Vi,g2).call(this,e)):(_(this,Vi,p2).call(this,e),t.push(..._(this,Vi,DS).call(this,e)));return _(this,Vi,f2).call(this,t)}}Ep=new WeakMap,_p=new WeakMap,Tp=new WeakMap,Fl=new WeakMap,Ls=new WeakMap,Vi=new WeakSet,f2=function(t){const e=[],n=new Set;for(const c of t){const[h,d,f]=c;e.push([h,d,c],[h,f,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),n.add(d),n.add(f)}const a=[];let o;for(;n.size>0;){const c=n.values().next().value;let[h,d,f,m,b]=c;n.delete(c);let v=h,S=d;for(o=[h,f],a.push(o);;){let C;if(n.has(m))C=m;else if(n.has(b))C=b;else break;n.delete(C),[h,d,f,m,b]=C,v!==h&&(o.push(v,S,h,S===d?d:f),v=h),S=S===d?f:d}o.push(v,S)}return new QN(a,l(this,Ep),l(this,_p),l(this,Tp))},jy=function(t){const e=l(this,Ls);let n=0,a=e.length-1;for(;n<=a;){const o=n+a>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:a=o-1}return a+1},g2=function([,t,e]){const n=_(this,Vi,jy).call(this,t);l(this,Ls).splice(n,0,[t,e])},p2=function([,t,e]){const n=_(this,Vi,jy).call(this,t);for(let a=n;a<l(this,Ls).length;a++){const[o,c]=l(this,Ls)[a];if(o!==t)break;if(o===t&&c===e){l(this,Ls).splice(a,1);return}}for(let a=n-1;a>=0;a--){const[o,c]=l(this,Ls)[a];if(o!==t)break;if(o===t&&c===e){l(this,Ls).splice(a,1);return}}},DS=function(t){const[e,n,a]=t,o=[[e,n,a]],c=_(this,Vi,jy).call(this,a);for(let h=0;h<c;h++){const[d,f]=l(this,Ls)[h];for(let m=0,b=o.length;m<b;m++){const[,v,S]=o[m];if(!(f<=v||S<=d)){if(v>=d){if(S>f)o[m][1]=f;else{if(b===1)return[];o.splice(m,1),m--,b--}continue}o[m][2]=d,S>f&&o.push([e,f,S])}}}return o};var Cp,Jh;class QN extends ct{constructor(e,n,a,o){super();E(this,Cp);E(this,Jh);A(this,Jh,e),A(this,Cp,n),this.firstPoint=a,this.lastPoint=o}toSVGPath(){const e=[];for(const n of l(this,Jh)){let[a,o]=n;e.push(`M${a} ${o}`);for(let c=2;c<n.length;c+=2){const h=n[c],d=n[c+1];h===a?(e.push(`V${d}`),o=d):d===o&&(e.push(`H${h}`),a=h)}e.push("Z")}return e.join(" ")}serialize([e,n,a,o],c){const h=[],d=a-e,f=o-n;for(const m of l(this,Jh)){const b=new Array(m.length);for(let v=0;v<m.length;v+=2)b[v]=e+m[v]*d,b[v+1]=o-m[v+1]*f;h.push(b)}return h}get box(){return l(this,Cp)}get classNamesForOutlining(){return["highlightOutline"]}}Cp=new WeakMap,Jh=new WeakMap;class LS extends hb{newFreeDrawOutline(t,e,n,a,o,c){return new WN(t,e,n,a,o,c)}}class WN extends h2{newOutliner(t,e,n,a,o,c=0){return new LS(t,e,n,a,o,c)}}var td,xp,pr,Ec,Mp,ln,Rp,Dp,_c,kn,Bn,wi,ed,id,Bi,nd,ds,Lp,Ot,OS,Gy,m2,y2,b2,NS,vo,gs,Bu,v2,qy,Vy,A2,S2,w2,E2,_2;const Kt=class Kt extends ye{constructor(e){super({...e,name:"highlightEditor"});E(this,Ot);E(this,td,null);E(this,xp,0);E(this,pr);E(this,Ec,null);E(this,Mp,null);E(this,ln,null);E(this,Rp,null);E(this,Dp,0);E(this,_c,null);E(this,kn,null);E(this,Bn,null);E(this,wi,!1);E(this,ed,null);E(this,id,null);E(this,Bi,null);E(this,nd,"");E(this,ds);E(this,Lp,"");this.color=e.color||Kt._defaultColor,A(this,ds,e.thickness||Kt._defaultThickness),this.opacity=e.opacity||Kt._defaultOpacity,A(this,pr,e.boxes||null),A(this,Lp,e.methodOfCreation||""),A(this,nd,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(A(this,wi,!0),_(this,Ot,Gy).call(this,e),_(this,Ot,vo).call(this)):l(this,pr)&&(A(this,td,e.anchorNode),A(this,xp,e.anchorOffset),A(this,Rp,e.focusNode),A(this,Dp,e.focusOffset),_(this,Ot,OS).call(this),_(this,Ot,vo).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=Kt.prototype;return Ct(this,"_keyboardManager",new jp([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,wi)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,ds),methodOfCreation:l(this,Lp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var a;ye.initialize(e,n),Kt._defaultColor||(Kt._defaultColor=((a=n.highlightColors)==null?void 0:a.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:Kt._defaultColor=n;break;case jt.HIGHLIGHT_THICKNESS:Kt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return l(this,id)}get commentButtonPosition(){return l(this,ed)}updateParams(e,n){switch(e){case jt.HIGHLIGHT_COLOR:_(this,Ot,m2).call(this,n);break;case jt.HIGHLIGHT_THICKNESS:_(this,Ot,y2).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,Kt._defaultColor],[jt.HIGHLIGHT_THICKNESS,Kt._defaultThickness]]}get propertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,this.color||Kt._defaultColor],[jt.HIGHLIGHT_THICKNESS,l(this,ds)||Kt._defaultThickness],[jt.HIGHLIGHT_FREE,l(this,wi)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bn),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=l(this,Mp))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",A(this,Mp,new ob({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(_(this,Ot,Vy).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,_(this,Ot,Vy).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){_(this,Ot,NS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,Ot,vo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?_(this,Ot,NS).call(this):e&&(_(this,Ot,vo).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,h;const{drawLayer:n}=this.parent;let a;l(this,wi)?(e=(e-this.rotation+360)%360,a=_(o=Kt,gs,Bu).call(o,l(this,kn).box,e)):a=_(c=Kt,gs,Bu).call(c,[this.x,this.y,this.width,this.height],e),n.updateProperties(l(this,Bn),{bbox:a,root:{"data-main-rotation":e}}),n.updateProperties(l(this,Bi),{bbox:_(h=Kt,gs,Bu).call(h,l(this,ln).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,nd)&&(e.setAttribute("aria-label",l(this,nd)),e.setAttribute("role","mark")),l(this,wi)?e.classList.add("free"):this.div.addEventListener("keydown",_(this,Ot,v2).bind(this),{signal:this._uiManager._signal});const n=A(this,_c,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,Ec),this.setDims(),GC(this,l(this,_c),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bi),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bi),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:_(this,Ot,qy).call(this,!0);break;case 1:case 3:_(this,Ot,qy).call(this,!1);break}}select(){var e;super.select(),l(this,Bi)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Bi)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Bi),{rootClass:{selected:!1}}),l(this,wi)||_(this,Ot,qy).call(this,!1))}get _mustFixPosition(){return!l(this,wi)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,Bn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Bi),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:a,x:o,y:c}){const{x:h,y:d,width:f,height:m}=a.getBoundingClientRect(),b=new AbortController,v=e.combinedSignal(b),S=C=>{b.abort(),_(this,gs,E2).call(this,e,C)};window.addEventListener("blur",S,{signal:v}),window.addEventListener("pointerup",S,{signal:v}),window.addEventListener("pointerdown",Pe,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",ms,{signal:v}),a.addEventListener("pointermove",_(this,gs,w2).bind(this,e),{signal:v}),this._freeHighlight=new LS({x:o,y:c},[h,d,f,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,a){var T,M,x,L;let o=null;if(e instanceof Zx){const{data:{quadPoints:R,rect:O,rotation:N,id:B,color:F,opacity:W,popupRef:Z,richText:it,contentsObj:et,creationDate:rt,modificationDate:yt},parent:{page:{pageNumber:gt}}}=e;o=e={annotationType:Mt.HIGHLIGHT,color:Array.from(F),opacity:W,quadPoints:R,boxes:null,pageIndex:gt-1,rect:O.slice(0),rotation:N,annotationElementId:B,id:B,deleted:!1,popupRef:Z,richText:it,comment:(et==null?void 0:et.str)||null,creationDate:rt,modificationDate:yt}}else if(e instanceof hw){const{data:{inkLists:R,rect:O,rotation:N,id:B,color:F,borderStyle:{rawWidth:W},popupRef:Z,richText:it,contentsObj:et,creationDate:rt,modificationDate:yt},parent:{page:{pageNumber:gt}}}=e;o=e={annotationType:Mt.HIGHLIGHT,color:Array.from(F),thickness:W,inkLists:R,boxes:null,pageIndex:gt-1,rect:O.slice(0),rotation:N,annotationElementId:B,id:B,deleted:!1,popupRef:Z,richText:it,comment:(et==null?void 0:et.str)||null,creationDate:rt,modificationDate:yt}}const{color:c,quadPoints:h,inkLists:d,opacity:f}=e,m=await super.deserialize(e,n,a);m.color=ut.makeHexColor(...c),m.opacity=f||1,d&&A(m,ds,e.thickness),m._initialData=o,e.comment&&m.setCommentData(e);const[b,v]=m.pageDimensions,[S,C]=m.pageTranslation;if(h){const R=A(m,pr,[]);for(let O=0;O<h.length;O+=8)R.push({x:(h[O]-S)/b,y:1-(h[O+1]-C)/v,width:(h[O+2]-h[O])/b,height:(h[O+1]-h[O+5])/v});_(T=m,Ot,OS).call(T),_(M=m,Ot,vo).call(M),m.rotate(m.rotation)}else if(d){A(m,wi,!0);const R=d[0],O={x:R[0]-S,y:v-(R[1]-C)},N=new LS(O,[0,0,b,v],1,l(m,ds)/2,!0,.001);for(let W=0,Z=R.length;W<Z;W+=2)O.x=R[W]-S,O.y=v-(R[W+1]-C),N.add(O);const{id:B,clipPathId:F}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:N.toSVGPath()}},!0,!0);_(x=m,Ot,Gy).call(x,{highlightOutlines:N.getOutlines(),highlightId:B,clipPathId:F}),_(L=m,Ot,vo).call(L),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=ye._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),a=super.serialize(e);return Object.assign(a,{color:n,opacity:this.opacity,thickness:l(this,ds),quadPoints:_(this,Ot,A2).call(this),outlines:_(this,Ot,S2).call(this,a.rect)}),this.addComment(a),this.annotationElementId&&!_(this,Ot,_2).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};td=new WeakMap,xp=new WeakMap,pr=new WeakMap,Ec=new WeakMap,Mp=new WeakMap,ln=new WeakMap,Rp=new WeakMap,Dp=new WeakMap,_c=new WeakMap,kn=new WeakMap,Bn=new WeakMap,wi=new WeakMap,ed=new WeakMap,id=new WeakMap,Bi=new WeakMap,nd=new WeakMap,ds=new WeakMap,Lp=new WeakMap,Ot=new WeakSet,OS=function(){const e=new RS(l(this,pr),.001);A(this,kn,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,kn).box;const n=new RS(l(this,pr),.0025,.001,this._uiManager.direction==="ltr");A(this,ln,n.getOutlines());const{firstPoint:a}=l(this,kn);A(this,ed,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]);const{lastPoint:o}=l(this,ln);A(this,id,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},Gy=function({highlightOutlines:e,highlightId:n,clipPathId:a}){var v,S;if(A(this,kn,e),A(this,ln,e.getNewOutline(l(this,ds)/2+1.5,.0025)),n>=0)A(this,Bn,n),A(this,Ec,a),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,Bi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,ln).box,path:{d:l(this,ln).toSVGPath()}},!0));else if(this.parent){const C=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,Bn),{bbox:_(v=Kt,gs,Bu).call(v,l(this,kn).box,(C-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Bi),{bbox:_(S=Kt,gs,Bu).call(S,l(this,ln).box,C),path:{d:l(this,ln).toSVGPath()}})}const[c,h,d,f]=e.box;switch(this.rotation){case 0:this.x=c,this.y=h,this.width=d,this.height=f;break;case 90:{const[C,T]=this.parentDimensions;this.x=h,this.y=1-c,this.width=d*T/C,this.height=f*C/T;break}case 180:this.x=1-c,this.y=1-h,this.width=d,this.height=f;break;case 270:{const[C,T]=this.parentDimensions;this.x=1-h,this.y=c,this.width=d*T/C,this.height=f*C/T;break}}const{firstPoint:m}=e;A(this,ed,[(m[0]-c)/d,(m[1]-h)/f]);const{lastPoint:b}=l(this,ln);A(this,id,[(b[0]-c)/d,(b[1]-h)/f])},m2=function(e){const n=(c,h)=>{this.color=c,this.opacity=h,this.onUpdatedColor()},a=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,e,Kt._defaultOpacity),undo:n.bind(this,a,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},y2=function(e){const n=l(this,ds),a=o=>{A(this,ds,o),_(this,Ot,b2).call(this,o)};this.addCommands({cmd:a.bind(this,e),undo:a.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},b2=function(e){l(this,wi)&&(_(this,Ot,Gy).call(this,{highlightOutlines:l(this,kn).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},NS=function(){l(this,Bn)===null||!this.parent||(this.parent.drawLayer.remove(l(this,Bn)),A(this,Bn,null),this.parent.drawLayer.remove(l(this,Bi)),A(this,Bi,null))},vo=function(e=this.parent){l(this,Bn)===null&&({id:Ze(this,Bn)._,clipPathId:Ze(this,Ec)._}=e.drawLayer.draw({bbox:l(this,kn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,wi)},path:{d:l(this,kn).toSVGPath()}},!1,!0),A(this,Bi,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,wi)},bbox:l(this,ln).box,path:{d:l(this,ln).toSVGPath()}},l(this,wi))),l(this,_c)&&(l(this,_c).style.clipPath=l(this,Ec)))},gs=new WeakSet,Bu=function([e,n,a,o],c){switch(c){case 90:return[1-n-o,e,o,a];case 180:return[1-e-a,1-n-o,a,o];case 270:return[n,1-e-a,o,a]}return[e,n,a,o]},v2=function(e){Kt._keyboardManager.exec(this,e)},qy=function(e){if(!l(this,td))return;const n=window.getSelection();e?n.setPosition(l(this,td),l(this,xp)):n.setPosition(l(this,Rp),l(this,Dp))},Vy=function(){return l(this,wi)?this.rotation:0},A2=function(){if(l(this,wi))return null;const[e,n]=this.pageDimensions,[a,o]=this.pageTranslation,c=l(this,pr),h=new Float32Array(c.length*8);let d=0;for(const{x:f,y:m,width:b,height:v}of c){const S=f*e+a,C=(1-m)*n+o;h[d]=h[d+4]=S,h[d+1]=h[d+3]=C,h[d+2]=h[d+6]=S+b*e,h[d+5]=h[d+7]=C-v*n,d+=8}return h},S2=function(e){return l(this,kn).serialize(e,_(this,Ot,Vy).call(this))},w2=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},E2=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},_2=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((a,o)=>a!==n[o])},E(Kt,gs),tt(Kt,"_defaultColor",null),tt(Kt,"_defaultOpacity",1),tt(Kt,"_defaultThickness",12),tt(Kt,"_type","highlight"),tt(Kt,"_editorType",Mt.HIGHLIGHT),tt(Kt,"_freeHighlightId",-1),tt(Kt,"_freeHighlight",null),tt(Kt,"_freeHighlightClipId","");let db=Kt;var Tc;class T2{constructor(){E(this,Tc,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){l(this,Tc)[t]=e}toSVGProperties(){const t=l(this,Tc);return A(this,Tc,Object.create(null)),{root:t}}reset(){A(this,Tc,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ge("Not implemented")}}Tc=new WeakMap;var zn,sd,oi,Cc,xc,qt,kS,BS,zS,zf,C2,Xy,Pf,zu;const Ht=class Ht extends ye{constructor(e){super(e);E(this,qt);E(this,zn,null);E(this,sd);tt(this,"_colorPicker",null);tt(this,"_drawId",null);A(this,sd,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(_(this,qt,kS).call(this,e),_(this,qt,zf).call(this))}static _mergeSVGProperties(e,n){const a=new Set(Object.keys(e));for(const[o,c]of Object.entries(n))a.has(o)?Object.assign(e[o],c):e[o]=c;return e}static getDefaultDrawingOptions(e){ge("Not implemented")}static get typesMap(){ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const a=this.typesMap.get(e);a&&this._defaultDrawingOptions.updateProperty(a,n),this._currentParent&&(l(Ht,oi).updateProperty(a,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const a=this.constructor.typesMap.get(e);a&&this._updateProperty(e,a,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[a,o]of this.typesMap)e.push([a,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[a,o]of this.constructor.typesMap)e.push([a,n[o]]);return e}_updateProperty(e,n,a){const o=this._drawingOptions,c=o[n],h=d=>{var m;o.updateProperty(n,d);const f=l(this,zn).updateProperty(n,d);f&&_(this,qt,Pf).call(this,f),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:h.bind(this,a),undo:h.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Ht._mergeSVGProperties(l(this,zn).getPathResizingSVGProperties(_(this,qt,Xy).call(this)),{bbox:_(this,qt,zu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Ht._mergeSVGProperties(l(this,zn).getPathResizedSVGProperties(_(this,qt,Xy).call(this)),{bbox:_(this,qt,zu).call(this)}))}_onTranslating(e,n){var a;(a=this.parent)==null||a.drawLayer.updateProperties(this._drawId,{bbox:_(this,qt,zu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,Ht._mergeSVGProperties(l(this,zn).getPathTranslatedSVGProperties(_(this,qt,Xy).call(this),this.parentDimensions),{bbox:_(this,qt,zu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,sd)&&(A(this,sd,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){_(this,qt,zS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(_(this,qt,zf).call(this),_(this,qt,Pf).call(this,l(this,zn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var a;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),_(this,qt,zS).call(this)):e&&(this._uiManager.addShouldRescale(this),_(this,qt,zf).call(this,e),n=!this.parent&&((a=this.div)==null?void 0:a.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ht._mergeSVGProperties({bbox:_(this,qt,zu).call(this)},l(this,zn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&_(this,qt,Pf).call(this,l(this,zn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const a=super.render();a.classList.add("draw");const o=document.createElement("div");return a.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),a}static createDrawerInstance(e,n,a,o,c){ge("Not implemented")}static startDrawing(e,n,a,o){var M;const{target:c,offsetX:h,offsetY:d,pointerId:f,pointerType:m}=o;if(Di.isInitializedAndDifferentPointerType(m))return;const{viewport:{rotation:b}}=e,{width:v,height:S}=c.getBoundingClientRect(),C=A(Ht,Cc,new AbortController),T=e.combinedSignal(C);if(Di.setPointer(m,f),window.addEventListener("pointerup",x=>{Di.isSamePointerIdOrRemove(x.pointerId)&&this._endDraw(x)},{signal:T}),window.addEventListener("pointercancel",x=>{Di.isSamePointerIdOrRemove(x.pointerId)&&this._currentParent.endDrawingSession()},{signal:T}),window.addEventListener("pointerdown",x=>{Di.isSamePointerType(x.pointerType)&&(Di.initializeAndAddPointerId(x.pointerId),l(Ht,oi).isCancellable()&&(l(Ht,oi).removeLastElement(),l(Ht,oi).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:T}),window.addEventListener("contextmenu",ms,{signal:T}),c.addEventListener("pointermove",this._drawMove.bind(this),{signal:T}),c.addEventListener("touchmove",x=>{Di.isSameTimeStamp(x.timeStamp)&&Pe(x)},{signal:T}),e.toggleDrawing(),(M=n._editorUndoBar)==null||M.hide(),l(Ht,oi)){e.drawLayer.updateProperties(this._currentDrawId,l(Ht,oi).startNew(h,d,v,S,b));return}n.updateUIForDefaultProperties(this),A(Ht,oi,this.createDrawerInstance(h,d,v,S,b)),A(Ht,xc,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(Ht,xc).toSVGProperties(),l(Ht,oi).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Di.isSameTimeStamp(e.timeStamp),!l(Ht,oi))return;const{offsetX:n,offsetY:a,pointerId:o}=e;if(Di.isSamePointerId(o)){if(Di.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(Ht,oi).add(n,a)),Di.setTimeStamp(e.timeStamp),Pe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(Ht,oi,null),A(Ht,xc,null),Di.clearPointerType(),Di.clearTimeStamp()),l(Ht,Cc)&&(l(Ht,Cc).abort(),A(Ht,Cc,null),Di.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(Ht,oi).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const a=l(Ht,oi),o=this._currentDrawId,c=a.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,a.setLastElement(c))},undo:()=>{n.drawLayer.updateProperties(o,a.removeLastElement())},mustExec:!1,type:jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(jt.DRAW_STEP),!l(Ht,oi).isEmpty()){const{pageDimensions:[a,o],scale:c}=n,h=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(Ht,oi).getOutlines(a*c,o*c,c,this._INNER_MARGIN),drawingOptions:l(Ht,xc),mustBeCommitted:!e});return this._cleanup(!0),h}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,a,o,c,h){ge("Not implemented")}static async deserialize(e,n,a){var b,v;const{rawDims:{pageWidth:o,pageHeight:c,pageX:h,pageY:d}}=n.viewport,f=this.deserializeDraw(h,d,o,c,this._INNER_MARGIN,e),m=await super.deserialize(e,n,a);return m.createDrawingOptions(e),_(b=m,qt,kS).call(b,{drawOutlines:f}),_(v=m,qt,zf).call(v),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,a]=this.pageTranslation,[o,c]=this.pageDimensions;return l(this,zn).serialize([n,a,o,c],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};zn=new WeakMap,sd=new WeakMap,oi=new WeakMap,Cc=new WeakMap,xc=new WeakMap,qt=new WeakSet,kS=function({drawOutlines:e,drawId:n,drawingOptions:a}){A(this,zn,e),this._drawingOptions||(this._drawingOptions=a),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=_(this,qt,BS).call(this,e,this.parent),_(this,qt,Pf).call(this,e.box)},BS=function(e,n){const{id:a}=n.drawLayer.draw(Ht._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return a},zS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},zf=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=_(this,qt,BS).call(this,l(this,zn),e)}},C2=function([e,n,a,o]){const{parentDimensions:[c,h],rotation:d}=this;switch(d){case 90:return[n,1-e,a*(h/c),o*(c/h)];case 180:return[1-e,1-n,a,o];case 270:return[1-n,e,a*(h/c),o*(c/h)];default:return[e,n,a,o]}},Xy=function(){const{x:e,y:n,width:a,height:o,parentDimensions:[c,h],rotation:d}=this;switch(d){case 90:return[1-n,e,a*(c/h),o*(h/c)];case 180:return[1-e,1-n,a,o];case 270:return[n,1-e,a*(c/h),o*(h/c)];default:return[e,n,a,o]}},Pf=function(e){[this.x,this.y,this.width,this.height]=_(this,qt,C2).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},zu=function(){const{x:e,y:n,width:a,height:o,rotation:c,parentRotation:h,parentDimensions:[d,f]}=this;switch((c*4+h)/90){case 1:return[1-n-o,e,o,a];case 2:return[1-e-a,1-n-o,a,o];case 3:return[n,1-e-a,o,a];case 4:return[e,n-a*(d/f),o*(f/d),a*(d/f)];case 5:return[1-n,e,a*(d/f),o*(f/d)];case 6:return[1-e-o*(f/d),1-n,o*(f/d),a*(d/f)];case 7:return[n-a*(d/f),1-e-o*(f/d),a*(d/f),o*(f/d)];case 8:return[e-a,n-o,a,o];case 9:return[1-n,e-a,o,a];case 10:return[1-e,1-n,a,o];case 11:return[n-o,1-e,o,a];case 12:return[e-o*(f/d),n,o*(f/d),a*(d/f)];case 13:return[1-n-a*(d/f),e-o*(f/d),a*(d/f),o*(f/d)];case 14:return[1-e,1-n-a*(d/f),o*(f/d),a*(d/f)];case 15:return[n,1-e,a*(d/f),o*(f/d)];default:return[e,n,a,o]}},tt(Ht,"_currentDrawId",-1),tt(Ht,"_currentParent",null),E(Ht,oi,null),E(Ht,Cc,null),E(Ht,xc,null),tt(Ht,"_INNER_MARGIN",3);let fb=Ht;var oa,ci,ui,Mc,ad,Ui,Ei,fs,Rc,Dc,Lc,rd,Yy;class ZN{constructor(t,e,n,a,o,c){E(this,rd);E(this,oa,new Float64Array(6));E(this,ci);E(this,ui);E(this,Mc);E(this,ad);E(this,Ui);E(this,Ei,"");E(this,fs,0);E(this,Rc,new qp);E(this,Dc);E(this,Lc);A(this,Dc,n),A(this,Lc,a),A(this,Mc,o),A(this,ad,c),[t,e]=_(this,rd,Yy).call(this,t,e);const h=A(this,ci,[NaN,NaN,NaN,NaN,t,e]);A(this,Ui,[t,e]),A(this,ui,[{line:h,points:l(this,Ui)}]),l(this,oa).set(h,0)}updateProperty(t,e){t==="stroke-width"&&A(this,ad,e)}isEmpty(){return!l(this,ui)||l(this,ui).length===0}isCancellable(){return l(this,Ui).length<=10}add(t,e){[t,e]=_(this,rd,Yy).call(this,t,e);const[n,a,o,c]=l(this,oa).subarray(2,6),h=t-o,d=e-c;return Math.hypot(l(this,Dc)*h,l(this,Lc)*d)<=2?null:(l(this,Ui).push(t,e),isNaN(n)?(l(this,oa).set([o,c,t,e],2),l(this,ci).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,oa)[0])&&l(this,ci).splice(6,6),l(this,oa).set([n,a,o,c,t,e],0),l(this,ci).push(...ct.createBezierPoints(n,a,o,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(l(this,Ui).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,a,o){A(this,Dc,n),A(this,Lc,a),A(this,Mc,o),[t,e]=_(this,rd,Yy).call(this,t,e);const c=A(this,ci,[NaN,NaN,NaN,NaN,t,e]);A(this,Ui,[t,e]);const h=l(this,ui).at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),l(this,ui).push({line:c,points:l(this,Ui)}),l(this,oa).set(c,0),A(this,fs,0),this.toSVGPath(),null}getLastElement(){return l(this,ui).at(-1)}setLastElement(t){return l(this,ui)?(l(this,ui).push(t),A(this,ci,t.line),A(this,Ui,t.points),A(this,fs,0),{path:{d:this.toSVGPath()}}):l(this,Rc).setLastElement(t)}removeLastElement(){if(!l(this,ui))return l(this,Rc).removeLastElement();l(this,ui).pop(),A(this,Ei,"");for(let t=0,e=l(this,ui).length;t<e;t++){const{line:n,points:a}=l(this,ui)[t];A(this,ci,n),A(this,Ui,a),A(this,fs,0),this.toSVGPath()}return{path:{d:l(this,Ei)}}}toSVGPath(){const t=ct.svgRound(l(this,ci)[4]),e=ct.svgRound(l(this,ci)[5]);if(l(this,Ui).length===2)return A(this,Ei,`${l(this,Ei)} M ${t} ${e} Z`),l(this,Ei);if(l(this,Ui).length<=6){const a=l(this,Ei).lastIndexOf("M");A(this,Ei,`${l(this,Ei).slice(0,a)} M ${t} ${e}`),A(this,fs,6)}if(l(this,Ui).length===4){const a=ct.svgRound(l(this,ci)[10]),o=ct.svgRound(l(this,ci)[11]);return A(this,Ei,`${l(this,Ei)} L ${a} ${o}`),A(this,fs,12),l(this,Ei)}const n=[];l(this,fs)===0&&(n.push(`M ${t} ${e}`),A(this,fs,6));for(let a=l(this,fs),o=l(this,ci).length;a<o;a+=6){const[c,h,d,f,m,b]=l(this,ci).slice(a,a+6).map(ct.svgRound);n.push(`C${c} ${h} ${d} ${f} ${m} ${b}`)}return A(this,Ei,l(this,Ei)+n.join(" ")),A(this,fs,l(this,ci).length),l(this,Ei)}getOutlines(t,e,n,a){const o=l(this,ui).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),l(this,Rc).build(l(this,ui),t,e,n,l(this,Mc),l(this,ad),a),A(this,oa,null),A(this,ci,null),A(this,ui,null),A(this,Ei,null),l(this,Rc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}oa=new WeakMap,ci=new WeakMap,ui=new WeakMap,Mc=new WeakMap,ad=new WeakMap,Ui=new WeakMap,Ei=new WeakMap,fs=new WeakMap,Rc=new WeakMap,Dc=new WeakMap,Lc=new WeakMap,rd=new WeakSet,Yy=function(t,e){return ct._normalizePoint(t,e,l(this,Dc),l(this,Lc),l(this,Mc))};var Hi,Op,Np,Pn,ca,ua,ld,od,Oc,Ti,Fa,x2,M2,R2;class qp extends ct{constructor(){super(...arguments);E(this,Ti);E(this,Hi);E(this,Op,0);E(this,Np);E(this,Pn);E(this,ca);E(this,ua);E(this,ld);E(this,od);E(this,Oc)}build(e,n,a,o,c,h,d){A(this,ca,n),A(this,ua,a),A(this,ld,o),A(this,od,c),A(this,Oc,h),A(this,Np,d??0),A(this,Pn,e),_(this,Ti,M2).call(this)}get thickness(){return l(this,Oc)}setLastElement(e){return l(this,Pn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Pn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of l(this,Pn)){if(e.push(`M${ct.svgRound(n[4])} ${ct.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${ct.svgRound(n[10])} ${ct.svgRound(n[11])}`);continue}for(let a=6,o=n.length;a<o;a+=6){const[c,h,d,f,m,b]=n.subarray(a,a+6).map(ct.svgRound);e.push(`C${c} ${h} ${d} ${f} ${m} ${b}`)}}return e.join("")}serialize([e,n,a,o],c){const h=[],d=[],[f,m,b,v]=_(this,Ti,x2).call(this);let S,C,T,M,x,L,R,O,N;switch(l(this,od)){case 0:N=ct._rescale,S=e,C=n+o,T=a,M=-o,x=e+f*a,L=n+(1-m-v)*o,R=e+(f+b)*a,O=n+(1-m)*o;break;case 90:N=ct._rescaleAndSwap,S=e,C=n,T=a,M=o,x=e+m*a,L=n+f*o,R=e+(m+v)*a,O=n+(f+b)*o;break;case 180:N=ct._rescale,S=e+a,C=n,T=-a,M=o,x=e+(1-f-b)*a,L=n+m*o,R=e+(1-f)*a,O=n+(m+v)*o;break;case 270:N=ct._rescaleAndSwap,S=e+a,C=n+o,T=-a,M=-o,x=e+(1-m-v)*a,L=n+(1-f-b)*o,R=e+(1-m)*a,O=n+(1-f)*o;break}for(const{line:B,points:F}of l(this,Pn))h.push(N(B,S,C,T,M,c?new Array(B.length):null)),d.push(N(F,S,C,T,M,c?new Array(F.length):null));return{lines:h,points:d,rect:[x,L,R,O]}}static deserialize(e,n,a,o,c,{paths:{lines:h,points:d},rotation:f,thickness:m}){const b=[];let v,S,C,T,M;switch(f){case 0:M=ct._rescale,v=-e/a,S=n/o+1,C=1/a,T=-1/o;break;case 90:M=ct._rescaleAndSwap,v=-n/o,S=-e/a,C=1/o,T=1/a;break;case 180:M=ct._rescale,v=e/a+1,S=-n/o,C=-1/a,T=1/o;break;case 270:M=ct._rescaleAndSwap,v=n/o+1,S=e/a+1,C=-1/o,T=-1/a;break}if(!h){h=[];for(const L of d){const R=L.length;if(R===2){h.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1]]));continue}if(R===4){h.push(new Float32Array([NaN,NaN,NaN,NaN,L[0],L[1],NaN,NaN,NaN,NaN,L[2],L[3]]));continue}const O=new Float32Array(3*(R-2));h.push(O);let[N,B,F,W]=L.subarray(0,4);O.set([NaN,NaN,NaN,NaN,N,B],0);for(let Z=4;Z<R;Z+=2){const it=L[Z],et=L[Z+1];O.set(ct.createBezierPoints(N,B,F,W,it,et),(Z-2)*3),[N,B,F,W]=[F,W,it,et]}}}for(let L=0,R=h.length;L<R;L++)b.push({line:M(h[L].map(O=>O??NaN),v,S,C,T),points:M(d[L].map(O=>O??NaN),v,S,C,T)});const x=new this.prototype.constructor;return x.build(b,a,o,1,f,m,c),x}get box(){return l(this,Hi)}updateProperty(e,n){return e==="stroke-width"?_(this,Ti,R2).call(this,n):null}updateParentDimensions([e,n],a){const[o,c]=_(this,Ti,Fa).call(this);A(this,ca,e),A(this,ua,n),A(this,ld,a);const[h,d]=_(this,Ti,Fa).call(this),f=h-o,m=d-c,b=l(this,Hi);return b[0]-=f,b[1]-=m,b[2]+=2*f,b[3]+=2*m,b}updateRotation(e){return A(this,Op,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Hi).map(ct.svgRound).join(" ")}get defaultProperties(){const[e,n]=l(this,Hi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=l(this,Hi);let a=0,o=0,c=0,h=0,d=0,f=0;switch(l(this,Op)){case 90:o=n/e,c=-e/n,d=e;break;case 180:a=-1,h=-1,d=e,f=n;break;case 270:o=-n/e,c=e/n,f=n;break;default:return""}return`matrix(${a} ${o} ${c} ${h} ${ct.svgRound(d)} ${ct.svgRound(f)})`}getPathResizingSVGProperties([e,n,a,o]){const[c,h]=_(this,Ti,Fa).call(this),[d,f,m,b]=l(this,Hi);if(Math.abs(m-c)<=ct.PRECISION||Math.abs(b-h)<=ct.PRECISION){const M=e+a/2-(d+m/2),x=n+o/2-(f+b/2);return{path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:`${this.rotationTransform} translate(${M} ${x})`}}}const v=(a-2*c)/(m-2*c),S=(o-2*h)/(b-2*h),C=m/a,T=b/o;return{path:{"transform-origin":`${ct.svgRound(d)} ${ct.svgRound(f)}`,transform:`${this.rotationTransform} scale(${C} ${T}) translate(${ct.svgRound(c)} ${ct.svgRound(h)}) scale(${v} ${S}) translate(${ct.svgRound(-c)} ${ct.svgRound(-h)})`}}}getPathResizedSVGProperties([e,n,a,o]){const[c,h]=_(this,Ti,Fa).call(this),d=l(this,Hi),[f,m,b,v]=d;if(d[0]=e,d[1]=n,d[2]=a,d[3]=o,Math.abs(b-c)<=ct.PRECISION||Math.abs(v-h)<=ct.PRECISION){const x=e+a/2-(f+b/2),L=n+o/2-(m+v/2);for(const{line:R,points:O}of l(this,Pn))ct._translate(R,x,L,R),ct._translate(O,x,L,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const S=(a-2*c)/(b-2*c),C=(o-2*h)/(v-2*h),T=-S*(f+c)+e+c,M=-C*(m+h)+n+h;if(S!==1||C!==1||T!==0||M!==0)for(const{line:x,points:L}of l(this,Pn))ct._rescale(x,T,M,S,C,x),ct._rescale(L,T,M,S,C,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],a){const[o,c]=a,h=l(this,Hi),d=e-h[0],f=n-h[1];if(l(this,ca)===o&&l(this,ua)===c)for(const{line:m,points:b}of l(this,Pn))ct._translate(m,d,f,m),ct._translate(b,d,f,b);else{const m=l(this,ca)/o,b=l(this,ua)/c;A(this,ca,o),A(this,ua,c);for(const{line:v,points:S}of l(this,Pn))ct._rescale(v,d,f,m,b,v),ct._rescale(S,d,f,m,b,S);h[2]*=m,h[3]*=b}return h[0]=e,h[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(n)}`}}}get defaultSVGProperties(){const e=l(this,Hi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e[0])} ${ct.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Hi=new WeakMap,Op=new WeakMap,Np=new WeakMap,Pn=new WeakMap,ca=new WeakMap,ua=new WeakMap,ld=new WeakMap,od=new WeakMap,Oc=new WeakMap,Ti=new WeakSet,Fa=function(e=l(this,Oc)){const n=l(this,Np)+e/2*l(this,ld);return l(this,od)%180===0?[n/l(this,ca),n/l(this,ua)]:[n/l(this,ua),n/l(this,ca)]},x2=function(){const[e,n,a,o]=l(this,Hi),[c,h]=_(this,Ti,Fa).call(this,0);return[e+c,n+h,a-2*c,o-2*h]},M2=function(){const e=A(this,Hi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of l(this,Pn)){if(o.length<=12){for(let d=4,f=o.length;d<f;d+=6)ut.pointBoundingBox(o[d],o[d+1],e);continue}let c=o[4],h=o[5];for(let d=6,f=o.length;d<f;d+=6){const[m,b,v,S,C,T]=o.subarray(d,d+6);ut.bezierBoundingBox(c,h,m,b,v,S,C,T,e),c=C,h=T}}const[n,a]=_(this,Ti,Fa).call(this);e[0]=Gi(e[0]-n,0,1),e[1]=Gi(e[1]-a,0,1),e[2]=Gi(e[2]+n,0,1),e[3]=Gi(e[3]+a,0,1),e[2]-=e[0],e[3]-=e[1]},R2=function(e){const[n,a]=_(this,Ti,Fa).call(this);A(this,Oc,e);const[o,c]=_(this,Ti,Fa).call(this),[h,d]=[o-n,c-a],f=l(this,Hi);return f[0]-=h,f[1]-=d,f[2]+=2*h,f[3]+=2*d,f};class Hb extends T2{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ye._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Hb(this._viewParameters);return t.updateAll(this),t}}var Lb,D2;const ju=class ju extends fb{constructor(e){super({...e,name:"inkEditor"});E(this,Lb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){ye.initialize(e,n),this._defaultDrawingOptions=new Hb(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ct(this,"typesMap",new Map([[jt.INK_THICKNESS,"stroke-width"],[jt.INK_COLOR,"stroke"],[jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,a,o,c){return new ZN(e,n,a,o,c,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,a,o,c,h){return qp.deserialize(e,n,a,o,c,h)}static async deserialize(e,n,a){let o=null;if(e instanceof hw){const{data:{inkLists:h,rect:d,rotation:f,id:m,color:b,opacity:v,borderStyle:{rawWidth:S},popupRef:C,richText:T,contentsObj:M,creationDate:x,modificationDate:L},parent:{page:{pageNumber:R}}}=e;o=e={annotationType:Mt.INK,color:Array.from(b),thickness:S,opacity:v,paths:{points:h},boxes:null,pageIndex:R-1,rect:d.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:C,richText:T,comment:(M==null?void 0:M.str)||null,creationDate:x,modificationDate:L}}const c=await super.deserialize(e,n,a);return c._initialData=o,e.comment&&c.setCommentData(e),c}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new cb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return jt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:a}=this;n.updateSVGProperty("stroke-width"),a.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:a}){this._drawingOptions=ju.getDefaultDrawingOptions({stroke:ut.makeHexColor(...e),"stroke-width":n,"stroke-opacity":a})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:a}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":h}}=this,d=Object.assign(super.serialize(e),{color:ye._colorManager.convert(o),opacity:c,thickness:h,paths:{lines:n,points:a}});return this.addComment(d),e?(d.isCopy=!0,d):this.annotationElementId&&!_(this,Lb,D2).call(this,d)?null:(d.id=this.annotationElementId,d)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:a}=this.serializeDraw(!1);return e.updateEdited({rect:a,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Lb=new WeakSet,D2=function(e){const{color:n,thickness:a,opacity:o,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((h,d)=>h!==n[d])||e.thickness!==a||e.opacity!==o||e.pageIndex!==c},tt(ju,"_type","ink"),tt(ju,"_editorType",Mt.INK),tt(ju,"_defaultDrawingOptions",null);let PS=ju;class FS extends qp{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const yy=8,bf=3;var Nc,Qt,US,Os,L2,O2,HS,$y,N2,k2,B2,IS,jS,z2;class Sr{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:a},o,c,h,d){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const b=200,v=m.font=`${n} ${a} ${b}px ${e}`,{actualBoundingBoxLeft:S,actualBoundingBoxRight:C,actualBoundingBoxAscent:T,actualBoundingBoxDescent:M,fontBoundingBoxAscent:x,fontBoundingBoxDescent:L,width:R}=m.measureText(t),O=1.5,N=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||0,R)*O),B=Math.ceil(Math.max(Math.abs(T)+Math.abs(M)||b,Math.abs(x)+Math.abs(L)||b)*O);f=new OffscreenCanvas(N,B),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=v,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,N,B),m.fillStyle="black",m.fillText(t,N*(O-1)/2,B*(3-O)/2);const F=_(this,Qt,IS).call(this,m.getImageData(0,0,N,B).data),W=_(this,Qt,B2).call(this,F),Z=_(this,Qt,jS).call(this,W),it=_(this,Qt,HS).call(this,F,N,B,Z);return this.processDrawnLines({lines:{curves:it,width:N,height:B},pageWidth:o,pageHeight:c,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,n,a,o){const[c,h,d]=_(this,Qt,z2).call(this,t),[f,m]=_(this,Qt,k2).call(this,c,h,d,Math.hypot(h,d)*l(this,Nc).sigmaSFactor,l(this,Nc).sigmaR,l(this,Nc).kernelSize),b=_(this,Qt,jS).call(this,m),v=_(this,Qt,HS).call(this,f,h,d,b);return this.processDrawnLines({lines:{curves:v,width:h,height:d},pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:a,innerMargin:o,mustSmooth:c,areContours:h}){a%180!==0&&([e,n]=[n,e]);const{curves:d,width:f,height:m}=t,b=t.thickness??0,v=[],S=Math.min(e/f,n/m),C=S/e,T=S/n,M=[];for(const{points:L}of d){const R=c?_(this,Qt,N2).call(this,L):L;if(!R)continue;M.push(R);const O=R.length,N=new Float32Array(O),B=new Float32Array(3*(O===2?2:O-2));if(v.push({line:B,points:N}),O===2){N[0]=R[0]*C,N[1]=R[1]*T,B.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[F,W,Z,it]=R;F*=C,W*=T,Z*=C,it*=T,N.set([F,W,Z,it],0),B.set([NaN,NaN,NaN,NaN,F,W],0);for(let et=4;et<O;et+=2){const rt=N[et]=R[et]*C,yt=N[et+1]=R[et+1]*T;B.set(ct.createBezierPoints(F,W,Z,it,rt,yt),(et-2)*3),[F,W,Z,it]=[Z,it,rt,yt]}}if(v.length===0)return null;const x=h?new FS:new qp;return x.build(v,e,n,1,a,h?0:b,o),{outline:x,newCurves:M,areContours:h,thickness:b,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:a,height:o}){let c=1/0,h=-1/0,d=0;for(const R of t){d+=R.length;for(let O=2,N=R.length;O<N;O++){const B=R[O]-R[O-2];c=Math.min(c,B),h=Math.max(h,B)}}let f;c>=-128&&h<=127?f=Int8Array:c>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const m=t.length,b=yy+bf*m,v=new Uint32Array(b);let S=0;v[S++]=b*Uint32Array.BYTES_PER_ELEMENT+(d-2*m)*f.BYTES_PER_ELEMENT,v[S++]=0,v[S++]=a,v[S++]=o,v[S++]=e?0:1,v[S++]=Math.max(0,Math.floor(n??0)),v[S++]=m,v[S++]=f.BYTES_PER_ELEMENT;for(const R of t)v[S++]=R.length-2,v[S++]=R[0],v[S++]=R[1];const C=new CompressionStream("deflate-raw"),T=C.writable.getWriter();await T.ready,T.write(v);const M=f.prototype.constructor;for(const R of t){const O=new M(R.length-2);for(let N=2,B=R.length;N<B;N++)O[N-2]=R[N]-R[N-2];T.write(O)}T.close();const x=await new Response(C.readable).arrayBuffer(),L=new Uint8Array(x);return kC(L)}static async decompressSignature(t){try{const e=gO(t),{readable:n,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,h=0;for await(const R of n)c||(c=new Uint8Array(new Uint32Array(R.buffer,0,4)[0])),c.set(R,h),h+=R.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=d[2],b=d[3],v=d[4]===0,S=d[5],C=d[6],T=d[7],M=[],x=(yy+bf*C)*Uint32Array.BYTES_PER_ELEMENT;let L;switch(T){case Int8Array.BYTES_PER_ELEMENT:L=new Int8Array(c.buffer,x);break;case Int16Array.BYTES_PER_ELEMENT:L=new Int16Array(c.buffer,x);break;case Int32Array.BYTES_PER_ELEMENT:L=new Int32Array(c.buffer,x);break}h=0;for(let R=0;R<C;R++){const O=d[bf*R+yy],N=new Float32Array(O+2);M.push(N);for(let B=0;B<bf-1;B++)N[B]=d[bf*R+yy+B+1];for(let B=0;B<O;B++)N[B+2]=N[B]+L[h++]}return{areContours:v,thickness:S,outlines:M,width:m,height:b}}catch(e){return Tt(`decompressSignature: ${e}`),null}}}Nc=new WeakMap,Qt=new WeakSet,US=function(t,e,n,a){return n-=t,a-=e,n===0?a>0?0:4:n===1?a+6:2-a},Os=new WeakMap,L2=function(t,e,n,a,o,c,h){const d=_(this,Qt,US).call(this,n,a,o,c);for(let f=0;f<8;f++){const m=(-f+d-h+16)%8,b=l(this,Os)[2*m],v=l(this,Os)[2*m+1];if(t[(n+b)*e+(a+v)]!==0)return m}return-1},O2=function(t,e,n,a,o,c,h){const d=_(this,Qt,US).call(this,n,a,o,c);for(let f=0;f<8;f++){const m=(f+d+h+16)%8,b=l(this,Os)[2*m],v=l(this,Os)[2*m+1];if(t[(n+b)*e+(a+v)]!==0)return m}return-1},HS=function(t,e,n,a){const o=t.length,c=new Int32Array(o);for(let m=0;m<o;m++)c[m]=t[m]<=a?1:0;for(let m=1;m<n-1;m++)c[m*e]=c[m*e+e-1]=0;for(let m=0;m<e;m++)c[m]=c[e*n-1-m]=0;let h=1,d;const f=[];for(let m=1;m<n-1;m++){d=1;for(let b=1;b<e-1;b++){const v=m*e+b,S=c[v];if(S===0)continue;let C=m,T=b;if(S===1&&c[v-1]===0)h+=1,T-=1;else if(S>=1&&c[v+1]===0)h+=1,T+=1,S>1&&(d=S);else{S!==1&&(d=Math.abs(S));continue}const M=[b,m],x=T===b+1,L={isHole:x,points:M,id:h,parent:0};f.push(L);let R;for(const et of f)if(et.id===d){R=et;break}R?R.isHole?L.parent=x?R.parent:d:L.parent=x?d:R.parent:L.parent=x?d:0;const O=_(this,Qt,L2).call(this,c,e,m,b,C,T,0);if(O===-1){c[v]=-h,c[v]!==1&&(d=Math.abs(c[v]));continue}let N=l(this,Os)[2*O],B=l(this,Os)[2*O+1];const F=m+N,W=b+B;C=F,T=W;let Z=m,it=b;for(;;){const et=_(this,Qt,O2).call(this,c,e,Z,it,C,T,1);N=l(this,Os)[2*et],B=l(this,Os)[2*et+1];const rt=Z+N,yt=it+B;M.push(yt,rt);const gt=Z*e+it;if(c[gt+1]===0?c[gt]=-h:c[gt]===1&&(c[gt]=h),rt===m&&yt===b&&Z===F&&it===W){c[v]!==1&&(d=Math.abs(c[v]));break}else C=Z,T=it,Z=rt,it=yt}}}return f},$y=function(t,e,n,a){if(n-e<=4){for(let F=e;F<n-2;F+=2)a.push(t[F],t[F+1]);return}const o=t[e],c=t[e+1],h=t[n-4]-o,d=t[n-3]-c,f=Math.hypot(h,d),m=h/f,b=d/f,v=m*c-b*o,S=d/h,C=1/f,T=Math.atan(S),M=Math.cos(T),x=Math.sin(T),L=C*(Math.abs(M)+Math.abs(x)),R=C*(1-L+L**2),O=Math.max(Math.atan(Math.abs(x+M)*R),Math.atan(Math.abs(x-M)*R));let N=0,B=e;for(let F=e+2;F<n-2;F+=2){const W=Math.abs(v-m*t[F+1]+b*t[F]);W>N&&(B=F,N=W)}N>(f*O)**2?(_(this,Qt,$y).call(this,t,e,B+2,a),_(this,Qt,$y).call(this,t,B,n,a)):a.push(o,c)},N2=function(t){const e=[],n=t.length;return _(this,Qt,$y).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},k2=function(t,e,n,a,o,c){const h=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let T=0;T<c;T++){const M=(T-f)**2;for(let x=0;x<c;x++)h[T*c+x]=Math.exp((M+(x-f)**2)/d)}const m=new Float32Array(256),b=-2*o**2;for(let T=0;T<256;T++)m[T]=Math.exp(T**2/b);const v=t.length,S=new Uint8Array(v),C=new Uint32Array(256);for(let T=0;T<n;T++)for(let M=0;M<e;M++){const x=T*e+M,L=t[x];let R=0,O=0;for(let B=0;B<c;B++){const F=T+B-f;if(!(F<0||F>=n))for(let W=0;W<c;W++){const Z=M+W-f;if(Z<0||Z>=e)continue;const it=t[F*e+Z],et=h[B*c+W]*m[Math.abs(it-L)];R+=it*et,O+=et}}const N=S[x]=Math.round(R/O);C[N]++}return[S,C]},B2=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},IS=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let h=0,d=n.length;h<d;h++){const f=n[h]=t[h<<2];a=Math.max(a,f),o=Math.min(o,f)}const c=255/(a-o);for(let h=0,d=n.length;h<d;h++)n[h]=(n[h]-o)*c;return n},jS=function(t){let e,n=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let c=o,h=o;for(e=o;e<256;e++){const d=t[e];d>n&&(e-c>a&&(a=e-c,h=e-1),n=d,c=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e},z2=function(t){const e=t,{width:n,height:a}=t,{maxDim:o}=l(this,Nc);let c=n,h=a;if(n>o||a>o){let v=n,S=a,C=Math.log2(Math.max(n,a)/o);const T=Math.floor(C);C=C===T?T-1:T;for(let x=0;x<C;x++){c=Math.ceil(v/2),h=Math.ceil(S/2);const L=new OffscreenCanvas(c,h);L.getContext("2d").drawImage(t,0,0,v,S,0,0,c,h),v=c,S=h,t!==e&&t.close(),t=L.transferToImageBitmap()}const M=Math.min(o/c,o/h);c=Math.round(c*M),h=Math.round(h*M)}const f=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,h);const m=f.getImageData(0,0,c,h).data;return[_(this,Qt,IS).call(this,m),c,h]},E(Sr,Qt),E(Sr,Nc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),E(Sr,Os,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class dw extends T2{constructor(){super(),super.updateProperties({fill:ye._defaultLineColor,"stroke-width":0})}clone(){const t=new dw;return t.updateAll(this),t}}class fw extends Hb{constructor(t){super(t),super.updateProperties({stroke:ye._defaultLineColor,"stroke-width":1})}clone(){const t=new fw(this._viewParameters);return t.updateAll(this),t}}var Ul,ha,Hl,kc;const An=class An extends fb{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});E(this,Ul,!1);E(this,ha,null);E(this,Hl,null);E(this,kc,null);this._willKeepAspectRatio=!0,A(this,Hl,e.signatureData||null),A(this,ha,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){ye.initialize(e,n),this._defaultDrawingOptions=new dw,this._defaultDrawnSignatureOptions=new fw(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ct(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,ha)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:a}=this;if(a&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,Hl)){const{lines:o,mustSmooth:c,areContours:h,description:d,uuid:f,heightInPage:m}=l(this,Hl),{rawDims:{pageWidth:b,pageHeight:v},rotation:S}=this.parent.viewport,C=Sr.processDrawnLines({lines:o,pageWidth:b,pageHeight:v,rotation:S,innerMargin:An._INNER_MARGIN,mustSmooth:c,areContours:h});this.addSignature(C,m,d,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,ha)||""}));return a&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){A(this,kc,e),this.addEditToolbar()}getUuid(){return l(this,kc)}get description(){return l(this,ha)}set description(e){A(this,ha,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:a,width:o,height:c}=l(this,Hl),h=Math.max(o,c),d=Sr.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:a,width:o,height:c},pageWidth:h,pageHeight:h,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:d.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,a,o){const{x:c,y:h}=this,{outline:d}=A(this,Hl,e);A(this,Ul,d instanceof FS),this.description=a;let f;l(this,Ul)?f=An.getDefaultDrawingOptions():(f=An._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":d.thickness})),this._addOutlines({drawOutlines:d,drawingOptions:f});const[,m]=this.pageDimensions;let b=n/m;b=b>=1?.5:b,this.width*=b/this.height,this.width>=1&&(b*=.9/this.width,this.width=.9),this.height=b,this.setDims(),this.x=c,this.y=h,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!a}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:o}=this.parent.viewport;return Sr.process(e,n,a,o,An._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:a,pageHeight:o},rotation:c}=this.parent.viewport;return Sr.extractContoursFromText(e,n,a,o,c,An._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:a},rotation:o}=this.parent.viewport;return Sr.processDrawnLines({lines:e,pageWidth:n,pageHeight:a,rotation:o,innerMargin:An._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=An.getDefaultDrawingOptions():(this._drawingOptions=An._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:a}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,c=Object.assign(super.serialize(e),{isSignature:!0,areContours:l(this,Ul),color:[0,0,0],thickness:l(this,Ul)?0:o});return this.addComment(c),e?(c.paths={lines:n,points:a},c.uuid=l(this,kc),c.isCopy=!0):c.lines=n,l(this,ha)&&(c.accessibilityData={type:"Figure",alt:l(this,ha)}),c}static deserializeDraw(e,n,a,o,c,h){return h.areContours?FS.deserialize(e,n,a,o,c,h):qp.deserialize(e,n,a,o,c,h)}static async deserialize(e,n,a){var c;const o=await super.deserialize(e,n,a);return A(o,Ul,e.areContours),o.description=((c=e.accessibilityData)==null?void 0:c.alt)||"",A(o,kc,e.uuid),o}};Ul=new WeakMap,ha=new WeakMap,Hl=new WeakMap,kc=new WeakMap,tt(An,"_type","signature"),tt(An,"_editorType",Mt.SIGNATURE),tt(An,"_defaultDrawingOptions",null);let GS=An;var Te,hi,Il,mr,jl,cd,yr,Bc,da,Fn,ud,Vt,Ff,Uf,Ky,Qy,Wy,VS,Zy,P2;class qS extends ye{constructor(e){super({...e,name:"stampEditor"});E(this,Vt);E(this,Te,null);E(this,hi,null);E(this,Il,null);E(this,mr,null);E(this,jl,null);E(this,cd,"");E(this,yr,null);E(this,Bc,!1);E(this,da,null);E(this,Fn,!1);E(this,ud,!1);A(this,mr,e.bitmapUrl),A(this,jl,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){ye.initialize(e,n)}static isHandlingMimeForPasting(e){return RA.includes(e)}static paste(e,n){n.pasteEditor({mode:Mt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:a}=this._uiManager;if(!a)throw new Error("No ML.");if(!await a.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:c,height:h}=e||this.copyCanvas(null,null,!0).imageData,d=await a.guess({name:"altText",request:{data:o,width:c,height:h,channels:o.length/(c*h)}});if(!d)throw new Error("No response from the AI service.");if(d.error)throw new Error("Error from the AI service.");if(d.cancel)return null;if(!d.output)throw new Error("No valid response from the AI service.");const f=d.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){var e;l(this,hi)&&(A(this,Te,null),this._uiManager.imageManager.deleteId(l(this,hi)),(e=l(this,yr))==null||e.remove(),A(this,yr,null),l(this,da)&&(clearTimeout(l(this,da)),A(this,da,null))),super.remove()}rebuild(){if(!this.parent){l(this,hi)&&_(this,Vt,Ky).call(this);return}super.rebuild(),this.div!==null&&(l(this,hi)&&l(this,yr)===null&&_(this,Vt,Ky).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Il)||l(this,Te)||l(this,mr)||l(this,jl)||l(this,hi)||l(this,Bc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Bc)||(l(this,Te)?_(this,Vt,Qy).call(this):_(this,Vt,Ky).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:a,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),a&&this._uiManager.imageManager.isValidId(a)&&(A(this,hi,a),o&&A(this,Te,o),A(this,Bc,!1),_(this,Vt,Qy).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,da)!==null&&clearTimeout(l(this,da)),A(this,da,setTimeout(()=>{A(this,da,null),_(this,Vt,VS).call(this)},200))}copyCanvas(e,n,a=!1){e||(e=224);const{width:o,height:c}=l(this,Te),h=new ga;let d=l(this,Te),f=o,m=c,b=null;if(n){if(o>n||c>n){const F=Math.min(n/o,n/c);f=Math.floor(o*F),m=Math.floor(c*F)}b=document.createElement("canvas");const S=b.width=Math.ceil(f*h.sx),C=b.height=Math.ceil(m*h.sy);l(this,Fn)||(d=_(this,Vt,Wy).call(this,S,C));const T=b.getContext("2d");T.filter=this._uiManager.hcmFilter;let M="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":AO.isDarkMode&&(M="#8f8f9d",x="#42414d");const L=15,R=L*h.sx,O=L*h.sy,N=new OffscreenCanvas(R*2,O*2),B=N.getContext("2d");B.fillStyle=M,B.fillRect(0,0,R*2,O*2),B.fillStyle=x,B.fillRect(0,0,R,O),B.fillRect(R,O,R,O),T.fillStyle=T.createPattern(N,"repeat"),T.fillRect(0,0,S,C),T.drawImage(d,0,0,d.width,d.height,0,0,S,C)}let v=null;if(a){let S,C;if(h.symmetric&&d.width<e&&d.height<e)S=d.width,C=d.height;else if(d=l(this,Te),o>e||c>e){const x=Math.min(e/o,e/c);S=Math.floor(o*x),C=Math.floor(c*x),l(this,Fn)||(d=_(this,Vt,Wy).call(this,S,C))}const M=new OffscreenCanvas(S,C).getContext("2d",{willReadFrequently:!0});M.drawImage(d,0,0,d.width,d.height,0,0,S,C),v={width:S,height:C,data:M.getImageData(0,0,S,C).data}}return{canvas:b,width:f,height:m,imageData:v}}static async deserialize(e,n,a){var M;let o=null,c=!1;if(e instanceof Jx){const{data:{rect:x,rotation:L,id:R,structParent:O,popupRef:N,richText:B,contentsObj:F,creationDate:W,modificationDate:Z},container:it,parent:{page:{pageNumber:et}},canvas:rt}=e;let yt,gt;rt?(delete e.canvas,{id:yt,bitmap:gt}=a.imageManager.getFromCanvas(it.id,rt),rt.remove()):(c=!0,e._hasNoCanvas=!0);const wt=((M=await n._structTree.getAriaAttributes(`${Pu}${R}`))==null?void 0:M.get("aria-label"))||"";o=e={annotationType:Mt.STAMP,bitmapId:yt,bitmap:gt,pageIndex:et-1,rect:x.slice(0),rotation:L,annotationElementId:R,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:wt},isSvg:!1,structParent:O,popupRef:N,richText:B,comment:(F==null?void 0:F.str)||null,creationDate:W,modificationDate:Z}}const h=await super.deserialize(e,n,a),{rect:d,bitmap:f,bitmapUrl:m,bitmapId:b,isSvg:v,accessibilityData:S}=e;c?(a.addMissingCanvas(e.id,h),A(h,Bc,!0)):b&&a.imageManager.isValidId(b)?(A(h,hi,b),f&&A(h,Te,f)):A(h,mr,m),A(h,Fn,v);const[C,T]=h.pageDimensions;return h.width=(d[2]-d[0])/C,h.height=(d[3]-d[1])/T,S&&(h.altTextData=S),h._initialData=o,e.comment&&h.setCommentData(e),A(h,ud,!!o),h}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const a=Object.assign(super.serialize(e),{bitmapId:l(this,hi),isSvg:l(this,Fn)});if(this.addComment(a),e)return a.bitmapUrl=_(this,Vt,Zy).call(this,!0),a.accessibilityData=this.serializeAltText(!0),a.isCopy=!0,a;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(a.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const d=_(this,Vt,P2).call(this,a);return d.isSame?null:(d.isSameAltText?delete a.accessibilityData:a.accessibilityData.structParent=this._initialData.structParent??-1,a.id=this.annotationElementId,delete a.bitmapId,a)}if(n===null)return a;n.stamps||(n.stamps=new Map);const h=l(this,Fn)?(a.rect[2]-a.rect[0])*(a.rect[3]-a.rect[1]):null;if(!n.stamps.has(l(this,hi)))n.stamps.set(l(this,hi),{area:h,serialized:a}),a.bitmap=_(this,Vt,Zy).call(this,!1);else if(l(this,Fn)){const d=n.stamps.get(l(this,hi));h>d.area&&(d.area=h,d.serialized.bitmap.close(),d.serialized.bitmap=_(this,Vt,Zy).call(this,!1))}return a}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Te=new WeakMap,hi=new WeakMap,Il=new WeakMap,mr=new WeakMap,jl=new WeakMap,cd=new WeakMap,yr=new WeakMap,Bc=new WeakMap,da=new WeakMap,Fn=new WeakMap,ud=new WeakMap,Vt=new WeakSet,Ff=function(e,n=!1){if(!e){this.remove();return}A(this,Te,e.bitmap),n||(A(this,hi,e.id),A(this,Fn,e.isSvg)),e.file&&A(this,cd,e.file.name),_(this,Vt,Qy).call(this)},Uf=function(){if(A(this,Il,null),this._uiManager.enableWaiting(!1),!!l(this,yr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Te)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Te)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ky=function(){if(l(this,hi)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,hi)).then(a=>_(this,Vt,Ff).call(this,a,!0)).finally(()=>_(this,Vt,Uf).call(this));return}if(l(this,mr)){const a=l(this,mr);A(this,mr,null),this._uiManager.enableWaiting(!0),A(this,Il,this._uiManager.imageManager.getFromUrl(a).then(o=>_(this,Vt,Ff).call(this,o)).finally(()=>_(this,Vt,Uf).call(this)));return}if(l(this,jl)){const a=l(this,jl);A(this,jl,null),this._uiManager.enableWaiting(!0),A(this,Il,this._uiManager.imageManager.getFromFile(a).then(o=>_(this,Vt,Ff).call(this,o)).finally(()=>_(this,Vt,Uf).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=RA.join(",");const n=this._uiManager._signal;A(this,Il,new Promise(a=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),_(this,Vt,Ff).call(this,o)}a()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),a()},{signal:n})}).finally(()=>_(this,Vt,Uf).call(this))),e.click()},Qy=function(){var f;const{div:e}=this;let{width:n,height:a}=l(this,Te);const[o,c]=this.pageDimensions,h=.75;if(this.width)n=this.width*o,a=this.height*c;else if(n>h*o||a>h*c){const m=Math.min(h*o/n,h*c/a);n*=m,a*=m}this._uiManager.enableWaiting(!1);const d=A(this,yr,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),this.width=n/o,this.height=a/c,this.setDims(),(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),_(this,Vt,VS).call(this),l(this,ud)||(this.parent.addUndoableEditor(this),A(this,ud,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,cd)&&this.div.setAttribute("aria-description",l(this,cd)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Wy=function(e,n){const{width:a,height:o}=l(this,Te);let c=a,h=o,d=l(this,Te);for(;c>2*e||h>2*n;){const f=c,m=h;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),h>2*n&&(h=h>=16384?Math.floor(h/2)-1:Math.ceil(h/2));const b=new OffscreenCanvas(c,h);b.getContext("2d").drawImage(d,0,0,f,m,0,0,c,h),d=b.transferToImageBitmap()}return d},VS=function(){const[e,n]=this.parentDimensions,{width:a,height:o}=this,c=new ga,h=Math.ceil(a*e*c.sx),d=Math.ceil(o*n*c.sy),f=l(this,yr);if(!f||f.width===h&&f.height===d)return;f.width=h,f.height=d;const m=l(this,Fn)?l(this,Te):_(this,Vt,Wy).call(this,h,d),b=f.getContext("2d");b.filter=this._uiManager.hcmFilter,b.drawImage(m,0,0,m.width,m.height,0,0,h,d)},Zy=function(e){if(e){if(l(this,Fn)){const o=this._uiManager.imageManager.getSvgUrl(l(this,hi));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Te),n.getContext("2d").drawImage(l(this,Te),0,0),n.toDataURL()}if(l(this,Fn)){const[n,a]=this.pageDimensions,o=Math.round(this.width*n*Kl.PDF_TO_CSS_UNITS),c=Math.round(this.height*a*Kl.PDF_TO_CSS_UNITS),h=new OffscreenCanvas(o,c);return h.getContext("2d").drawImage(l(this,Te),0,0,l(this,Te).width,l(this,Te).height,0,0,o,c),h.transferToImageBitmap()}return structuredClone(l(this,Te))},P2=function(e){var h;const{pageIndex:n,accessibilityData:{altText:a}}=this._initialData,o=e.pageIndex===n,c=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===a;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&c,isSameAltText:c}},tt(qS,"_type","stamp"),tt(qS,"_editorType",Mt.STAMP);var zc,hd,Gl,ql,br,on,Vl,dd,fd,Ns,vr,di,Ar,Xl,gd,ft,Yl,fe,YS,F2,qs,$S,KS,Jy;const ws=class ws{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:a,accessibilityManager:o,annotationLayer:c,drawLayer:h,textLayer:d,viewport:f,l10n:m}){E(this,fe);E(this,zc);E(this,hd,!1);E(this,Gl,null);E(this,ql,null);E(this,br,null);E(this,on,new Map);E(this,Vl,!1);E(this,dd,!1);E(this,fd,!1);E(this,Ns,null);E(this,vr,null);E(this,di,null);E(this,Ar,null);E(this,Xl,null);E(this,gd,-1);E(this,ft);const b=[...l(ws,Yl).values()];if(!ws._initialized){ws._initialized=!0;for(const v of b)v.initialize(m,t)}t.registerEditorTypes(b),A(this,ft,t),this.pageIndex=e,this.div=n,A(this,zc,o),A(this,Gl,c),this.viewport=f,A(this,di,d),this.drawLayer=h,this._structTree=a,l(this,ft).addLayer(this)}get isEmpty(){return l(this,on).size===0}get isInvisible(){return this.isEmpty&&l(this,ft).getMode()===Mt.NONE}updateToolbar(t){l(this,ft).updateToolbar(t)}updateMode(t=l(this,ft).getMode()){switch(_(this,fe,Jy).call(this),t){case Mt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Mt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Mt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Mt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of l(ws,Yl).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,di))==null?void 0:e.div)}setEditingState(t){l(this,ft).setEditingState(t)}addCommands(t){l(this,ft).addCommands(t)}cleanUndoStack(t){l(this,ft).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,Gl))==null||e.togglePointerEvents(t)}async enable(){var n;A(this,fd,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=l(this,Xl))==null||n.abort(),A(this,Xl,null);const t=new Set;for(const a of l(this,fe,YS))a.enableEditing(),a.show(!0),a.annotationElementId&&(l(this,ft).removeChangedExistingAnnotation(a),t.add(a.annotationElementId));const e=l(this,Gl);if(e)for(const a of e.getEditableAnnotations()){if(a.hide(),l(this,ft).isDeletedAnnotationElement(a.data.id)||t.has(a.data.id))continue;const o=await this.deserialize(a);o&&(this.addOrRebuild(o),o.enableEditing())}A(this,fd,!1),l(this,ft)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var a;if(A(this,dd,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,di)&&!l(this,Xl)){A(this,Xl,new AbortController);const o=l(this,ft).combinedSignal(l(this,Xl));l(this,di).div.addEventListener("pointerdown",c=>{const{clientX:d,clientY:f,timeStamp:m}=c,b=l(this,gd);if(m-b>500){A(this,gd,m);return}A(this,gd,-1);const{classList:v}=this.div;v.toggle("getElements",!0);const S=document.elementsFromPoint(d,f);if(v.toggle("getElements",!1),!this.div.contains(S[0]))return;let C;const T=new RegExp(`^${If}[0-9]+$`);for(const x of S)if(T.test(x.id)){C=x.id;break}if(!C)return;const M=l(this,on).get(C);(M==null?void 0:M.annotationElementId)===null&&(c.stopPropagation(),c.preventDefault(),M.dblclick(c))},{signal:o,capture:!0})}const t=l(this,Gl),e=[];if(t){const o=new Map,c=new Map;for(const d of l(this,fe,YS)){if(d.disableEditing(),!d.annotationElementId){e.push(d);continue}if(d.serialize()!==null){o.set(d.annotationElementId,d);continue}else c.set(d.annotationElementId,d);(a=this.getEditableAnnotation(d.annotationElementId))==null||a.show(),d.remove()}const h=t.getEditableAnnotations();for(const d of h){const{id:f}=d.data;if(l(this,ft).isDeletedAnnotationElement(f)){d.updateEdited({deleted:!0});continue}let m=c.get(f);if(m){m.resetAnnotationElement(d),m.show(!1),d.show();continue}m=o.get(f),m&&(l(this,ft).addChangedExistingAnnotation(m),m.renderAnnotationElement(d)&&m.show(!1)),d.show()}}_(this,fe,Jy).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const o of l(ws,Yl).values())n.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),A(this,dd,!1)}getEditableAnnotation(t){var e;return((e=l(this,Gl))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,ft).getActive()!==t&&l(this,ft).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,di))!=null&&t.div&&!l(this,Ar)){A(this,Ar,new AbortController);const e=l(this,ft).combinedSignal(l(this,Ar));l(this,di).div.addEventListener("pointerdown",_(this,fe,F2).bind(this),{signal:e}),l(this,di).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,di))!=null&&t.div&&l(this,Ar)&&(l(this,Ar).abort(),A(this,Ar,null),l(this,di).div.classList.remove("highlighting"))}enableClick(){if(l(this,ql))return;A(this,ql,new AbortController);const t=l(this,ft).combinedSignal(l(this,ql));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,ql))==null||t.abort(),A(this,ql,null)}attach(t){l(this,on).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,ft).isDeletedAnnotationElement(e)&&l(this,ft).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,on).delete(t.id),(e=l(this,zc))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,dd)&&t.annotationElementId&&l(this,ft).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,ft).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,ft).addDeletedAnnotationElement(t),ye.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,ft).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,fd)),l(this,ft).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,br)&&(t._focusEventsAllowed=!1,A(this,br,setTimeout(()=>{A(this,br,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,ft)._signal}),e.focus())},0))),t._structTreeParentId=(n=l(this,zc))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of l(this,on).values())if(e.uid===t)return e;return null}getNextId(){return l(this,ft).getId()}combinedSignal(t){return l(this,ft).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,fe,qs))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await l(this,ft).updateMode(t.mode);const{offsetX:n,offsetY:a}=_(this,fe,KS).call(this),o=this.getNextId(),c=_(this,fe,$S).call(this,{parent:this,id:o,x:n,y:a,uiManager:l(this,ft),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){var e;return await((e=l(ws,Yl).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,ft)))||null}createAndAddNewEditor(t,e,n={}){const a=this.getNextId(),o=_(this,fe,$S).call(this,{parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:l(this,ft),isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(_(this,fe,KS).call(this),!0,t)}setSelected(t){l(this,ft).setSelected(t)}toggleSelected(t){l(this,ft).toggleSelected(t)}unselect(t){l(this,ft).unselect(t)}pointerup(t){var a;const{isMac:e}=xi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Vl)||(A(this,Vl,!1),(a=l(this,fe,qs))!=null&&a.isDrawer&&l(this,fe,qs).supportMultipleDrawings))return;if(!l(this,hd)){A(this,hd,!0);return}const n=l(this,ft).getMode();if(n===Mt.STAMP||n===Mt.SIGNATURE){l(this,ft).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var a;if(l(this,ft).getMode()===Mt.HIGHLIGHT&&this.enableTextSelection(),l(this,Vl)){A(this,Vl,!1);return}const{isMac:e}=xi.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,Vl,!0),(a=l(this,fe,qs))!=null&&a.isDrawer){this.startDrawingSession(t);return}const n=l(this,ft).getActive();A(this,hd,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,Ns)){l(this,fe,qs).startDrawing(this,l(this,ft),!1,t);return}l(this,ft).setCurrentDrawingSession(this),A(this,Ns,new AbortController);const e=l(this,ft).combinedSignal(l(this,Ns));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(A(this,vr,null),this.commitOrRemove())},{signal:e}),l(this,fe,qs).startDrawing(this,l(this,ft),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,vr,e);return}l(this,vr)&&setTimeout(()=>{var e;(e=l(this,vr))==null||e.focus(),A(this,vr,null)},0)}endDrawingSession(t=!1){return l(this,Ns)?(l(this,ft).setCurrentDrawingSession(null),l(this,Ns).abort(),A(this,Ns,null),A(this,vr,null),l(this,fe,qs).endDrawing(t)):null}findNewParent(t,e,n){const a=l(this,ft).findParent(e,n);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return l(this,Ns)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Ns)&&l(this,fe,qs).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,ft).getActive())==null?void 0:t.parent)===this&&(l(this,ft).commitOrRemove(),l(this,ft).setActiveEditor(null)),l(this,br)&&(clearTimeout(l(this,br)),A(this,br,null));for(const n of l(this,on).values())(e=l(this,zc))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,on).clear(),l(this,ft).removeLayer(this)}render({viewport:t}){this.viewport=t,Fc(this.div,t);for(const e of l(this,ft).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,ft).commitOrRemove(),_(this,fe,Jy).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Fc(this.div,{rotation:n}),e!==n)for(const a of l(this,on).values())a.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,ft).viewParameters.realScale}};zc=new WeakMap,hd=new WeakMap,Gl=new WeakMap,ql=new WeakMap,br=new WeakMap,on=new WeakMap,Vl=new WeakMap,dd=new WeakMap,fd=new WeakMap,Ns=new WeakMap,vr=new WeakMap,di=new WeakMap,Ar=new WeakMap,Xl=new WeakMap,gd=new WeakMap,ft=new WeakMap,Yl=new WeakMap,fe=new WeakSet,YS=function(){return l(this,on).size!==0?l(this,on).values():l(this,ft).getEditors(this.pageIndex)},F2=function(t){l(this,ft).unselectAll();const{target:e}=t;if(e===l(this,di).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,di).div.contains(e)){const{isMac:n}=xi.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,ft).showAllEditors("highlight",!0,!0),l(this,di).div.classList.add("free"),this.toggleDrawing(),db.startHighlighting(this,l(this,ft).direction==="ltr",{target:l(this,di).div,x:t.x,y:t.y}),l(this,di).div.addEventListener("pointerup",()=>{l(this,di).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ft)._signal}),t.preventDefault()}},qs=function(){return l(ws,Yl).get(l(this,ft).getMode())},$S=function(t){const e=l(this,fe,qs);return e?new e.prototype.constructor(t):null},KS=function(){const{x:t,y:e,width:n,height:a}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+n),d=Math.min(window.innerHeight,e+a),f=(o+h)/2-t,m=(c+d)/2-e,[b,v]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:b,offsetY:v}},Jy=function(){for(const t of l(this,on).values())t.isEmpty()&&t.remove()},tt(ws,"_initialized",!1),E(ws,Yl,new Map([xS,PS,qS,db,GS].map(t=>[t._editorType,t])));let XS=ws;var ks,Ii,Pc,kp,Ob,U2,pa,WS,H2,ZS;const ti=class ti{constructor({pageIndex:t}){E(this,pa);E(this,ks,null);E(this,Ii,new Map);E(this,Pc,new Map);this.pageIndex=t}setParent(t){if(!l(this,ks)){A(this,ks,t);return}if(l(this,ks)!==t){if(l(this,Ii).size>0)for(const e of l(this,Ii).values())e.remove(),t.append(e);A(this,ks,t)}}static get _svgFactory(){return Ct(this,"_svgFactory",new ub)}draw(t,e=!1,n=!1){const a=Ze(ti,kp)._++,o=_(this,pa,WS).call(this),c=ti._svgFactory.createElement("defs");o.append(c);const h=ti._svgFactory.createElement("path");c.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,Pc).set(a,h);const f=n?_(this,pa,H2).call(this,c,d):null,m=ti._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(o,t),l(this,Ii).set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=Ze(ti,kp)._++,a=_(this,pa,WS).call(this),o=ti._svgFactory.createElement("defs");a.append(o);const c=ti._svgFactory.createElement("path");o.append(c);const h=`path_p${this.pageIndex}_${n}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const b=ti._svgFactory.createElement("mask");o.append(b),d=`mask_p${this.pageIndex}_${n}`,b.setAttribute("id",d),b.setAttribute("maskUnits","objectBoundingBox");const v=ti._svgFactory.createElement("rect");b.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const S=ti._svgFactory.createElement("use");b.append(S),S.setAttribute("href",`#${h}`),S.setAttribute("stroke","none"),S.setAttribute("fill","black"),S.setAttribute("fill-rule","nonzero"),S.classList.add("mask")}const f=ti._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const m=f.cloneNode();return a.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),l(this,Ii).set(n,a),n}finalizeDraw(t,e){l(this,Pc).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var d;if(!e)return;const{root:n,bbox:a,rootClass:o,path:c}=e,h=typeof t=="number"?l(this,Ii).get(t):t;if(h){if(n&&_(this,pa,ZS).call(this,h,n),a&&_(d=ti,Ob,U2).call(d,h,a),o){const{classList:f}=h;for(const[m,b]of Object.entries(o))f.toggle(m,b)}if(c){const m=h.firstElementChild.firstElementChild;_(this,pa,ZS).call(this,m,c)}}}updateParent(t,e){if(e===this)return;const n=l(this,Ii).get(t);n&&(l(e,ks).append(n),l(this,Ii).delete(t),l(e,Ii).set(t,n))}remove(t){l(this,Pc).delete(t),l(this,ks)!==null&&(l(this,Ii).get(t).remove(),l(this,Ii).delete(t))}destroy(){A(this,ks,null);for(const t of l(this,Ii).values())t.remove();l(this,Ii).clear(),l(this,Pc).clear()}};ks=new WeakMap,Ii=new WeakMap,Pc=new WeakMap,kp=new WeakMap,Ob=new WeakSet,U2=function(t,[e,n,a,o]){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*o}%`},pa=new WeakSet,WS=function(){const t=ti._svgFactory.create(1,1,!0);return l(this,ks).append(t),t.setAttribute("aria-hidden",!0),t},H2=function(t,e){const n=ti._svgFactory.createElement("clipPath");t.append(n);const a=`clip_${e}`;n.setAttribute("id",a),n.setAttribute("clipPathUnits","objectBoundingBox");const o=ti._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a},ZS=function(t,e){for(const[n,a]of Object.entries(e))a===null?t.removeAttribute(n):t.setAttribute(n,a)},E(ti,Ob),E(ti,kp,0);let QS=ti;globalThis._pdfjsTestingUtils={HighlightOutliner:RS};globalThis.pdfjsLib={AbortException:$l,AnnotationEditorLayer:XS,AnnotationEditorParamsType:jt,AnnotationEditorType:Mt,AnnotationEditorUIManager:Uc,AnnotationLayer:TS,AnnotationMode:il,AnnotationType:Ye,applyOpacity:wO,build:RN,ColorPicker:ob,createValidAbsoluteUrl:DC,CSSConstants:SO,DOMSVGFactory:ub,DrawLayer:QS,FeatureTest:xi,fetchData:Up,findContrastColor:EO,getDocument:Fx,getFilenameFromUrl:pO,getPdfFilenameFromUrl:mO,getRGB:Ip,getUuid:NC,getXfaPageViewport:bO,GlobalWorkerOptions:fa,ImageKind:Ay,InvalidPDFException:xA,isDataScheme:Fb,isPdfFile:rw,isValidExplicitDest:NO,MathClamp:Gi,noContextMenu:ms,normalizeUnicode:dO,OPS:jf,OutputScale:ga,PasswordResponses:nO,PDFDataRangeTransport:Ux,PDFDateString:ib,PDFWorker:Vf,PermissionFlag:iO,PixelsPerInch:Kl,RenderingCancelledException:aw,renderRichText:zC,ResponseException:eb,setLayerDimensions:Fc,shadow:Ct,SignatureExtractor:Sr,stopEvent:Pe,SupportedImageMimeTypes:RA,TextLayer:qf,TouchManager:sb,updateUrlHash:LC,Util:ut,VerbosityLevel:Bb,version:MN,XfaLayer:BC};const JN="/assets/pdf.worker.min-CXgfMxHN.mjs";fa.workerSrc=JN;const tk=()=>{const[g,t]=Y.useState(!1),[e,n]=Y.useState(""),[a,o]=Y.useState(""),[c,h]=Y.useState(""),[d,f]=Y.useState(!1),[m,b]=Y.useState(""),[v,S]=Y.useState("");Y.useEffect(()=>{sessionStorage.getItem("admin_auth")==="authenticated"&&(t(!0),C())},[]);const C=async()=>{f(!0);try{const[R,O]=await Promise.all([fetch("/api/admin-get-knowledge-base"),fetch("/api/admin-get-system-instructions")]);if(R.ok){const N=await R.json();o(N.content)}if(O.ok){const N=await O.json();h(N.instructions)}}catch(R){S("Fout bij het laden van gegevens: "+R.message)}finally{f(!1)}},T=async R=>{R.preventDefault(),f(!0),S("");try{const O=await fetch("/api/admin-authenticate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});if(O.ok)sessionStorage.setItem("admin_auth","authenticated"),t(!0),n(""),await C();else{const N=await O.json();S(N.error||"Onjuist wachtwoord")}}catch(O){S("Fout bij authenticatie: "+O.message)}finally{f(!1)}},M=async()=>{f(!0),b(""),S("");try{const R=await fetch("/api/admin-update-knowledge-base",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:a})});if(R.ok)b("Kennisbank succesvol bijgewerkt!");else{const O=await R.json();S(O.error||"Fout bij het opslaan")}}catch(R){S("Fout bij het opslaan: "+R.message)}finally{f(!1)}},x=async()=>{f(!0),b(""),S("");try{const R=await fetch("/api/admin-update-system-instructions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instructions:c})});if(R.ok)b("Systeem instructies succesvol bijgewerkt!");else{const O=await R.json();S(O.error||"Fout bij het opslaan")}}catch(R){S("Fout bij het opslaan: "+R.message)}finally{f(!1)}},L=()=>{sessionStorage.removeItem("admin_auth"),t(!1),o(""),h("")};return g?nt.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black p-4",children:nt.jsx("div",{className:"max-w-6xl mx-auto",children:nt.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 p-8",children:[nt.jsxs("div",{className:"flex justify-between items-center mb-8",children:[nt.jsx("h1",{className:"text-3xl font-bold text-white",children:"ORBINITE AI Admin"}),nt.jsx("button",{onClick:L,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Uitloggen"})]}),m&&nt.jsx("div",{className:"mb-6 p-4 bg-highlight/20 border border-highlight text-white rounded-lg",children:m}),v&&nt.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500 text-red-300 rounded-lg",children:v}),nt.jsxs("div",{className:"space-y-8",children:[nt.jsxs("div",{children:[nt.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Kennisbank Context"}),nt.jsx("p",{className:"text-gray-400 mb-4",children:"Bewerk de kennisbank die de AI gebruikt om vragen te beantwoorden."}),nt.jsx("textarea",{value:a,onChange:R=>o(R.target.value),className:"w-full h-64 px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:border-highlight font-mono text-sm",disabled:d}),nt.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[nt.jsxs("label",{className:`flex items-center gap-2 bg-gray-600 hover:bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg cursor-pointer transition-colors ${d?"opacity-50 cursor-not-allowed":""}`,children:[nt.jsx($L,{}),nt.jsx("span",{children:"Upload Bestand (.txt, .pdf)"}),nt.jsx("input",{type:"file",accept:".txt,application/pdf",onChange:async R=>{var N;const O=(N=R.target.files)==null?void 0:N[0];if(O){f(!0),S("");try{if(O.type==="application/pdf"){const B=await O.arrayBuffer(),F=await Fx({data:B}).promise;let W="";for(let Z=1;Z<=F.numPages;Z++){const rt=(await(await F.getPage(Z)).getTextContent()).items.map(yt=>yt.str).join(" ");W+=rt+`

`}o(Z=>Z+(Z?`

`:"")+W.trim()),b(`PDF "${O.name}" succesvol toegevoegd!`)}else{const B=await O.text();o(F=>F+(F?`

`:"")+B.trim()),b(`Bestand "${O.name}" succesvol toegevoegd!`)}}catch(B){console.error("File upload error:",B),S("Fout bij het lezen van bestand: "+B.message)}finally{f(!1),R.target.value=""}}},disabled:d,className:"hidden"})]}),nt.jsx("span",{className:"text-gray-400 text-sm",children:"Voegt inhoud toe aan bestaande tekst"})]}),nt.jsx("button",{onClick:M,disabled:d,className:"mt-4 bg-highlight hover:bg-highlight-hover text-white font-semibold px-6 py-2 rounded-lg transition-colors disabled:opacity-50",children:d?"Bezig...":"Kennisbank Opslaan"})]}),nt.jsxs("div",{children:[nt.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"Systeem Instructies"}),nt.jsx("p",{className:"text-gray-400 mb-4",children:"Bewerk de instructies die bepalen hoe de AI zich gedraagt en antwoordt."}),nt.jsx("textarea",{value:c,onChange:R=>h(R.target.value),className:"w-full h-64 px-4 py-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:border-highlight font-mono text-sm",disabled:d}),nt.jsx("button",{onClick:x,disabled:d,className:"mt-4 bg-highlight hover:bg-highlight-hover text-white font-semibold px-6 py-2 rounded-lg transition-colors disabled:opacity-50",children:d?"Bezig...":"Instructies Opslaan"})]})]})]})})}):nt.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center p-4",children:nt.jsxs("div",{className:"w-full max-w-md bg-gray-800/50 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 p-8",children:[nt.jsx("h1",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Admin Login"}),nt.jsxs("form",{onSubmit:T,children:[nt.jsxs("div",{className:"mb-4",children:[nt.jsx("label",{htmlFor:"password",className:"block text-gray-300 mb-2",children:"Wachtwoord"}),nt.jsx("input",{type:"password",id:"password",value:e,onChange:R=>n(R.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:border-highlight",required:!0,disabled:d})]}),v&&nt.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500 text-red-300 rounded-lg",children:v}),nt.jsx("button",{type:"submit",disabled:d,className:"w-full bg-highlight hover:bg-highlight-hover text-white font-semibold py-2 rounded-lg transition-colors disabled:opacity-50",children:d?"Bezig...":"Login"})]})]})})},ek=()=>nt.jsx(FL,{children:nt.jsxs(pL,{children:[nt.jsx(EA,{path:"/",element:nt.jsx(eO,{})}),nt.jsx(EA,{path:"/orbadmin-ai",element:nt.jsx(tk,{})})]})}),I2=document.getElementById("root");if(!I2)throw new Error("Could not find root element to mount to");const ik=ED.createRoot(I2);ik.render(nt.jsx(hC.StrictMode,{children:nt.jsx(ek,{})}));
